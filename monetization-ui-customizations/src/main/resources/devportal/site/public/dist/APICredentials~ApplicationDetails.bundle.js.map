{"version":3,"sources":["webpack:///./source/src/app/components/Shared/ScopeValidation.jsx","webpack:///./source/src/app/data/Subscription.jsx","webpack:///./source/src/app/components/Shared/AppsAndKeys/ProvideOAuthKeys.jsx","webpack:///./source/src/app/components/Shared/AppsAndKeys/ViewCurl.jsx","webpack:///./source/src/app/components/Shared/AppsAndKeys/ViewKeys.jsx","webpack:///./source/src/app/components/Shared/AppsAndKeys/WaitingForApproval.jsx","webpack:///./source/src/app/components/Shared/AppsAndKeys/TokenManagerSummary.jsx","webpack:///./source/src/app/components/Shared/AppsAndKeys/TokenManager.jsx"],"names":["resourcePaths","APIS","SINGLE_API","API_SWAGGER","API_WSDL","API_GW_CONFIG","API_THUMBNAIL","API_COPY","API_LC_HISTORY","API_CHANGE_LC","API_LC","API_LC_PENDING_TASK","API_DEF","API_VALIDATE_DEF","API_DOCS","API_DOC","API_DOC_CONTENT","APPLICATIONS","SINGLE_APPLICATION","APPLICATION_GENERATE_KEYS","APPLICATION_GENERATE_KEY_TYPE","EXPORT_APIS","IMPORT_APIS","SUBSCRIPTION","SINGLE_SUBSCRIPTION","SUBSCRIPTIONS","BLOCK_SUBSCRIPTION","UNBLOCK_SUBSCRIPTION","POLICIES","POLICY","ENDPOINTS","ENDPOINT","LABLES","WORKFLOW","SERVICE_DISCOVERY","resourceMethods","POST","PUT","GET","DELETE","ScopeValidation","React","Component","constructor","props","super","this","state","componentDidMount","resourcePath","resourceMethod","hasScope","AuthManager","hasScopes","then","haveScope","setState","render","children","propTypes","PropTypes","node","isRequired","string","Subscription","Resource","client","APIClientFactory","getAPIClient","Utils","getEnvironment","label","getSubscriptions","apiId","applicationId","limit","apis","get_subscriptions","getSubscription","subscriptionUUID","get_subscriptions__subscriptionId_","subscriptionId","getMonetizationInvoice","get_subscriptions__subscriptionId__usage","deleteSubscription","delete_subscriptions__subscriptionId_","ProvideOAuthKeys","classes","consumerKey","consumerSecret","intl","onChange","isUserOwner","handleChange","event","Grid","container","spacing","direction","item","xs","TextField","id","name","className","textField","formatMessage","defaultMessage","value","e","margin","fullWidth","disabled","variant","FormControl","FormHelperText","shape","func","defaultProps","injectIntl","withStyles","theme","marginTop","useStyles","makeStyles","code","padding","marginBottom","background","palette","grey","color","flex","command","encodeVisible","cursor","textDecoration","contentWrapper","display","ViewCurl","keys","bas64Encoded","window","btoa","settings","apiGatewayEndpoint","useContext","Settings","showReal","setShowReal","useState","tokenCopied","setTokenCopied","onCopy","setTimeout","applyReal","tokenURL","split","Fragment","Typography","onClick","Tooltip","title","placement","text","ViewKeys","accessTokenRequest","that","elementName","data","preventDefault","open","showToken","keyType","applicationPromise","application","regenerateSecret","response","console","log","showSecretGen","secretGenResponse","catch","error","status","notFound","showCurl","isKeyJWT","isUpdating","generateToken","timeout","scopesSelected","tokenResponse","token","accessToken","tokenScopes","tokenValidityTime","validityTime","selectedApp","hashEnabled","keyCopied","secretCopied","showCS","copyWrapper","InputProps","readOnly","endAdornment","InputAdornment","position","iconStyle","Icon","Button","button","handleSecretRegenerate","type","IconButton","handleShowHidden","onMouseDown","handleMouseDownGeneric","appId","Application","get","subscriptionScopes","getKeys","newRequest","map","scope","key","componentDidUpdate","prevProps","fullScreen","tokenType","selectedGrantTypes","summary","ResourceNotFound","Loading","csCkKeys","accessTokenScopes","validityPeriod","tokenDetails","dialogHead","gridWrapper","viewKeyAndSecret","inputWrapper","InputLabel","htmlFor","join","Dialog","includes","onClose","handleClose","aria-labelledby","DialogTitle","DialogContent","DialogContentText","Tokens","updateAccessTokenRequest","ViewToken","isOauth","ViewSecret","secret","DialogActions","CircularProgress","size","generateAccessToken","autoFocus","tokenSection","handleClickOpen","handleClickOpenCurl","gutterBottom","bool","getContrastText","default","alignItems","fontSize","paddingLeft","flexDirection","paddingTop","marginRight","root","keyState","states","message","REJECTED","noKeysRoot","backgroundImage","app","context","custom","overviewPage","keysBackground","height","backgroundPosition","backgroundRepeat","backgroundSize","minHeight","TokenManagerSummary","keyStates","emptyBox","component","CREATED","WaitingForApproval","keyGrantTypes","supportedGrantTypes","TokenManager","generateEnabled","API","getSettings","keyRequest","newKeyRequest","serverSupportedGrantTypes","obj","grantTypes","filter","getserverSupportedGrantTypes","callbackUrl","isLoading","providedConsumerKey","providedConsumerSecret","COMPLETED","APPROVED","updateKeyRequest","bind","generateKeys","updateKeys","cleanUpKeys","handleOnChangeProvidedOAuth","provideOAuthKeySecret","loadApplication","updateSubscriptionData","newKeys","Map","set","Alert","info","finally","applicationKey","target","provideKeys","username","getUser","owner","toLowerCase","Progress","cleanUpInfoText","cleanUpButton","settingsContext","mapExistingAuthApps","Paper","paper","ExpansionPanel","defaultExpanded","ExpansionPanelSummary","expandIcon","heading","ExpansionPanelDetails","keyConfigWrapper","KeyConfiguration","isKeysAvailable","setGenerateEnabled","generateWrapper","instanceOf","Object","marginLeft"],"mappings":"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","file":"APICredentials~ApplicationDetails.bundle.js","sourcesContent":["/*\n * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n *\n * WSO2 Inc. licenses this file to you under the Apache License,\n * Version 2.0 (the \"License\"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport AuthManager from '../../data/AuthManager';\n\nconst resourcePaths = {\n    APIS: '/apis',\n    SINGLE_API: '/apis/{apiId}',\n    API_SWAGGER: '/apis/{apiId}/swagger',\n    API_WSDL: '/apis/{apiId}/wsdl',\n    API_GW_CONFIG: '/apis/{apiId}/gateway-config',\n    API_THUMBNAIL: '/apis/{apiId}/thumbnail',\n    API_COPY: '/apis/copy-api',\n    API_LC_HISTORY: '/apis/{apiId}/lifecycle-history',\n    API_CHANGE_LC: '/apis/change-lifecycle',\n    API_LC: '/apis/{apiId}/lifecycle',\n    API_LC_PENDING_TASK: '/apis/{apiId}/lifecycle/lifecycle-pending-task',\n    API_DEF: '/apis/import-definition',\n    API_VALIDATE_DEF: '/apis/validate-definition',\n    API_DOCS: '/apis/{apiId}/documents',\n    API_DOC: \"'/apis/{apiId}/documents/{documentId}'\",\n    API_DOC_CONTENT: \"'/apis/{apiId}/documents/{documentId}/content'\",\n    APPLICATIONS: '/applications',\n    SINGLE_APPLICATION: '/applications/{applicationId}',\n    APPLICATION_GENERATE_KEYS: '/applications/{applicationId}/generate-keys',\n    APPLICATION_GENERATE_KEY_TYPE: '/applications/{applicationId}/keys/{keyType}',\n    EXPORT_APIS: '/export/apis',\n    IMPORT_APIS: '/import/apis',\n    SUBSCRIPTION: '/subscriptions',\n    SINGLE_SUBSCRIPTION: '/subscriptions/{subscriptionId}',\n    SUBSCRIPTIONS: '/subscriptions',\n    BLOCK_SUBSCRIPTION: '/subscriptions/block-subscription:',\n    UNBLOCK_SUBSCRIPTION: '/subscriptions/unblock-subscription',\n    POLICIES: \"'/policies/{tierLevel}'\",\n    POLICY: \"'/policies/{tierLevel}/{tierName}'\",\n    ENDPOINTS: '/endpoints',\n    ENDPOINT: '/endpoints/{endpointId}',\n    LABLES: '/labels',\n    WORKFLOW: '/workflows/{workflowReferenceId}',\n    SERVICE_DISCOVERY: '/external-resources/services',\n};\n\nconst resourceMethods = {\n    POST: 'post',\n    PUT: 'put',\n    GET: 'get',\n    DELETE: 'delete',\n};\n\n/**\n * Show element iff user has proper scope for the view/action\n * @class ScopeValidation\n * @extends {React.Component}\n */\nclass ScopeValidation extends React.Component {\n    /**\n     * Creates an instance of ScopeValidation.\n     * @param {any} props @inheritDoc\n     * @memberof ScopeValidation\n     */\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    /**\n     * @inheritDoc\n     * @memberof ScopeValidation\n     */\n    componentDidMount() {\n        const { resourcePath, resourceMethod } = this.props;\n        const hasScope = AuthManager.hasScopes(resourcePath, resourceMethod);\n        if (hasScope) {\n            hasScope.then((haveScope) => {\n                this.setState({ haveScope });\n            });\n        }\n    }\n\n    /**\n     * @inheritDoc\n     * @returns {React.Component} Return react component\n     * @memberof ScopeValidation\n     */\n    render() {\n        const { children } = this.props;\n        if (this.state.haveScope) {\n            return children || null;\n        }\n        return null;\n    }\n}\n\nScopeValidation.propTypes = {\n    children: PropTypes.node.isRequired,\n    resourcePath: PropTypes.string.isRequired,\n    resourceMethod: PropTypes.string.isRequired,\n};\n\nexport {\n    ScopeValidation,\n    resourceMethods,\n    resourcePaths,\n};\n","/**\n * Copyright (c) 2018, WSO2 Inc. (http://wso2.com) All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\"use strict\";\nimport APIClientFactory from \"./APIClientFactory\";\nimport Resource from \"./Resource\";\nimport Utils from \"./Utils\";\n\n/***\n * Class to expose Subscription {Resource} related operations\n */\n\nexport default class Subscription extends Resource {\n\n    constructor() {\n        super();\n        this.client = new APIClientFactory().getAPIClient(Utils.getEnvironment().label).client;\n    }\n\n    /**\n     * Get all Subscriptions\n     * @param apiId id of the API\n     * @param applicationId id of the application \n     * @param limit subscription count to return\n     * @returns {promise} With all subscription for given applicationId or apiId.\n     */\n    getSubscriptions(apiId, applicationId, limit = 25) {\n        var promise_get = this.client.then((client) => {\n            return client.apis[\"Subscriptions\"].get_subscriptions(\n                { apiId: apiId, applicationId: applicationId, limit });\n        }\n        );\n        return promise_get;\n    }\n\n    /**\n     * Get a single subscription\n     * @param subscriptionUUID subscription UUID\n     */\n    getSubscription(subscriptionUUID) {\n        var promised_subscription = this.client.then((client) => {\n            return client.apis[\"Subscriptions\"].get_subscriptions__subscriptionId_(\n                { subscriptionId: subscriptionUUID });\n        }\n        );\n        return promised_subscription;\n    }\n\n    /**\n    * Get pending invoice if available * @param {*} subscriptionUUID\n    */\n    getMonetizationInvoice(subscriptionUUID) {\n        const promiseInvoice = this.client.then(client => {\n            return client.apis['API Monetization'].get_subscriptions__subscriptionId__usage( \n                {\n                    subscriptionId: subscriptionUUID \n                }\n            );\n        });\n        return promiseInvoice;\n    }\n\n    /**\n    * Delete subscription\n    * @param subscriptionId id of the subscription\n    * @returns {promise} With 200 OK.\n    */\n    deleteSubscription(subscriptionId) {\n        const promised_delete_subscription = this.client.then((client) => {\n            return client.apis[\"Subscriptions\"].delete_subscriptions__subscriptionId_(\n                {\n                    subscriptionId: subscriptionId,\n                }\n            );\n        });\n        return promised_delete_subscription;\n    }\n}\n\n","/*\n * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n *\n * WSO2 Inc. licenses this file to you under the Apache License,\n * Version 2.0 (the \"License\"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Grid from '@material-ui/core/Grid';\nimport TextField from '@material-ui/core/TextField';\nimport { FormattedMessage, injectIntl } from 'react-intl';\n\nconst styles = theme => ({\n    textField: {\n        marginTop: 0,\n    },\n});\n\n/**\n * Provide Consumer Key and Secret of existing Auth apps\n *\n * @param props\n * @returns {*}\n * @constructor\n */\nfunction ProvideOAuthKeys(props) {\n    const {\n        classes, consumerKey, consumerSecret, intl, onChange, isUserOwner,\n    } = props;\n\n    /**\n     * Handle onChange of provided consumer key and secret\n     *\n     * @param event\n     */\n    function handleChange(event) {\n        if (onChange) {\n            onChange(event);\n        }\n    }\n\n    return (\n        <div>\n            <Grid container spacing={3} direction='column'>\n                <Grid item xs={6}>\n                    <TextField\n                        id='provided-consumer-key'\n                        name='providedConsumerKey'\n                        className={classes.textField}\n                        label={intl.formatMessage({\n                            defaultMessage: 'Consumer Key',\n                            id: 'Shared.AppsAndKeys.ProvideOAuthKeys.consumer.key',\n                        })}\n                        value={consumerKey}\n                        onChange={e => handleChange(e)}\n                        margin='normal'\n                        fullWidth\n                        disabled={!isUserOwner}\n                        variant='outlined'\n                    />\n                    <FormControl>\n                        <FormHelperText id='consumer-key-helper-text'>\n                            <FormattedMessage\n                                id='Shared.AppsAndKeys.ProvideOAuthKeys.consumer.key.title'\n                                defaultMessage='Consumer Key of the OAuth application'\n                            />\n                        </FormHelperText>\n                    </FormControl>\n                </Grid>\n                <Grid item xs={6}>\n                    <TextField\n                        id='provided-consumer-secret'\n                        name='providedConsumerSecret'\n                        label={intl.formatMessage({\n                            defaultMessage: 'Consumer Secret',\n                            id: 'Shared.AppsAndKeys.ProvideOAuthKeys.consumer.secret',\n                        })}\n                        className={classes.textField}\n                        value={consumerSecret}\n                        onChange={e => handleChange(e)}\n                        margin='normal'\n                        fullWidth\n                        disabled={!isUserOwner}\n                        variant='outlined'\n                    />\n                    <FormControl>\n                        <FormHelperText id='consumer-secret-helper-text'>\n                            <FormattedMessage\n                                id='Shared.AppsAndKeys.ProvideOAuthKeys.consumer.secret.of.application'\n                                defaultMessage='Consumer Secret of the OAuth application'\n                            />\n                        </FormHelperText>\n                    </FormControl>\n                </Grid>\n            </Grid>\n        </div>\n    );\n}\n\nProvideOAuthKeys.propTypes = {\n    classes: PropTypes.shape({}).isRequired,\n    intl: PropTypes.shape({}).isRequired,\n    onChange: PropTypes.func.isRequired,\n    consumerKey: PropTypes.string,\n    consumerSecret: PropTypes.string,\n    isUserOwner: PropTypes.string,\n};\n\nProvideOAuthKeys.defaultProps = {\n    consumerKey: '',\n    consumerSecret: '',\n    isUserOwner: false,\n};\n\nexport default injectIntl(withStyles(styles)(ProvideOAuthKeys));\n","/*\n * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n *\n * WSO2 Inc. licenses this file to you under the Apache License,\n * Version 2.0 (the \"License\"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport FileCopy from '@material-ui/icons/FileCopy';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport Settings from 'AppComponents/Shared/SettingsContext';\n\nconst useStyles = makeStyles(theme => ({\n    code: {\n        padding: theme.spacing(1),\n        marginBottom: theme.spacing(2),\n        background: theme.palette.grey[200],\n        color: '#da2316',\n        flex: 1,\n    },\n    command: {\n        color: '#2b62b0',\n    },\n    encodeVisible: {\n        cursor: 'pointer',\n        textDecoration: 'underline',\n    },\n    contentWrapper: {\n        display: 'flex',\n    },\n}));\n\n/**\n *\n * @param {*} props\n */\nfunction ViewCurl(props) {\n    const classes = useStyles();\n\n    const {\n        keys: { consumerKey, consumerSecret },\n        intl,\n    } = props;\n    const bas64Encoded = window.btoa(consumerKey + ':' + consumerSecret);\n    const { settings: { apiGatewayEndpoint } } = useContext(Settings);\n    const [showReal, setShowReal] = useState(false);\n    const [tokenCopied, setTokenCopied] = useState(false);\n    const onCopy = () => {\n        setTokenCopied(true);\n        const caller = function () {\n            setTokenCopied(false);\n        };\n        setTimeout(caller, 4000);\n    };\n\n    const applyReal = () => {\n        setShowReal(!showReal);\n    };\n\n    const gatewayUrl = apiGatewayEndpoint ? apiGatewayEndpoint.split(',')[0] : 'https://localhost:8243';\n    const tokenURL = `${gatewayUrl}/token`;\n\n    return (\n        <React.Fragment>\n            <Typography>\n                <FormattedMessage\n                    id='Shared.AppsAndKeys.ViewCurl.help'\n                    defaultMessage='The following cURL command shows how to generate an access token using\n                            the Password Grant type.'\n                />\n            </Typography>\n\n            <div className={classes.contentWrapper}>\n                <div className={classes.code}>\n                    <div>\n                        <span className={classes.command}>curl -k -X POST </span> {tokenURL}\n                        <span className={classes.command}> -d </span>{' '}\n                        {'\"grant_type=password&username=Username&password=Password\"'}\n                    </div>\n                    <div>\n                        <span className={classes.command}> -H </span>\n                        {'\"Authorization: Basic'}\n                        <a onClick={applyReal} className={classes.encodeVisible}>\n                            {showReal ? ' ' + bas64Encoded : ' Base64(consumer-key:consumer-secret)'}\n                        </a>\n                        {'\"'}\n                    </div>\n                </div>\n                <div>\n                    <Tooltip\n                        title={\n                            tokenCopied\n                                ? intl.formatMessage({\n                                    defaultMessage: 'Copied',\n                                    id: 'Shared.AppsAndKeys.ViewCurl.copied',\n                                })\n                                : intl.formatMessage({\n                                    defaultMessage: 'Copy to clipboard',\n                                    id: 'Shared.AppsAndKeys.ViewCurl.copy.to.clipboard',\n                                })\n                        }\n                        placement='right'\n                    >\n                        <CopyToClipboard\n                            text={`curl -k -X POST ${tokenURL} -d ` +\n                            '\"grant_type=password&username=Username&password=Password\" -H ' +\n                            `\"Authorization: Basic ${bas64Encoded}\"`}\n                            onCopy={onCopy}\n                        >\n                            <FileCopy color='secondary' />\n                        </CopyToClipboard>\n                    </Tooltip>\n                </div>\n            </div>\n            <Typography>\n                <FormattedMessage\n                    id='Shared.AppsAndKeys.ViewCurl.help.in.a.similar'\n                    defaultMessage={`In a similar manner, you can generate an access token using the\n                    Client Credentials grant type with the following cURL command.`}\n                />\n            </Typography>\n            <div className={classes.contentWrapper}>\n                <div className={classes.code}>\n                    <div>\n                        <span className={classes.command}>curl -k -X POST </span> {tokenURL}\n                        <span className={classes.command}> -d </span>{' '}\n                        {'\"grant_type=client_credentials\"'}\n                    </div>\n                    <div>\n                        <span className={classes.command}> -H </span>\n                        {'\"Authorization: Basic'}\n                        <a onClick={applyReal} className={classes.encodeVisible}>\n                            {showReal ? ' ' + bas64Encoded : ' Base64(consumer-key:consumer-secret)'}\n                        </a>\n                        {'\"'}\n                    </div>\n                </div>\n                <div>\n                    <Tooltip title={tokenCopied ? 'Copied' : 'Copy to clipboard'} placement='right'>\n                        <CopyToClipboard\n                            text={`curl -k -X POST ${tokenURL} -d ` +\n                            '\"grant_type=client_credentials\" -H' +\n                            `\"Authorization: Basic ${bas64Encoded}\"`}\n                            onCopy={onCopy}\n                        >\n                            <FileCopy color='secondary' />\n                        </CopyToClipboard>\n                    </Tooltip>\n                </div>\n            </div>\n        </React.Fragment>\n    );\n}\n\nViewCurl.propTypes = {\n    classes: PropTypes.shape({}).isRequired,\n    keys: PropTypes.shape({}).isRequired,\n    apis: PropTypes.shape({}).isRequired,\n};\n\nexport default injectIntl(ViewCurl);\n","/*\n * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n *\n * WSO2 Inc. licenses this file to you under the Apache License,\n * Version 2.0 (the \"License\"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport FormControl from '@material-ui/core/FormControl';\nimport Icon from '@material-ui/core/Icon';\nimport Grid from '@material-ui/core/Grid';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport ResourceNotFound from '../../Base/Errors/ResourceNotFound';\nimport Loading from '../../Base/Loading/Loading';\nimport Application from '../../../data/Application';\nimport Tokens from './Tokens';\nimport ViewToken from './ViewToken';\nimport ViewSecret from './ViewSecret';\nimport ViewCurl from './ViewCurl';\n\nconst styles = (theme) => ({\n    button: {\n        margin: theme.spacing(3),\n        color: theme.palette.getContrastText(theme.palette.background.default),\n        display: 'flex',\n        alignItems: 'center',\n        fontSize: '11px',\n        cursor: 'pointer',\n        '& span': {\n            paddingLeft: 6,\n            display: 'inline-block',\n        },\n    },\n    inputWrapper: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n    },\n    copyWrapper: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n    },\n    gridWrapper: {\n        paddingTop: theme.spacing(2),\n    },\n    iconStyle: {\n        cursor: 'grab',\n    },\n    tokenSection: {\n        marginTop: theme.spacing(2),\n        marginBottom: theme.spacing(0.5),\n    },\n    margin: {\n        marginRight: theme.spacing(2),\n    },\n});\n\n/**\n * Class used to displays in key generation UI\n */\nclass ViewKeys extends React.Component {\n    /**\n     * @param {*} props properties\n     */\n    constructor(props) {\n        super(props);\n        const { selectedApp } = this.props;\n        let appId;\n        if (selectedApp) {\n            appId = selectedApp.appId || selectedApp.value;\n        }\n        this.applicationPromise = Application.get(appId);\n        this.state = {\n            showCS: false,\n            open: false,\n            showToken: false,\n            showCurl: false,\n            showSecretGen: false,\n            accessTokenRequest: {\n                timeout: 3600,\n                scopesSelected: [],\n                keyType: '',\n            },\n            subscriptionScopes: [],\n            isUpdating: false,\n        };\n    }\n\n    /**\n     * Fetch Application object by ID coming from URL path params and fetch related keys to display\n     */\n    componentDidMount() {\n        const { accessTokenRequest } = this.state;\n        const { keyType } = this.props;\n        this.applicationPromise\n            .then((application) => {\n                application.getKeys().then(() => {\n                    const newRequest = { ...accessTokenRequest, keyType };\n                    const subscriptionScopes = application.subscriptionScopes\n                        .map((scope) => { return scope.key; });\n                    this.setState({ accessTokenRequest: newRequest, subscriptionScopes });\n                });\n            })\n            .catch((error) => {\n                if (process.env.NODE_ENV !== 'production') {\n                    console.error(error);\n                }\n                const { status } = error;\n                if (status === 404) {\n                    this.setState({ notFound: true });\n                }\n            });\n    }\n\n    /**\n     * Adding this here becasue it is not possible to add in the render method becasue isKeyJWT in state is used\n     * to close the dialog box and render method will casue this to be always true and cannot close the box.\n     * Rule is ignored becasue according to react docs its ok to setstate as long as we are checking a condition\n     * This is an ani pattern to be fixed later.\n     *  wso2/product-apim#5293\n     * https://reactjs.org/docs/react-component.html#componentdidupdate\n     * @param {*} prevProps previous props\n     * @memberof ViewKeys\n     */\n    componentDidUpdate(prevProps) {\n        const { isKeyJWT } = this.props;\n        if (isKeyJWT && !prevProps.isKeyJWT) {\n            // eslint-disable-next-line react/no-did-update-set-state\n            this.setState({ isKeyJWT: true });\n        }\n    }\n\n    /**\n     * Set accesstoken request in state\n     * @param {*} accessTokenRequest access token request object\n     * @memberof ViewKeys\n     */\n    updateAccessTokenRequest = (accessTokenRequest) => {\n        this.setState({ accessTokenRequest });\n    }\n\n    /**\n     * Handle onClick of the copy icon\n     * @param {*} name name of what is copied\n     * */\n    onCopy = (name) => {\n        this.setState({\n            [name]: true,\n        });\n        const that = this;\n        const elementName = name;\n        const caller = () => {\n            that.setState({\n                [elementName]: false,\n            });\n        };\n        setTimeout(caller, 4000);\n    };\n\n    /**\n     * Handle onClick of the show consumer secret icon\n     * @param data\n     * */\n    handleShowHidden = (data) => {\n        this.setState({ [data]: !this.state[data] });\n    };\n\n    /**\n     * Avoid conflict with `onClick`\n     * @param event\n     */\n    handleMouseDownGeneric = (event) => {\n        event.preventDefault();\n    };\n\n    /**\n     * Handle onCLick of generate access token\n     * */\n    handleClickOpen = () => {\n        this.setState({ open: true, showToken: false });\n    };\n\n    /**\n     * Handle onCLick of regenerate consumer secret\n     * */\n    handleSecretRegenerate = (consumerKey, keyType) => {\n        this.applicationPromise\n            .then((application) => application.regenerateSecret(consumerKey, keyType))\n            .then((response) => {\n                console.log('consumer secret regenerated successfully ' + response);\n                this.setState({\n                    open: true,\n                    showSecretGen: true,\n                    secretGenResponse: response,\n                });\n            })\n            .catch((error) => {\n                if (process.env.NODE_ENV !== 'production') {\n                    console.error(error);\n                }\n                const { status } = error;\n                if (status === 404) {\n                    this.setState({ notFound: true });\n                }\n            });\n    };\n\n    /**\n     * Handle onClick of get curl\n     * */\n    handleClickOpenCurl = () => {\n        this.setState({ open: true, showCurl: true });\n    };\n\n    /**\n     * Handle on close of dialog for generating access token and get curl\n     * */\n    handleClose = () => {\n        this.setState({\n            open: false, showCurl: false, isKeyJWT: false, showSecretGen: false,\n        });\n    };\n\n    /**\n     * Generate access token\n     * */\n    generateAccessToken = () => {\n        const { accessTokenRequest, isUpdating } = this.state;\n        this.setState({ isUpdating: true });\n        this.applicationPromise\n            .then((application) => application.generateToken(\n                accessTokenRequest.keyType,\n                accessTokenRequest.timeout,\n                accessTokenRequest.scopesSelected,\n            ))\n            .then((response) => {\n                console.log('token generated successfully ' + response);\n                this.setState({\n                    showToken: true,\n                    tokenResponse: response,\n                    token: response.accessToken,\n                    tokenScopes: response.tokenScopes,\n                    tokenValidityTime: response.validityTime,\n                });\n                this.setState({ isUpdating: false });\n            })\n            .catch((error) => {\n                if (process.env.NODE_ENV !== 'production') {\n                    console.error(error);\n                }\n                const { status } = error;\n                if (status === 404) {\n                    this.setState({ notFound: true });\n                }\n                this.setState({ isUpdating: false });\n            });\n    };\n\n    viewKeyAndSecret = (consumerKey, consumerSecret) => {\n        const { classes, intl, selectedApp: { hashEnabled }, keyType } = this.props;\n        const { keyCopied, secretCopied, showCS } = this.state;\n        return (\n            <>\n                <Grid item xs={6}>\n                    <div className={classes.copyWrapper}>\n                        <TextField\n                            id='consumer-key'\n                            value={consumerKey}\n                            margin='normal'\n                            label={(\n                                <FormattedMessage\n                                    id='Shared.AppsAndKeys.ViewKeys.consumer.key'\n                                    defaultMessage='Consumer Key'\n                                />\n                            )}\n                            fullWidth\n                            variant='outlined'\n                            InputProps={{\n                                readOnly: true,\n                                endAdornment: (\n                                    <InputAdornment position='end'>\n                                        <Tooltip\n                                            title={\n                                                keyCopied\n                                                    ? intl.formatMessage({\n                                                        defaultMessage: 'Copied',\n                                                        id: 'Shared.AppsAndKeys.ViewKeys.copied',\n                                                    })\n                                                    : intl.formatMessage({\n                                                        defaultMessage: 'Copy to clipboard',\n                                                        id: 'Shared.AppsAndKeys.ViewKeys.copy.to',\n                                                    })\n                                            }\n                                            placement='right'\n                                            className={classes.iconStyle}\n                                        >\n                                            <CopyToClipboard\n                                                text={consumerKey}\n                                                onCopy={() => this.onCopy('keyCopied')}\n                                            >\n                                                <Icon\n                                                    color='secondary'\n                                                >\n                                                    description\n                                                        </Icon>\n                                            </CopyToClipboard>\n                                        </Tooltip>\n                                    </InputAdornment>\n                                ),\n                            }}\n                        />\n                    </div>\n                    <FormControl>\n                        <FormHelperText id='consumer-key-helper-text'>\n                            <FormattedMessage\n                                id='Shared.AppsAndKeys.ViewKeys.consumer.key.title'\n                                defaultMessage='Consumer Key of the application'\n                            />\n                        </FormHelperText>\n                    </FormControl>\n                </Grid>\n                <Grid item xs={6}>\n                    <div className={classes.copyWrapper}>\n                        {!hashEnabled ? (\n                            <TextField\n                                id='consumer-secret'\n                                label={(\n                                    <FormattedMessage\n                                        id='Shared.AppsAndKeys.ViewKeys.consumer.secret'\n                                        defaultMessage='Consumer Secret'\n                                    />\n                                )}\n                                type={showCS || !consumerSecret ? 'text' : 'password'}\n                                value={consumerSecret}\n                                margin='normal'\n                                fullWidth\n                                variant='outlined'\n                                InputProps={{\n                                    readOnly: true,\n                                    endAdornment: (\n                                        <InputAdornment position='end'>\n                                            <IconButton\n                                                classes=''\n                                                onClick={() => this.handleShowHidden('showCS')}\n                                                onMouseDown={this.handleMouseDownGeneric}\n                                            >\n                                                {showCS ? <Icon>visibility_off</Icon> : <Icon>visibility</Icon>}\n                                            </IconButton>\n                                            <Tooltip\n                                                title={secretCopied ? 'Copied' : 'Copy to clipboard'}\n                                                placement='right'\n                                                className={classes.iconStyle}\n                                            >\n                                                <CopyToClipboard\n                                                    text={consumerSecret}\n                                                    onCopy={() => this.onCopy('secretCopied')}\n                                                >\n                                                    <Icon color='secondary'>description</Icon>\n                                                </CopyToClipboard>\n                                            </Tooltip>\n                                        </InputAdornment>\n                                    ),\n                                }}\n                            />\n                        ) : (\n                                <Button\n                                    variant='contained'\n                                    color='primary'\n                                    className={classes.button}\n                                    onClick={() => this.handleSecretRegenerate(consumerKey, keyType)}\n                                    disabled={!isUserOwner}\n                                >\n                                    <FormattedMessage\n                                        defaultMessage='Regenerate Consumer Secret'\n                                        id='Shared.AppsAndKeys.ViewKeys.consumer.secret.button.regenerate'\n                                    />\n                                </Button>\n                            )}\n                    </div>\n                    {!hashEnabled && (\n                        <FormControl>\n                            <FormHelperText id='consumer-secret-helper-text'>\n                                <FormattedMessage\n                                    id='Shared.AppsAndKeys.ViewKeys.consumer.secret.of.application'\n                                    defaultMessage='Consumer Secret of the application'\n                                />\n                            </FormHelperText>\n                        </FormControl>\n                    )}\n                </Grid>\n            </>\n        );\n    }\n\n    /**\n     * @inheritdoc\n     */\n    render() {\n        const {\n            notFound, showToken, showCurl, showSecretGen, tokenCopied, open,\n            token, tokenScopes, tokenValidityTime, accessTokenRequest, subscriptionScopes,\n            isKeyJWT, tokenResponse, secretGenResponse, isUpdating,\n        } = this.state;\n        const {\n            intl, keyType, classes, fullScreen, keys, selectedApp: { tokenType, hashEnabled }, selectedGrantTypes, isUserOwner, summary,\n        } = this.props;\n\n        if (notFound) {\n            return <ResourceNotFound />;\n        }\n        if (!keys) {\n            return <Loading />;\n        }\n\n        const csCkKeys = keys.get(keyType);\n        const consumerKey = csCkKeys && csCkKeys.consumerKey;\n        const consumerSecret = csCkKeys && csCkKeys.consumerSecret;\n        let accessToken;\n        let accessTokenScopes;\n        let validityPeriod;\n        let tokenDetails;\n\n        if (token) {\n            accessToken = token;\n            accessTokenScopes = tokenScopes;\n            validityPeriod = tokenValidityTime;\n        } else if (keys.get(keyType) && keys.get(keyType).token) {\n            ({ accessToken } = keys.get(keyType).token);\n            accessTokenScopes = keys.get(keyType).token.tokenScopes;\n            validityPeriod = keys.get(keyType).token.validityTime;\n            tokenDetails = keys.get(keyType).token;\n        }\n\n        let dialogHead = 'Undefined';\n        if (showCurl) {\n            dialogHead = 'Get CURL to Generate Access Token';\n        } else if (showSecretGen) {\n            dialogHead = 'Generate Consumer Secret';\n        } else {\n            dialogHead = 'Generate Access Token';\n        }\n        if (!consumerKey) {\n            return (\n                <Typography variant='caption' gutterBottom>\n                    {keyType === 'PRODUCTION' ? 'Production ' : 'Sandbox '}\n                    <FormattedMessage\n                        id='Shared.AppsAndKeys.ViewKeys.key.secret.title'\n                        defaultMessage='Key and Secret is not generated for this application'\n                    />\n                </Typography>\n            );\n        }\n        if (summary) {\n            return (\n                <Grid container spacing={3} className={classes.gridWrapper}>\n                    {this.viewKeyAndSecret(consumerKey, consumerSecret)}\n                </Grid>\n            );\n        }\n        return consumerKey && (\n            <div className={classes.inputWrapper}>\n                <Grid container spacing={3} className={classes.gridWrapper}>\n                    {this.viewKeyAndSecret(consumerKey, consumerSecret)}\n                    {(accessToken && tokenType !== 'JWT' && !hashEnabled) && (\n                        <Grid item xs={6}>\n                            <InputLabel htmlFor='adornment-amount'>\n                                <FormattedMessage\n                                    id='Shared.AppsAndKeys.ViewKeys.access.token'\n                                    defaultMessage='Access Token'\n                                />\n                            </InputLabel>\n                            <div className={classes.copyWrapper}>\n                                <TextField\n                                    id='access-token'\n                                    value={accessToken}\n                                    margin='normal'\n                                    variant='outlined'\n                                    fullWidth\n                                    InputProps={{\n                                        readOnly: true,\n                                        endAdornment: (\n                                            <InputAdornment position='end'>\n                                                <Tooltip\n                                                    title={tokenCopied ? 'Copied' : 'Copy to clipboard'}\n                                                    placement='right'\n                                                >\n                                                    <CopyToClipboard\n                                                        text={accessToken}\n                                                        onCopy={() => this.onCopy('tokenCopied')}\n                                                    >\n                                                        <Icon color='secondary'>description</Icon>\n                                                    </CopyToClipboard>\n                                                </Tooltip>\n                                            </InputAdornment>\n                                        ),\n                                    }}\n                                />\n                            </div>\n                            <FormControl>\n                                <FormHelperText id='access-token-helper-text'>\n                                    {`Above token has a validity period of ${validityPeriod} seconds.\n                                            And the token has (${accessTokenScopes.join(', ')}) scopes.`}\n                                </FormHelperText>\n                            </FormControl>\n                        </Grid>\n                    )}\n                    <Grid item xs={12}>\n                        <Dialog\n                            fullScreen={fullScreen}\n                            open={(open || isKeyJWT) && selectedGrantTypes.includes('client_credentials')}\n                            onClose={this.handleClose}\n                            aria-labelledby='responsive-dialog-title'\n                        >\n                            <DialogTitle id='responsive-dialog-title'>\n                                {dialogHead}\n                            </DialogTitle>\n                            <DialogContent>\n                                {!showCurl && !isKeyJWT && !showSecretGen && (\n                                    <DialogContentText>\n                                        {!showToken && (\n                                            <Tokens\n                                                updateAccessTokenRequest={this.updateAccessTokenRequest}\n                                                accessTokenRequest={accessTokenRequest}\n                                                subscriptionScopes={subscriptionScopes}\n                                            />\n                                        )}\n                                        {showToken && <ViewToken token={{ ...tokenResponse, isOauth: true }} />}\n                                    </DialogContentText>\n                                )}\n                                {showCurl && (\n                                    <DialogContentText>\n                                        <ViewCurl keys={{ consumerKey, consumerSecret }} />\n                                    </DialogContentText>\n                                )}\n                                {showSecretGen && (\n                                    <DialogContentText>\n                                        <ViewSecret secret={{ ...secretGenResponse }} />\n                                    </DialogContentText>\n                                )}\n                                {(isKeyJWT && tokenDetails && hashEnabled) && (\n                                    <DialogContentText>\n                                        <ViewToken token={{ ...tokenDetails, isOauth: true }} consumerSecret={consumerSecret} />\n                                    </DialogContentText>\n                                )}\n                                {(isKeyJWT && tokenDetails && !hashEnabled) && (\n                                    <DialogContentText>\n                                        <ViewToken token={{ ...tokenDetails, isOauth: true }} />\n                                    </DialogContentText>\n                                )}\n                            </DialogContent>\n                            <DialogActions>\n                                {isUpdating && <CircularProgress size={24} />}\n                                {!showToken && !showCurl && !isKeyJWT && !showSecretGen && (\n                                    <Button onClick={this.generateAccessToken} color='primary' disabled={isUpdating}>\n                                        <FormattedMessage\n                                            id='Shared.AppsAndKeys.ViewKeys.consumer.generate.btn'\n                                            defaultMessage='Generate'\n                                        />\n                                    </Button>\n                                )}\n                                <Button onClick={this.handleClose} color='primary' autoFocus>\n                                    <FormattedMessage\n                                        id='Shared.AppsAndKeys.ViewKeys.consumer.close.btn'\n                                        defaultMessage='Close'\n                                    />\n                                </Button>\n                            </DialogActions>\n                        </Dialog>\n                        {!hashEnabled && (\n                            <div className={classes.tokenSection}>\n                                <Button\n                                    variant='outlined'\n                                    size='small'\n                                    color='primary'\n                                    className={classes.margin}\n                                    onClick={this.handleClickOpen}\n                                    disabled={!selectedGrantTypes.includes('client_credentials')}\n                                >\n                                    <FormattedMessage\n                                        id='Shared.AppsAndKeys.ViewKeys.generate.access.token'\n                                        defaultMessage='Generate Access Token'\n                                    />\n                                </Button>\n                                <Button\n                                    variant='outlined'\n                                    size='small'\n                                    color='primary'\n                                    className={classes.margin}\n                                    onClick={this.handleClickOpenCurl}\n                                >\n                                    <FormattedMessage\n                                        id='Shared.AppsAndKeys.ViewKeys.curl.to.generate'\n                                        defaultMessage='CURL to Generate Access Token'\n                                    />\n                                </Button>\n                            </div>\n                        )}\n                        {!selectedGrantTypes.includes('client_credentials') && !hashEnabled && (\n                            <Typography variant='caption' gutterBottom>\n                                <FormattedMessage\n                                    id='Shared.AppsAndKeys.ViewKeys.client.enable.client.credentials'\n                                    defaultMessage={'Enable Client Credentials grant '\n                                        + 'type to generate test access tokens'}\n                                />\n                            </Typography>\n                        )}\n                    </Grid>\n                </Grid>\n            </div>\n        )\n    }\n}\nViewKeys.defaultProps = {\n    fullScreen: false,\n    summary: false,\n};\nViewKeys.propTypes = {\n    classes: PropTypes.shape({}).isRequired,\n    fullScreen: PropTypes.bool,\n    isKeyJWT: PropTypes.bool.isRequired,\n    isUserOwner: PropTypes.bool.isRequired,\n    summary: PropTypes.bool,\n};\n\nexport default injectIntl(withStyles(styles)(ViewKeys));\n","import React from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { injectIntl } from 'react-intl';\n\nconst styles = theme => ({\n    root: {\n        padding: theme.spacing(3),\n    },\n});\n\nconst waitingForApproval = (props) => {\n    const {\n        classes, keyState, states, intl,\n    } = props;\n    let message = intl.formatMessage({\n        defaultMessage: 'A request to register this application has been sent and is pending approval.',\n        id: 'Shared.AppsAndKeys.WaitingForApproval.msg.ok',\n    });\n    if (keyState === states.REJECTED) {\n        message = intl.formatMessage({\n            defaultMessage: 'This application has been rejected from generating keys',\n            id: 'Shared.AppsAndKeys.WaitingForApproval.msg.reject',\n        });\n    }\n    return <div className={classes.root}>{message}</div>;\n};\n\nexport default injectIntl(withStyles(styles)(waitingForApproval));\n","/* eslint-disable react/prop-types */\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport { app } from 'Settings';\nimport WaitingForApproval from './WaitingForApproval';\nimport ViewKeys from './ViewKeys';\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        padding: theme.spacing(3, 2),\n    },\n    noKeysRoot: {\n        backgroundImage: `url(${app.context + theme.custom.overviewPage.keysBackground})`,\n        height: '100%',\n        backgroundPosition: 'center',\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: 'cover',\n        minHeight: 192,\n        display: 'flex',\n        alignItems: 'center',\n    },\n}));\n\n/**\n * Render a compressed view of the key gneration view.\n * @param {JSON} props Input params.\n * @returns {JSX} Rendered output.\n */\nexport default function TokenManagerSummary(props) {\n    const classes = useStyles();\n    const { keys, keyStates, key, selectedApp, keyType, isKeyJWT, isUserOwner } = props;\n    if (keys.size > 0 && key && key.keyState === 'APPROVED' && !key.consumerKey) {\n        return (\n            <div className={classes.emptyBox}>\n                <Typography variant=\"h5\" component=\"h3\">\n                    Error\n                </Typography>\n                <Typography variant='body2'>\n                    <FormattedMessage\n                        id='Shared.AppsAndKeys.TokenManagerSummary'\n                        defaultMessage='Error! You have partially-created keys. Use `Clean Up` option.'\n                    />\n                </Typography>\n            </div>\n        );\n    }\n    if (key && (key.keyState === keyStates.CREATED || key.keyState === keyStates.REJECTED)) {\n        return (\n            <div className={classes.emptyBox}>\n                <Typography variant='body2'>\n                    <WaitingForApproval keyState={key.keyState} states={keyStates} />\n                </Typography>\n            </div>\n        );\n    }\n    const keyGrantTypes = key ? key.supportedGrantTypes : [];\n\n    return (\n        <ViewKeys\n            selectedApp={selectedApp}\n            keyType={keyType}\n            keys={keys}\n            isKeyJWT={isKeyJWT}\n            selectedGrantTypes={keyGrantTypes}\n            isUserOwner={isUserOwner}\n            summary\n        />\n    );\n}\n","/*\n * Copyright (c) 2019, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n *\n * WSO2 Inc. licenses this file to you under the Apache License,\n * Version 2.0 (the \"License\"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport Icon from '@material-ui/core/Icon';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport Loading from 'AppComponents/Base/Loading/Loading';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport Alert from 'AppComponents/Shared/Alert';\nimport ProvideOAuthKeys from 'AppComponents/Shared/AppsAndKeys/ProvideOAuthKeys';\nimport Application from 'AppData/Application';\nimport AuthManager from 'AppData/AuthManager';\nimport Settings from 'AppComponents/Shared/SettingsContext';\nimport API from 'AppData/api';\nimport KeyConfiguration from './KeyConfiguration';\nimport ViewKeys from './ViewKeys';\nimport WaitingForApproval from './WaitingForApproval';\nimport { ScopeValidation, resourceMethods, resourcePaths } from '../ScopeValidation';\nimport TokenMangerSummary from './TokenManagerSummary';\nimport Progress from '../Progress';\n\nconst styles = (theme) => ({\n    root: {\n        padding: theme.spacing(3),\n    },\n    button: {\n        marginLeft: 0,\n    },\n    cleanUpButton: {\n        marginLeft: 15,\n    },\n    cleanUpInfoText: {\n        padding: '10px 0px 10px 15px',\n    },\n    tokenSection: {\n        marginTop: theme.spacing(2),\n        marginBottom: theme.spacing(2),\n    },\n    margin: {\n        marginRight: theme.spacing(2),\n    },\n    keyConfigWrapper: {\n        flexDirection: 'column',\n        marginBottom: 0,\n    },\n    generateWrapper: {\n        padding: '10px 0px',\n        marginLeft: theme.spacing(1.25),\n    },\n    paper: {\n        background: 'none',\n        marginBottom: theme.spacing(2),\n        marginTop: theme.spacing(2),\n    },\n});\n\n/**\n *  @param {event} event event\n *  @param {String} value description\n */\nclass TokenManager extends React.Component {\n    static contextType = Settings;\n\n    /**\n     *\n     * @param {*} props props\n     */\n    constructor(props) {\n        super(props);\n        const { selectedApp, keyType } = this.props;\n        this.state = {\n            isLoading: false,\n            keys: null,\n            isKeyJWT: false,\n            keyRequest: {\n                keyType,\n                serverSupportedGrantTypes: [],\n                supportedGrantTypes: [],\n                callbackUrl: '',\n                validityTime: 3600,\n            },\n            providedConsumerKey: '',\n            providedConsumerSecret: '',\n            generateEnabled: true,\n        };\n        this.keyStates = {\n            COMPLETED: 'COMPLETED',\n            APPROVED: 'APPROVED',\n            CREATED: 'CREATED',\n            REJECTED: 'REJECTED',\n        };\n        if (selectedApp) {\n            this.appId = selectedApp.appId || selectedApp.value;\n            this.application = Application.get(this.appId);\n        }\n        this.updateKeyRequest = this.updateKeyRequest.bind(this);\n        this.generateKeys = this.generateKeys.bind(this);\n        this.updateKeys = this.updateKeys.bind(this);\n        this.cleanUpKeys = this.cleanUpKeys.bind(this);\n        this.handleOnChangeProvidedOAuth = this.handleOnChangeProvidedOAuth.bind(this);\n        this.provideOAuthKeySecret = this.provideOAuthKeySecret.bind(this);\n    }\n\n    /**\n     *\n     *\n     * @memberof TokenManager\n     */\n    componentDidMount() {\n        this.loadApplication();\n    }\n\n    setGenerateEnabled = (state) => {\n        this.setState({ generateEnabled: state });\n    }\n\n    /**\n     * get supported grant types from the settings api\n     */\n    getserverSupportedGrantTypes = () => {\n        const api = new API();\n        const promisedSettings = api.getSettings();\n        promisedSettings\n            .then((response) => {\n                const { keyRequest } = this.state;\n                const newKeyRequest = { ...keyRequest };\n                newKeyRequest.serverSupportedGrantTypes = response.obj.grantTypes;\n                newKeyRequest.supportedGrantTypes = response.obj.grantTypes.filter((item) => item !== 'authorization_code'\n                    && item !== 'implicit');\n                this.setState({ keyRequest: newKeyRequest });\n            })\n            .catch((error) => {\n                if (process.env.NODE_ENV !== 'production') {\n                    console.log(error);\n                }\n                const { status } = error;\n                if (status === 404) {\n                    this.setState({ notFound: true });\n                }\n            });\n    };\n\n    /**\n     * load application key generation ui\n     */\n    loadApplication = () => {\n        this.getserverSupportedGrantTypes();\n        if (this.appId) {\n            this.application\n                .then((application) => application.getKeys())\n                .then((keys) => {\n                    const { keyType } = this.props;\n                    const { keyRequest } = this.state;\n                    if (keys.size > 0 && keys.get(keyType)) {\n                        const { callbackUrl, supportedGrantTypes } = keys.get(keyType);\n                        const newRequest = {\n                            ...keyRequest, callbackUrl, supportedGrantTypes,\n                        };\n                        this.setState({ keys, keyRequest: newRequest });\n                    } else {\n                        this.setState({ keys });\n                    }\n                })\n                .catch((error) => {\n                    if (process.env.NODE_ENV !== 'production') {\n                        console.error(error);\n                    }\n                    if (error.status === 404) {\n                        this.setState({ notFound: true });\n                    }\n                });\n        }\n    }\n\n    /**\n     * Update keyRequest state\n     * @param {Object} keyRequest parameters requried for key generation request\n     */\n    updateKeyRequest(keyRequest) {\n        this.setState({ keyRequest });\n    }\n\n    /**\n     * Generate keys for application,\n     *\n     * @memberof KeyConfiguration\n     */\n    generateKeys() {\n        const { keyRequest, keys } = this.state;\n        this.setState({ isLoading: true });\n        const {\n            keyType, updateSubscriptionData, selectedApp: { tokenType, hashEnabled }, intl,\n        } = this.props;\n        this.application\n            .then((application) => {\n                return application.generateKeys(\n                    keyType, keyRequest.supportedGrantTypes,\n                    keyRequest.callbackUrl, keyRequest.validityTime,\n                );\n            })\n            .then((response) => {\n                if (updateSubscriptionData) {\n                    updateSubscriptionData();\n                }\n                const newKeys = new Map([...keys]);\n                // in case token hashing is enabled, isKeyJWT is set to true even if the token type is JWT.\n                // This is to mimic the behavior of JWT tokens (by showing the token in a dialog)\n                const isKeyJWT = (tokenType === 'JWT') || hashEnabled;\n                newKeys.set(keyType, response);\n                this.setState({ keys: newKeys, isKeyJWT });\n                Alert.info(intl.formatMessage({\n                    id: 'Shared.AppsAndKeys.TokenManager.key.generate.success',\n                    defaultMessage: 'Application keys generated successfully',\n                }));\n            })\n            .catch((error) => {\n                if (process.env.NODE_ENV !== 'production') {\n                    console.error(error);\n                }\n                const { status } = error;\n                if (status === 404) {\n                    this.setState({ notFound: true });\n                }\n                Alert.error(intl.formatMessage({\n                    id: 'Shared.AppsAndKeys.TokenManager.key.generate.error',\n                    defaultMessage: 'Error occurred when generating application keys',\n                }));\n            }).finally(() => this.setState({ isLoading: false }));\n    }\n\n    /**\n     *\n     * @memberof KeyConfiguration\n     */\n    updateKeys() {\n        this.setState({ isLoading: true });\n        const { keys, keyRequest } = this.state;\n        const { keyType, intl } = this.props;\n        const applicationKey = keys.get(keyType);\n        this.application\n            .then((application) => {\n                return application.updateKeys(\n                    applicationKey.tokenType,\n                    keyType,\n                    keyRequest.supportedGrantTypes,\n                    keyRequest.callbackUrl,\n                    applicationKey.consumerKey,\n                    applicationKey.consumerSecret,\n                );\n            })\n            .then((response) => {\n                this.setState({ keys: response.keys });\n                Alert.info(intl.formatMessage({\n                    id: 'Shared.AppsAndKeys.TokenManager.key.update.success',\n                    defaultMessage: 'Application keys updated successfully',\n                }));\n            })\n            .catch((error) => {\n                if (process.env.NODE_ENV !== 'production') {\n                    console.error(error);\n                }\n                const { status } = error;\n                if (status === 404) {\n                    this.setState({ notFound: true });\n                }\n                Alert.error(intl.formatMessage({\n                    id: 'Shared.AppsAndKeys.TokenManager.key.update.error',\n                    defaultMessage: 'Error occurred when updating application keys',\n                }));\n            }).finally(() => this.setState({ isLoading: false }));\n    }\n\n    /**\n     * Cleanup application keys\n     */\n    cleanUpKeys() {\n        const { keyType, intl } = this.props;\n        this.application\n            .then((application) => {\n                return application.cleanUpKeys(keyType);\n            })\n            .then(() => {\n                this.loadApplication();\n                Alert.info(intl.formatMessage({\n                    id: 'Shared.AppsAndKeys.TokenManager.key.cleanup.success',\n                    defaultMessage: 'Application keys cleaned successfully',\n                }));\n            })\n            .catch((error) => {\n                if (process.env.NODE_ENV !== 'production') {\n                    console.error(error);\n                }\n                const { status } = error;\n                if (status === 404) {\n                    this.setState({ notFound: true });\n                }\n                Alert.error(intl.formatMessage({\n                    id: 'Shared.AppsAndKeys.TokenManager.key.cleanup.error',\n                    defaultMessage: 'Error occurred while cleaning up application keys',\n                }));\n            });\n    }\n\n    /**\n     * Handle on change of provided consumer key and consumer secret\n     *\n     * @param event onChange event\n     */\n    handleOnChangeProvidedOAuth(event) {\n        this.setState({ [event.target.name]: event.target.value });\n    }\n\n    /**\n     * Provide consumer key and secret of an existing OAuth app to an application\n     */\n    provideOAuthKeySecret() {\n        const { providedConsumerKey, providedConsumerSecret } = this.state;\n        const { keyType, intl } = this.props;\n\n        this.application\n            .then((application) => {\n                return application.provideKeys(keyType, providedConsumerKey, providedConsumerSecret);\n            })\n            .then(() => {\n                this.setState({ providedConsumerKey: '', providedConsumerSecret: '' });\n                Alert.info(intl.formatMessage({\n                    id: 'Shared.AppsAndKeys.TokenManager.key.provide.success',\n                    defaultMessage: 'Application keys provided successfully',\n                }));\n            })\n            .catch((error) => {\n                if (process.env.NODE_ENV !== 'production') {\n                    console.error(error);\n                }\n                const { status } = error;\n                if (status === 404) {\n                    this.setState({ notFound: true });\n                }\n                Alert.error(intl.formatMessage({\n                    id: 'Shared.AppsAndKeys.TokenManager.key.provide.error',\n                    defaultMessage: 'Error occurred when providing application keys',\n                }));\n            });\n    }\n\n    /**\n     *  @returns {Component}\n     * @memberof Tokenemanager\n     */\n    render() {\n        const {\n            classes, selectedApp, keyType, summary,\n        } = this.props;\n        const {\n            keys, keyRequest, isLoading, isKeyJWT, providedConsumerKey,\n            providedConsumerSecret, generateEnabled,\n        } = this.state;\n        if (!keys) {\n            return <Loading />;\n        }\n        const username = AuthManager.getUser().name;\n        let isUserOwner = false;\n\n        if (selectedApp.owner && username.toLowerCase() === selectedApp.owner.toLowerCase()) {\n            isUserOwner = true;\n        }\n        const key = keys.get(keyType);\n        if (key && key.token) {\n            keyRequest.validityTime = key.token.validityTime;\n        }\n        if (summary) {\n            if (keys) {\n                return (\n                    <TokenMangerSummary\n                        keys={keys}\n                        key={key}\n                        keyStates={this.keyStates}\n                        selectedApp={selectedApp}\n                        keyType={keyType}\n                        isKeyJWT={isKeyJWT}\n                        isUserOwner={isUserOwner}\n                    />\n                );\n            } else {\n                return (<Progress />);\n            }\n        }\n        if (keys.size > 0 && key && key.keyState === 'APPROVED' && !key.consumerKey) {\n            return (\n                <>\n                    <Typography className={classes.cleanUpInfoText} variant='subtitle1'>\n                        <FormattedMessage\n                            id='Shared.AppsAndKeys.TokenManager.cleanup.text'\n                            defaultMessage='Error! You have partially-created keys.\n                            Please click `Clean Up` button and try again.'\n                        />\n                    </Typography>\n                    <Button\n                        variant='contained'\n                        color='primary'\n                        className={classes.cleanUpButton}\n                        onClick={this.cleanUpKeys}\n                    >\n                        <FormattedMessage\n                            defaultMessage='Clean up'\n                            id='Shared.AppsAndKeys.TokenManager.cleanup'\n                        />\n                    </Button>\n                </>\n            );\n        }\n        if (key && (key.keyState === this.keyStates.CREATED || key.keyState === this.keyStates.REJECTED)) {\n            return <WaitingForApproval keyState={key.keyState} states={this.keyStates} />;\n        }\n        // todo replace use of localStorage with useContext\n        // const settingsData = localStorage.getItem('settings');\n        // const { mapExistingAuthApps } = JSON.parse(settingsData);\n        const keyGrantTypes = key ? key.supportedGrantTypes : [];\n        const settingsContext = this.context;\n        const { mapExistingAuthApps } = settingsContext.settings;\n\n        return (\n            <div className={classes.root}>\n                <Typography variant='h5'>\n                    {keyType === 'PRODUCTION' ? 'Production ' : 'Sandbox '}\n                    <FormattedMessage\n                        defaultMessage='Key and Secret'\n                        id='Shared.AppsAndKeys.TokenManager.key.and.secret'\n                    />\n                </Typography>\n                <ViewKeys\n                    selectedApp={selectedApp}\n                    keyType={keyType}\n                    keys={keys}\n                    isKeyJWT={isKeyJWT}\n                    selectedGrantTypes={keyGrantTypes}\n                    isUserOwner={isUserOwner}\n                />\n                <Paper className={classes.paper}>\n                    <ExpansionPanel defaultExpanded>\n                        <ExpansionPanelSummary expandIcon={<Icon>expand_more</Icon>}>\n                            <Typography className={classes.heading} variant='subtitle1'>\n                                {\n                                    keys.size > 0 && keys.get(keyType)\n                                        ? (\n                                            <FormattedMessage\n                                                defaultMessage='Key Configurations'\n                                                id='Shared.AppsAndKeys.TokenManager.update.configuration'\n                                            />\n                                        )\n                                        : (\n                                            <FormattedMessage\n                                                defaultMessage='Key Configuration'\n                                                id='Shared.AppsAndKeys.TokenManager.key.configuration'\n                                            />\n                                        )\n                                }\n                            </Typography>\n                        </ExpansionPanelSummary>\n                        <ExpansionPanelDetails className={classes.keyConfigWrapper}>\n                            <KeyConfiguration\n                                keys={keys}\n                                selectedApp={selectedApp}\n                                keyType={keyType}\n                                updateKeyRequest={this.updateKeyRequest}\n                                keyRequest={keyRequest}\n                                isUserOwner={isUserOwner}\n                                isKeysAvailable={keys.size > 0 && keys.get(keyType)}\n                                setGenerateEnabled={this.setGenerateEnabled}\n                            />\n                        </ExpansionPanelDetails>\n                    </ExpansionPanel>\n                    <div className={classes.generateWrapper}>\n                        <ScopeValidation\n                            resourcePath={resourcePaths.APPLICATION_GENERATE_KEYS}\n                            resourceMethod={resourceMethods.POST}\n                        >\n                            {!isUserOwner ? (\n                                <>\n                                    <Button\n                                        variant='contained'\n                                        color='primary'\n                                        className={classes.button}\n                                        onClick={\n                                            keys.size > 0 && keys.get(keyType) ? this.updateKeys : this.generateKeys\n                                        }\n                                        disabled={!isUserOwner || isLoading}\n                                    >\n                                        {keys.size > 0 && keys.get(keyType) ? 'Update keys' : 'Generate Keys'}\n                                        {isLoading && <CircularProgress size={20} />}\n                                    </Button>\n                                    <Typography variant='caption'>\n                                        <FormattedMessage\n                                            defaultMessage='Only owner can generate or update keys'\n                                            id='Shared.AppsAndKeys.TokenManager.key.and.user.owner'\n                                        />\n                                    </Typography>\n                                </>\n                            ) : (\n                                <Button\n                                    variant='contained'\n                                    color='primary'\n                                    className={classes.button}\n                                    onClick={keys.size > 0 && keys.get(keyType) ? this.updateKeys : this.generateKeys}\n                                    disabled={!generateEnabled || isLoading}\n                                >\n                                    {keys.size > 0 && keys.get(keyType) ? 'Update' : 'Generate Keys'}\n                                    {isLoading && <CircularProgress size={20} />}\n                                </Button>\n                            )}\n                        </ScopeValidation>\n                    </div>\n                </Paper>\n                {\n                    mapExistingAuthApps && !keys.get(keyType) && (\n                        <Paper className={classes.paper}>\n                            <ExpansionPanel defaultExpanded>\n                                <ExpansionPanelSummary expandIcon={<Icon>expand_more</Icon>}>\n                                    <Typography className={classes.heading} variant='subtitle1'>\n                                        <FormattedMessage\n                                            defaultMessage='Provide Existing OAuth Keys'\n                                            id='Shared.AppsAndKeys.TokenManager.provide.oauth'\n                                        />\n                                    </Typography>\n                                </ExpansionPanelSummary>\n                                <ExpansionPanelDetails className={classes.keyConfigWrapper}>\n                                    <ProvideOAuthKeys\n                                        onChange={this.handleOnChangeProvidedOAuth}\n                                        consumerKey={providedConsumerKey}\n                                        consumerSecret={providedConsumerSecret}\n                                        isUserOwner={isUserOwner}\n                                    />\n                                </ExpansionPanelDetails>\n                            </ExpansionPanel>\n                            <div className={classes.generateWrapper}>\n                                <ScopeValidation\n                                    resourcePath={resourcePaths.APPLICATION_GENERATE_KEYS}\n                                    resourceMethod={resourceMethods.POST}\n                                >\n                                    {!isUserOwner ? (\n                                        <>\n                                            <Button\n                                                variant='contained'\n                                                color='primary'\n                                                className={classes.button}\n                                                onClick={this.provideOAuthKeySecret}\n                                                disabled={!isUserOwner}\n                                            >\n                                                {\n                                                    keys.size > 0 && keys.get(keyType)\n                                                        ? (\n                                                            <FormattedMessage\n                                                                defaultMessage='Update'\n                                                                id='Shared.AppsAndKeys.TokenManager.provide.\n                                                                oauth.button.update'\n                                                            />\n                                                        )\n                                                        : (\n                                                            <FormattedMessage\n                                                                defaultMessage='Provide'\n                                                                id='Shared.AppsAndKeys.TokenManager.\n                                                                provide.oauth.button.provide'\n                                                            />\n                                                        )\n                                                }\n                                            </Button>\n                                            <Typography variant='caption'>\n                                                <FormattedMessage\n                                                    defaultMessage='Only owner can provide keys'\n                                                    id='Shared.AppsAndKeys.TokenManager.key.provide.user.owner'\n                                                />\n                                            </Typography>\n                                        </>\n                                    ) : (\n                                        <Button\n                                            variant='contained'\n                                            color='primary'\n                                            className={classes.button}\n                                            onClick={this.provideOAuthKeySecret}\n                                        >\n                                            {\n                                                keys.size > 0 && keys.get(keyType)\n                                                    ? (\n                                                        <FormattedMessage\n                                                            defaultMessage='Update'\n                                                            id='Shared.AppsAndKeys.TokenManager.\n                                                            provide.oauth.button.update'\n                                                        />\n                                                    )\n                                                    : (\n                                                        <FormattedMessage\n                                                            defaultMessage='Provide'\n                                                            id='Shared.AppsAndKeys.\n                                                            TokenManager.provide.oauth.button.provide'\n                                                        />\n                                                    )\n                                            }\n                                        </Button>\n                                    )}\n                                </ScopeValidation>\n                            </div>\n                        </Paper>\n                    )\n                }\n            </div>\n        );\n    }\n}\nTokenManager.defaultProps = {\n    updateSubscriptionData: () => {},\n    summary: false,\n};\nTokenManager.propTypes = {\n    classes: PropTypes.instanceOf(Object).isRequired,\n    selectedApp: PropTypes.shape({\n        tokenType: PropTypes.string.isRequired,\n        appId: PropTypes.string,\n        value: PropTypes.string,\n        owner: PropTypes.string,\n        hashEnabled: PropTypes.bool,\n    }).isRequired,\n    keyType: PropTypes.string.isRequired,\n    updateSubscriptionData: PropTypes.func,\n    intl: PropTypes.shape({ formatMessage: PropTypes.func }).isRequired,\n    summary: PropTypes.bool,\n};\n\nexport default injectIntl(withStyles(styles)(TokenManager));\n"],"sourceRoot":""}