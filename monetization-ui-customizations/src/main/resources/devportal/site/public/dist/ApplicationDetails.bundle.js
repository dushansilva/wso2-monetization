(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1461:function(e,t,a){"use strict";var i=a(1),n=a.n(i),s=a(1601),l=a(1605),o=a(1603),r=a(1604),c=a(1602),p=a(1576),d=a(1573),u=a(180),m=a(17),h=a.n(m);const g=e=>{const{handleAppDelete:t,isDeleteOpen:a,toggleDeleteConfirmation:i}=e;return n.a.createElement(s.a,{open:a,transition:d.a},n.a.createElement(l.a,null,n.a.createElement(u.a,{id:"Applications.Listing.DeleteConfirmation.dialog.title",defaultMessage:"Delete Application"})),n.a.createElement(o.a,null,n.a.createElement(r.a,null,n.a.createElement(u.a,{id:"Applications.Listing.DeleteConfirmation.dialog.text.description",defaultMessage:"The application will be removed"}))),n.a.createElement(c.a,null,n.a.createElement(p.a,{dense:!0,onClick:i},n.a.createElement(u.a,{id:"Applications.Listing.DeleteConfirmation.dialog.cancel",defaultMessage:"Cancel"})),n.a.createElement(p.a,{size:"small",variant:"outlined",color:"primary",onClick:t},n.a.createElement(u.a,{id:"Applications.Listing.DeleteConfirmation.dialog,delete",defaultMessage:"Delete"}))))};g.propTypes={handleAppDelete:h.a.func.isRequired,isDeleteOpen:h.a.bool.isRequired,toggleDeleteConfirmation:h.a.func.isRequired},t.a=g},1882:function(e,t,a){"use strict";var i=a(1190);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a(1)),s=(0,i(a(1202)).default)(n.default.createElement("path",{d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"HighlightOff");t.default=s},2255:function(e,t,a){"use strict";a.r(t);var i=a(1),n=a.n(i),s=a(17),l=a.n(s),o=a(646),r=a(263),c=a(1182),p=a(1531),d=a(180),u=a(256),m=a(15),h=a(1238),g=a(1227),f=a(1218),b=a(1622),E=a(1525),y=a(1576),v=a(1601),x=a(1602),A=a(1603),k=a(1604),S=a(1605),w=a(1611),D=a(1591),M=a(1447),T=a(1542),I=a(1544),C=a(1610),O=a(1526),P=a(1626);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function R(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const B=e=>{const[t,a]=Object(i.useState)(!0),[s,l]=Object(i.useState)(!1),o=(t,i)=>{const{accessTokenRequest:n,updateAccessTokenRequest:s}=e,o=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){R(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n),{target:r}=i;switch(t){case"infiniteValidity":a(r.checked),r.checked?o.timeout=-1:o.timeout=null;break;case"timeout":void 0===P.a.number.validate(r.value).error?(o.timeout=r.value,l(!1)):(o.timeout=null,l(!0))}s(o)},{classes:r,intl:c,accessTokenRequest:p}=e;return n.a.createElement(n.a.Fragment,null,n.a.createElement(I.a,{margin:"normal",className:r.FormControl},n.a.createElement(C.a,{control:n.a.createElement(O.a,{checked:t,onChange:e=>o("infiniteValidity",e),value:p.timeout,color:"primary"}),label:"API Key with infinite validity period"}),!t&&n.a.createElement(T.a,{required:!0,label:c.formatMessage({defaultMessage:"API Key validity period",id:"Shared.AppsAndKeys.Tokens.apikey"}),InputLabelProps:{shrink:!0},helperText:s?c.formatMessage({defaultMessage:"Please use a valid number for API Key expiry time",id:"Shared.AppsAndKeys.Tokens.apikey.set.validity.error"}):c.formatMessage({defaultMessage:"You can set an expiration period to determine the validity period of the token after generation. Set this as -1 to ensure that the apikey never expires.",id:"Shared.AppsAndKeys.Tokens.apikey.set.validity.help"}),fullWidth:!0,name:"timeout",onChange:e=>o("timeout",e),placeholder:c.formatMessage({defaultMessage:"Enter time in seconds",id:"Shared.AppsAndKeys.Tokens.apikey.enter.time"}),value:p.timeout,autoFocus:!0,className:r.inputText,error:s})))};B.contextTypes={intl:l.a.shape({}).isRequired};var L=Object(d.e)(Object(c.a)(e=>({FormControl:{"margin-bottom":"8px",width:"100%",padding:"0px 10px"}}))(B));function q(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class j extends n.a.Component{constructor(e){super(e),q(this,"handleClose",()=>{this.setState(()=>({open:!1,accessTokenRequest:{timeout:-1}}))}),q(this,"handleClickOpen",()=>{this.setState(()=>({open:!0,showToken:!1}))}),q(this,"updateAccessTokenRequest",e=>{this.setState(()=>({accessTokenRequest:e}))}),q(this,"generateKeys",(e,t)=>{(new u.a).generateApiKey(e.appId,t,this.state.accessTokenRequest.timeout).then(e=>{console.log("Non empty response received");const t={accessToken:e.body.apikey,validityTime:e.body.validityTime,isOauth:!1};this.setState(()=>({apikey:t,open:!0,showToken:!0}))}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})});const{classes:t,selectedApp:a,keyType:i}=this.props;this.state={apikey:null,open:!1,showToken:!1,accessTokenRequest:{timeout:-1}}}render(){const{classes:e,selectedApp:t,keyType:a}=this.props,{showToken:i,accessTokenRequest:s,open:l,apikey:o}=this.state;return n.a.createElement("div",{className:e.root},n.a.createElement(p.a,{variant:"h5",className:e.keyTitle},a.toLowerCase()+" ",n.a.createElement(d.a,{defaultMessage:"API Key",id:"Shared.AppsAndKeys.TokenManager.ApiKey"})),n.a.createElement(w.a,{row:!0,className:e.formGroup},n.a.createElement(D.a,{container:!0,spacing:3},n.a.createElement(D.a,{item:!0,xs:12,className:e.gridWrapper},n.a.createElement("div",null,n.a.createElement(y.a,{variant:"contained",color:"primary",onClick:this.handleClickOpen},"Generate Key")),n.a.createElement(p.a,{component:"div",variant:"body2",className:e.formLabel},n.a.createElement(d.a,{id:"Shared.AppsAndKeys.ApiKeyManager.generate.key.help",defaultMessage:"Use the Generate Key button to generate a self-contained JWT token."}))))),n.a.createElement(v.a,{open:l,onClose:this.handleClose,"aria-labelledby":"form-dialog-title"},n.a.createElement(S.a,{id:"responsive-dialog-title",className:e.dialogTitle},"Generate API Key"),n.a.createElement(A.a,{className:e.dialogContent},n.a.createElement(k.a,null,!i&&n.a.createElement(L,{updateAccessTokenRequest:this.updateAccessTokenRequest,accessTokenRequest:s}),i&&n.a.createElement(M.a,{token:o}))),n.a.createElement(x.a,null,!i&&n.a.createElement(y.a,{onClick:()=>this.generateKeys(t,a),disabled:!s.timeout,color:"primary"},n.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.generate.btn",defaultMessage:"Generate"})),n.a.createElement(y.a,{onClick:this.handleClose,color:"primary",autoFocus:!0},n.a.createElement(d.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.close.btn",defaultMessage:"Close"})))))}}j.propTypes={classes:l.a.shape({}).isRequired,selectedApp:l.a.shape({tokenType:l.a.string.isRequired}).isRequired,keyType:l.a.string.isRequired,intl:l.a.shape({formatMessage:l.a.func}).isRequired};var z=Object(d.e)(Object(c.a)(e=>({root:{padding:e.spacing(3)},button:{marginLeft:e.spacing(5),padding:"10px"},tokenSection:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},margin:{marginRight:e.spacing(2)},keyConfigWrapper:{flexDirection:"column",marginBottom:0},generateWrapper:{padding:"10px","margin-inline-end":"auto"},paper:{display:"flex",marginTop:e.spacing(2),marginBottom:e.spacing(2),marginLeft:e.spacing(10)},dialogTitle:{padding:"24px 24px 0px"},dialogContent:{padding:"0 24px 0px"},formGroup:{padding:"20px"},gridWrapper:{"align-self":"center"},keyTitle:{textTransform:"capitalize"}}))(j)),W=a(1199),K=a.n(W),F=a(1552),U=a(265),_=a(1595),V=a(1597),H=a(1598),G=a(1600),Y=a(1599),X=a(1424),$=a(1425),J=a(1426),Q=a(1569),Z=a(1564),ee=a(1561),te=a(1523),ae=a(1537),ie=a(1882),ne=a.n(ie),se=a(1619),le=a.n(se),oe=a(259),re=a(1196),ce=a(1356),pe=a.n(ce),de=a(1620),ue=a(1722),me=a(1556),he=a(1240);class ge extends n.a.Component{constructor(e){super(e),this.state={selectedPolicy:null}}componentDidMount(){const{policies:e}=this.props;this.setState({selectedPolicy:e[0]})}render(){const{classes:e,policies:t,apiId:a,handleSubscribe:i,applicationId:s}=this.props,{selectedPolicy:l}=this.state;return t&&n.a.createElement("div",{className:e.root},n.a.createElement(ue.a,{className:e.select,value:l,onChange:e=>{this.setState({selectedPolicy:e.target.value})}},t.map(e=>n.a.createElement(me.a,{value:e,key:e},e))),n.a.createElement(he.a,{resourcePath:he.c.SUBSCRIPTIONS,resourceMethod:he.b.POST},n.a.createElement(y.a,{variant:"contained",size:"small",color:"primary",className:e.buttonGap,onClick:()=>{i(s,a,l)}},n.a.createElement(d.a,{defaultMessage:"Subscribe",id:"Apis.Listing.SubscriptionPolicySelect.subscribe"}))))}}ge.propTypes={classes:l.a.object.isRequired};var fe=Object(c.a)(e=>({root:{display:"flex"},buttonGap:{marginLeft:20},select:{width:100}}),{withTheme:!0})(ge);function be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ee extends n.a.Component{constructor(e){super(e),be(this,"getData",()=>{const{intl:e}=this.props;this.xhrRequest().then(e=>{const{body:t}=e,{list:a,pagination:i}=t,{total:n}=i;this.count=n,this.setState({data:this.updateUnsubscribedAPIsList(a)})}).catch(t=>{const{response:a}=t,{setTenantDomain:i}=this.props;a&&901300===a.body.code?(i("INVALID"),Alert.error(e.formatMessage({defaultMessage:"Invalid tenant domain",id:"Apis.Listing.ApiTableView.invalid.tenant.domain"}))):Alert.error(e.formatMessage({defaultMessage:"Error While Loading APIs",id:"Apis.Listing.ApiTableView.error.loading"}))}).finally(()=>{this.setState({loading:!1})})}),be(this,"xhrRequest",()=>{const{searchText:e}=this.props,{page:t,rowsPerPage:a}=this,i=new u.a;return e&&""!==e?i.getAllAPIs({query:e,limit:this.rowsPerPage,offset:t*a}):i.getAllAPIs({limit:this.rowsPerPage,offset:t*a})}),be(this,"changePage",e=>{const{intl:t}=this.props;this.page=e,this.setState({loading:!0}),this.xhrRequest().then(e=>{const{body:t}=e,{list:a}=t;this.setState({data:this.updateUnsubscribedAPIsList(a)})}).catch(e=>{Alert.error(t.formatMessage({defaultMessage:"Error While Loading APIs",id:"Apis.Listing.ApiTableView.error.loading"}))}).finally(()=>{this.setState({loading:!1})})}),this.state={data:null,loading:!0},this.page=0,this.count=100,this.rowsPerPage=10,this.pageType=null}componentDidMount(){this.getData()}componentDidUpdate(e){const{subscriptions:t,searchText:a}=this.props;t.length!==e.subscriptions.length?this.getData():a!==e.searchText&&(this.page=0,this.getData())}getIdsOfSubscribedEntities(){const{subscriptions:e}=this.props;return e.map(e=>e.apiId).filter(Boolean)}updateUnsubscribedAPIsList(e){const t=this.getIdsOfSubscribedEntities();for(let a=0;a<e.length;a++)(t.includes(e[a].id)||e[a].advertiseInfo.advertised||!e[a].isSubscriptionAvailable)&&(e[a].throttlingPolicies=null);return e}render(){const{apisNotFound:e}=this.props,{loading:t,data:a}=this.state,{page:i,count:s,rowsPerPage:l}=this;if(e)return n.a.createElement(g.a,null);const{theme:o,handleSubscribe:r,applicationId:c,intl:p}=this.props,d=[{name:"id",label:p.formatMessage({id:"Apis.Listing.APIList.id",defaultMessage:"Id"}),options:{display:"excluded"}},{name:"name",label:p.formatMessage({id:"Apis.Listing.APIList.name",defaultMessage:"Name"})},{name:"throttlingPolicies",label:p.formatMessage({id:"Apis.Listing.APIList.policy",defaultMessage:"Policy"}),options:{customBodyRender:(e,t,a)=>{if(t.rowData){const a=t.rowData[0],i=e;return i?n.a.createElement(fe,{key:a,policies:i,apiId:a,handleSubscribe:(e,t,a)=>r(e,t,a),applicationId:c}):p.formatMessage({id:"Apis.Listing.APICardView.already.subscribed",defaultMessage:"Subscribed"})}}}}],u={search:!1,title:!1,filter:!1,print:!1,download:!1,viewColumns:!1,customToolbar:!1,responsive:"stacked",serverSide:!0,count:s,page:i,onTableChange:(e,t)=>{switch(e){case"changePage":this.changePage(t.page)}},selectableRows:"none",rowsPerPage:l,onChangeRowsPerPage:e=>{const{page:t,count:a}=this;t*e>a&&(this.page=0),this.rowsPerPage=e,this.getData()}};return t?n.a.createElement(h.a,null):a&&0===a.length||!a?n.a.createElement(de.a,null):n.a.createElement(pe.a,{title:"",data:a,columns:d,options:u})}}Ee.propTypes={classes:l.a.object.isRequired,theme:l.a.object.isRequired,intl:l.a.shape({formatMessage:l.a.func}).isRequired};var ye=Object(d.e)(Object(c.a)(e=>({root:{display:"flex"},buttonGap:{marginRight:10}}),{withTheme:!0})(Ee)),ve=a(1383),xe=a(1216),Ae=a(1573);const ke=["Name","Value"],Se={filterType:"checkbox",sort:!1,search:!1,viewColumns:!1,filter:!1,selectableRowsHeader:!1,selectableRows:"none",pagination:!1,download:!1};function we(e){const{subscriptionId:t,isMonetizedAPI:a,isDynamicUsagePolicy:s}=e,[l,o]=Object(i.useState)(!1),[r,c]=Object(i.useState)(!1),[p,u]=Object(i.useState)(null),m=()=>{c(!1)};return n.a.createElement(n.a.Fragment,null,n.a.createElement(y.a,{variant:"outlined",size:"small",color:"primary",disabled:!1,onClick:()=>{o(!0),u(null),(new ve.a).getMonetizationInvoice(t).then(e=>{if(e&&e.obj){const t=[],{obj:{properties:a}}=e;Object.keys(a).map(e=>{const i=[];i.push(e),i.push(a[e]),t.push(i)}),u(t)}}).catch(e=>{console.error(e),c(!0)})}},n.a.createElement(d.a,{id:"Applications.Details.Invoice.view.btn",defaultMessage:"View Invoice"})),p?n.a.createElement(v.a,{open:l,onClose:()=>{o(!1)},fullWidth:"true"},p&&n.a.createElement(pe.a,{title:"Upcoming Invoice",data:p,columns:ke,options:Se})):n.a.createElement(v.a,{open:r,onClose:m,fullWidth:"true"},n.a.createElement(S.a,null,"No Data Available"),n.a.createElement(A.a,null,n.a.createElement(k.a,{id:"invoice-dialog-description"},"Pending invoice data not found for this subscription.")),n.a.createElement(x.a,null,n.a.createElement(y.a,{onClick:m,color:"primary"},"Close"))))}we.propTypes={subscriptionId:l.a.string.isRequired};var De=we;class Me extends n.a.Component{constructor(e){super(e),this.state={openMenu:!1,isMonetizedAPI:!1,isDynamicUsagePolicy:!1},this.handleRequestClose=this.handleRequestClose.bind(this),this.handleRequestOpen=this.handleRequestOpen.bind(this),this.handleRequestDelete=this.handleRequestDelete.bind(this),this.checkIfDynamicUsagePolicy=this.checkIfDynamicUsagePolicy.bind(this),this.checkIfMonetizedAPI=this.checkIfMonetizedAPI.bind(this)}handleRequestClose(){this.setState({openMenu:!1})}handleRequestOpen(){this.setState({openMenu:!0})}handleRequestDelete(e){const{handleSubscriptionDelete:t}=this.props;this.setState({openMenu:!1}),t&&t(e)}checkIfMonetizedAPI(e){(new u.a).getAPIById(e).then(e=>{if(e&&e.data){const t=JSON.parse(e.data);this.setState({isMonetizedAPI:t.monetization.enabled})}})}checkIfDynamicUsagePolicy(e){(new ve.a).getSubscription(e).then(e=>{if(e&&e.body){const t=JSON.parse(e.data);if(t.throttlingPolicy){(new u.a).getTierByName(t.throttlingPolicy,"subscription").then(e=>{const t=JSON.parse(e.data);t.monetizationAttributes.billingType&&"DYNAMICRATE"===t.monetizationAttributes.billingType&&this.setState({isDynamicUsagePolicy:!0})})}}})}componentDidMount(){this.checkIfMonetizedAPI(this.props.subscription.apiId),this.checkIfDynamicUsagePolicy(this.props.subscription.subscriptionId)}render(){const{subscription:{apiInfo:e,status:t,throttlingPolicy:a,subscriptionId:i,apiId:s}}=this.props,{openMenu:l,isMonetizedAPI:r,isDynamicUsagePolicy:c}=this.state,p=n.a.createElement(o.a,{to:"/apis/"+s},e.name+" - "+e.version);return n.a.createElement(Y.a,{hover:!0},n.a.createElement(H.a,{style:{paddingLeft:0}},p),n.a.createElement(H.a,null,e.lifeCycleStatus),n.a.createElement(H.a,null,a),n.a.createElement(H.a,null,t),n.a.createElement(H.a,null,n.a.createElement("div",null,n.a.createElement(he.a,{resourcePath:he.c.SINGLE_SUBSCRIPTION,resourceMethod:he.b.DELETE},n.a.createElement(Z.a,{"aria-label":"Delete",onClick:this.handleRequestOpen},n.a.createElement(Q.a,null,"delete"))),n.a.createElement(v.a,{open:l,transition:Ae.a},n.a.createElement(S.a,null,"Confirm"),n.a.createElement(A.a,null,n.a.createElement(k.a,null,n.a.createElement(d.a,{id:"Applications.Details.SubscriptionTableData.delete.subscription.confirmation",defaultMessage:"Are you sure you want to delete the Subscription?"}))),n.a.createElement(x.a,null,n.a.createElement(y.a,{dense:!0,color:"primary",onClick:this.handleRequestClose},n.a.createElement(d.a,{id:"Applications.Details.SubscriptionTableData.cancel",defaultMessage:"Cancel"})),n.a.createElement(y.a,{dense:!0,color:"primary",onClick:()=>this.handleRequestDelete(i)},n.a.createElement(d.a,{id:"Applications.Details.SubscriptionTableData.delete",defaultMessage:"Delete"})))))),n.a.createElement(H.a,null,n.a.createElement(De,{subscriptionId:i,isMonetizedAPI:r,isDynamicUsagePolicy:c})))}}Me.propTypes={subscription:l.a.shape({apiInfo:l.a.shape({name:l.a.string.isRequired,version:l.a.string.isRequired,lifeCycleStatus:l.a.string.isRequired}).isRequired,throttlingPolicy:l.a.string.isRequired,subscriptionId:l.a.string.isRequired,apiId:l.a.string.isRequired,status:l.a.string.isRequired}).isRequired,handleSubscriptionDelete:l.a.func.isRequired};var Te=Me;class Ie extends n.a.Component{constructor(e){super(e),this.state={subscriptions:null,unsubscribedAPIList:[],apisNotFound:!1,subscriptionsNotFound:!1,isAuthorize:!0,openDialog:!1,searchText:""},this.handleSubscriptionDelete=this.handleSubscriptionDelete.bind(this),this.updateSubscriptions=this.updateSubscriptions.bind(this),this.handleSubscribe=this.handleSubscribe.bind(this),this.handleOpenDialog=this.handleOpenDialog.bind(this),this.handleSearchTextChange=this.handleSearchTextChange.bind(this),this.handleSearchTextTmpChange=this.handleSearchTextTmpChange.bind(this),this.handleClearSearch=this.handleClearSearch.bind(this),this.handleEnterPress=this.handleEnterPress.bind(this),this.searchTextTmp=""}componentDidMount(){const{match:{params:{applicationId:e}}}=this.props;this.updateSubscriptions(e)}handleOpenDialog(){this.setState(e=>({openDialog:!e.openDialog}))}updateSubscriptions(e){const t=new ve.a,a=m.app.subscriptionLimit||1e3;t.getSubscriptions(null,e,a).then(e=>{this.setState({subscriptions:e.body.list})}).catch(e=>{const{status:t}=e;404===t?this.setState({subscriptionsNotFound:!0}):401===t&&this.setState({isAuthorize:!1})})}handleSubscriptionDelete(e){(new ve.a).deleteSubscription(e).then(t=>{if(200!==t.status)return console.log(t),void re.a.info("Something went wrong while deleting the Subscription!");re.a.info("Subscription deleted successfully!");const{subscriptions:a}=this.state;for(const t in a)if(Object.prototype.hasOwnProperty.call(a,t)&&a[t].subscriptionId===e){a.splice(t,1);break}this.setState({subscriptions:a})}).catch(e=>{const{status:t}=e;401===t&&this.setState({isAuthorize:!1}),re.a.error("Error occurred when deleting subscription")})}handleSubscribe(e,t,a){const i=new u.a,{intl:n}=this.props;a?i.subscribe(t,e,a).then(t=>{201!==t.status?re.a.error(n.formatMessage({id:"Applications.Details.Subscriptions.error.occurred.during.subscription.not.201",defaultMessage:"Error occurred during subscription"})):("ON_HOLD"===t.body.status?re.a.info(n.formatMessage({defaultMessage:"Your subscription request has been submitted and is now awaiting approval.",id:"subscription.pending"})):re.a.info(n.formatMessage({id:"Applications.Details.Subscriptions.subscription.successful",defaultMessage:"Subscription successful"})),this.updateSubscriptions(e))}).catch(e=>{const{status:t}=e;401===t&&this.setState({isAuthorize:!1}),re.a.error(n.formatMessage({id:"Applications.Details.Subscriptions.error.occurred.during.subscription",defaultMessage:"Error occurred during subscription"}))}):re.a.error(n.formatMessage({id:"Applications.Details.Subscriptions.select.a.subscription.policy",defaultMessage:"Select a subscription policy"}))}handleSearchTextChange(){this.setState({searchText:this.searchTextTmp})}handleSearchTextTmpChange(e){this.searchTextTmp=e.target.value}handleClearSearch(){this.setState({searchText:""})}handleEnterPress(e){13===e.keyCode&&(e.preventDefault(),this.handleSearchTextChange())}render(){const{isAuthorize:e,openDialog:t,searchText:a}=this.state;e||(window.location=m.app.context+"/services/configs");const{subscriptions:i,apisNotFound:s,subscriptionsNotFound:l}=this.state,{match:{params:{applicationId:o}}}=this.props,{classes:r,intl:c}=this.props;return i?n.a.createElement("div",{className:r.root},n.a.createElement("div",{className:r.titleWrapper},n.a.createElement(p.a,{variant:"h5",className:r.keyTitle},n.a.createElement(d.a,{id:"Applications.Details.Subscriptions.subscription.management",defaultMessage:"Subscription Management"})),n.a.createElement(y.a,{color:"secondary",className:r.buttonElm,size:"small",onClick:this.handleOpenDialog},n.a.createElement(Q.a,null,"add_circle_outline"),n.a.createElement(d.a,{id:"Applications.Details.Subscriptions.subscription.management.add",defaultMessage:"Subscribe APIs"}))),n.a.createElement(D.a,{container:!0,className:"tab-grid",spacing:2},n.a.createElement(D.a,{item:!0,xs:12,xl:11},i&&0===i.length?n.a.createElement("div",{className:r.genericMessageWrapper},n.a.createElement(xe.a,{type:"info",className:r.dialogContainer},n.a.createElement(p.a,{variant:"h5",component:"h3"},n.a.createElement(d.a,{id:"Applications.Details.Subscriptions.no.subscriptions",defaultMessage:"No Subscriptions Available"})),n.a.createElement(p.a,{component:"p"},n.a.createElement(d.a,{id:"Applications.Details.Subscriptions.no.subscriptions.content",defaultMessage:"No subscriptions are available for this Application"})))):n.a.createElement(X.a,{className:r.card},n.a.createElement($.a,null,n.a.createElement(p.a,{variant:"h6",gutterBottom:!0,className:r.cardTitle},n.a.createElement(d.a,{id:"Applications.Details.Subscriptions.subscriptions",defaultMessage:"Subscriptions"}))),n.a.createElement(ee.a,null),n.a.createElement(J.a,{className:r.cardContent},l?n.a.createElement(g.a,null):n.a.createElement(_.a,null,n.a.createElement(G.a,null,n.a.createElement(Y.a,null,n.a.createElement(H.a,{className:r.firstCell},n.a.createElement(d.a,{id:"Applications.Details.Subscriptions.api.name",defaultMessage:"API"})),n.a.createElement(H.a,null,n.a.createElement(d.a,{id:"Applications.Details.Subscriptions\n                                                                        .subscription.state",defaultMessage:"Lifecycle State"})),n.a.createElement(H.a,null,n.a.createElement(d.a,{id:"Applications.Details.Subscriptions\n                                                                        .subscription.tier",defaultMessage:"Subscription Tier"})),n.a.createElement(H.a,null,n.a.createElement(d.a,{id:"Applications.Details.Subscriptions.Status",defaultMessage:"Subscription Status"})),n.a.createElement(H.a,null,n.a.createElement(d.a,{id:"Applications.Details.Subscriptions.action",defaultMessage:"Action"})),n.a.createElement(H.a,null,n.a.createElement(d.a,{id:"Applications.Details.Subscriptions.invoice",defaultMessage:"Invoice"})))),n.a.createElement(V.a,null,i&&i.map(e=>n.a.createElement(Te,{key:e.subscriptionId,subscription:e,handleSubscriptionDelete:this.handleSubscriptionDelete})))))))),n.a.createElement(v.a,{onClose:this.handleOpenDialog,"aria-labelledby":"simple-dialog-title",open:t,maxWidth:"lg",fullWidth:!0,fullScreen:!0},n.a.createElement(S.a,{disableTypography:!0,className:r.dialogTitle},n.a.createElement(p.a,{variant:"h6"},n.a.createElement(d.a,{id:"Applications.Details.Subscriptions.subscription.management.add",defaultMessage:"Subscribe APIs"})),n.a.createElement(te.a,{className:r.searchWrapper},n.a.createElement(F.a,{component:"form",className:r.searchRoot},a&&n.a.createElement(ne.a,{className:r.clearSearchIcon,onClick:this.handleClearSearch}),n.a.createElement(ae.a,{className:r.input,placeholder:c.formatMessage({defaultMessage:"Search APIs",id:"Applications.Details.Subscriptions.search"}),inputProps:{"aria-label":c.formatMessage({defaultMessage:"Search APIs",id:"Applications.Details.Subscriptions.search"})},onChange:this.handleSearchTextTmpChange,onKeyDown:this.handleEnterPress}),n.a.createElement(Z.a,{className:r.iconButton,"aria-label":"search",onClick:this.handleSearchTextChange},n.a.createElement(le.a,null))),n.a.createElement(te.a,{className:r.searchResults},a&&""!==a?n.a.createElement(n.a.Fragment,null,n.a.createElement(p.a,{variant:"caption"},n.a.createElement(d.a,{id:"Applications.Details.Subscriptions.filter.msg",defaultMessage:"Filtered APIs for "}),a)):n.a.createElement(p.a,{variant:"caption"},n.a.createElement(d.a,{id:"Applications.Details.Subscriptions.filter.msg.all.apis",defaultMessage:"Displaying all APIs"})))),n.a.createElement(Z.a,{"aria-label":"close",className:r.closeButton,onClick:this.handleOpenDialog},n.a.createElement(Q.a,null,"cancel"))),n.a.createElement(te.a,{padding:2},n.a.createElement(ye,{apisNotFound:s,subscriptions:i,applicationId:o,handleSubscribe:(e,t,a)=>this.handleSubscribe(e,t,a),searchText:a})))):n.a.createElement(oe.a,null)}}Ie.propTypes={classes:l.a.shape({}).isRequired,match:l.a.shape({params:l.a.shape({applicationId:l.a.string}).isRequired}).isRequired,intl:l.a.shape({}).isRequired};var Ce=Object(d.e)(Object(c.a)(e=>({searchRoot:{padding:"2px 4px",display:"flex",alignItems:"center",width:400,flex:1,marginLeft:e.spacing(2),marginRight:e.spacing(2)},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4},root:{padding:e.spacing(3)},firstCell:{paddingLeft:0},cardTitle:{paddingLeft:e.spacing(2)},cardContent:{minHeight:200},titleWrapper:{display:"flex",alignItems:"center",paddingBottom:e.spacing(2),"& h5":{marginRight:e.spacing(1)}},dialogTitle:{display:"flex",alignItems:"flex-start",padding:e.spacing(1)},genericMessageWrapper:{margin:e.spacing(2)},searchWrapper:{flex:1},searchResults:{height:30,display:"flex",paddingTop:e.spacing(1),paddingRight:0,paddingBottom:0,paddingLeft:e.spacing(2)},clearSearchIcon:{cursor:"pointer"}}))(Ie)),Oe=a(1262),Pe=a(1226),Ne=a(1461),Re=a(22);class Be extends n.a.Component{constructor(e){var t,a,i;super(e),i=()=>{this.setState(e=>{let{isDeleteOpen:t}=e;return{isDeleteOpen:!t}})},(a="toggleDeleteConfirmation")in(t=this)?Object.defineProperty(t,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[a]=i,this.state={notFound:!1,showOverview:!0,isDeleteOpen:!1,applicationOwner:""},this.toggleOverview=this.toggleOverview.bind(this),this.handleAppDelete=this.handleAppDelete.bind(this),this.handleDeleteConfimation=this.handleDeleteConfimation.bind(this),this.toggleDeleteConfirmation=this.toggleDeleteConfirmation.bind(this)}componentDidMount(){const e=new u.a,{applicationId:t}=this.props;e.getApplication(t).then(t=>{this.setState({applicationOwner:t.obj.owner});const a=e.getTierByName(t.obj.throttlingPolicy,"application");return Promise.all([t,a])}).then(e=>{const[t,a]=e.map(e=>e.obj);this.setState({application:t,tierDescription:a.description})}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})}toggleOverview(e){"boolean"==typeof e?this.setState({showOverview:e}):this.setState(e=>({showOverview:!e.showOverview}))}handleDeleteConfimation(){const{isDeleteOpen:e}=this.state;this.setState({isDeleteOpen:!e})}handleAppDelete(){const{applicationId:e,intl:t}=this.props,{application:a}=this.state,i=Pe.a.deleteApp(e);let n=t.formatMessage({defaultMessage:"Application {name} deleted successfully!",id:"Applications.Details.InfoBar.application.deleted.successfully"},{name:a.name});i.then(e=>{e&&(re.a.info(n),this.toggleDeleteConfirmation()),this.props.history.push("/applications")}).catch(e=>{console.log(e),n=t.formatMessage({defaultMessage:"Error while deleting application {name}",id:"Applications.Details.InfoBar.application.deleting.error"},{name:a.name}),re.a.error(n)})}render(){const{classes:e,theme:t,applicationId:a}=this.props,{application:i,tierDescription:s,showOverview:l,notFound:r,isDeleteOpen:c,applicationOwner:u}=this.state,{custom:{leftMenu:{position:m}}}=t;if(r)return n.a.createElement(g.a,{message:n.a.createElement(d.a,{id:"Applications.Details.InfoBar.listing.resource.not.found",defaultMessage:"Resource Not Fount"})});if(!i)return n.a.createElement(h.a,null);const f=Re.a.getUser().name===u;return n.a.createElement("div",{className:e.infoBarMain},n.a.createElement("div",{className:e.root},n.a.createElement(D.a,{item:!0,xs:10},n.a.createElement("div",{style:{marginLeft:t.spacing(1)}},n.a.createElement(o.a,{to:"/applications/"+a+"/overview",className:e.linkTitle},n.a.createElement(p.a,{variant:"h4"},i.name))),n.a.createElement("div",{style:{marginLeft:t.spacing(1)}},n.a.createElement(p.a,{variant:"caption",gutterBottom:!0,align:"left"},i.subscriptionCount," ",n.a.createElement(d.a,{id:"Applications.Details.InfoBar.subscriptions",defaultMessage:"Subscriptions"})))),n.a.createElement(Oe.a,{height:70}),n.a.createElement(D.a,{item:!0,xs:1,m:1,className:e.editButton},f?n.a.createElement(o.a,{to:`/applications/${a}/edit/`,className:e.editButton},n.a.createElement(y.a,{style:{padding:"4px"},color:"default",classes:{label:e.iconButton},"aria-label":n.a.createElement(d.a,{id:"Applications.Details.InfoBar.edit",defaultMessage:"Edit"})},n.a.createElement(Q.a,null,"edit"),n.a.createElement(p.a,{variant:"caption",style:{marginTop:"2px"}},n.a.createElement(d.a,{id:"Applications.Details.InfoBar.edit.text",defaultMessage:"Edit"})))):n.a.createElement(y.a,{disabled:!0,style:{padding:"4px"},color:"default",classes:{label:e.iconButton},"aria-label":n.a.createElement(d.a,{id:"Applications.Details.InfoBar.edit",defaultMessage:"Edit"})},n.a.createElement(Q.a,null,"edit"),n.a.createElement(p.a,{variant:"caption",style:{marginTop:"2px"}},n.a.createElement(d.a,{id:"Applications.Details.InfoBar.edit.text",defaultMessage:"Edit"})))),n.a.createElement(Oe.a,{height:70}),n.a.createElement(D.a,{item:!0,xs:1,m:1,className:e.button},n.a.createElement(y.a,{onClick:this.handleDeleteConfimation,disabled:Re.a.getUser().name!==u,color:"default",classes:{label:e.iconButton},"aria-label":n.a.createElement(d.a,{id:"Applications.Details.InfoBar.delete",defaultMessage:"Delete"})},n.a.createElement(Q.a,null,"delete"),n.a.createElement(p.a,{variant:"caption",style:{marginTop:"2px"}},n.a.createElement(d.a,{id:"Applications.Details.InfoBar.text",defaultMessage:"Delete"}))),n.a.createElement(Ne.a,{handleAppDelete:this.handleAppDelete,isDeleteOpen:c,toggleDeleteConfirmation:this.toggleDeleteConfirmation}))))}}Be.propTypes={classes:l.a.shape({}).isRequired,theme:l.a.shape({}).isRequired,applicationId:l.a.string.isRequired};var Le=Object(d.e)(Object(r.h)(Object(c.a)(e=>{const t=e.custom.infoBar.background||"#ffffff",a=e.custom.infoBar.height||70,i=e.custom.infoBar.starColor||e.palette.getContrastText(t);return{root:{height:a,background:t,color:e.palette.getContrastText(t),borderBottom:"solid 1px "+e.palette.grey.A200,display:"flex",alignItems:"center",paddingLeft:e.spacing(2)},backIcon:{color:e.palette.primary.main,fontSize:56,cursor:"pointer"},backText:{color:e.palette.primary.main,cursor:"pointer",fontFamily:e.typography.fontFamily},starRate:{fontSize:40,color:i},starRateMy:{fontSize:70,color:e.palette.primary.main},rateLink:{cursor:"pointer",lineHeight:"70px"},topBar:{display:"flex",paddingBottom:e.spacing(2)},infoContent:{color:e.palette.getContrastText(t),background:t,padding:e.spacing(3),"& td, & th":{color:e.palette.getContrastText(t)}},infoContentBottom:{background:e.custom.infoBar.sliderBackground,color:e.palette.getContrastText(e.custom.infoBar.sliderBackground),borderBottom:"solid 1px "+e.palette.grey.A200},bootstrapRoot:{padding:0,"label + &":{marginTop:e.spacing(3)}},bootstrapInput:{borderRadius:4,backgroundColor:e.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",width:350,transition:e.transitions.create(["border-color","box-shadow"]),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}},epWrapper:{display:"flex"},prodLabel:{lineHeight:"30px",marginRight:10,width:100},contentWrapper:{maxWidth:e.custom.contentAreaWidth-e.custom.leftMenu.width,alignItems:"center"},ratingBoxWrapper:{position:"relative",display:"flex",alignItems:"center"},ratingBox:{backgroundColor:e.custom.leftMenu.background,border:"1px solid rgb(71, 211, 244)",borderRadius:"5px",display:"flex",position:"absolute",top:14,height:"40px",color:e.palette.getContrastText(e.custom.leftMenu.background),alignItems:"center",left:"0",paddingLeft:"5px",paddingRight:"5px"},userRating:{display:"flex",alignItems:"flex-end"},verticalDividerStar:{borderLeft:"solid 1px "+e.palette.grey.A200,height:40,marginRight:e.spacing(1),marginLeft:e.spacing(1)},backLink:{alignItems:"center",textDecoration:"none",display:"flex"},ratingSummery:{alignItems:"center",flexDirection:"column",display:"flex"},infoBarMain:{width:"100%"},buttonView:{textAlign:"left",justifyContent:"left",display:"flex",paddingLeft:e.spacing(2),cursor:"pointer"},buttonOverviewText:{display:"inline-block",paddingTop:3},button:{display:"inline-grid",cursor:"pointer"},editButton:{display:"inline-grid",cursor:"pointer"},iconButton:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},appNameXSmall:{whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden",maxWidth:200,lineHeight:1.3},appNameSmall:{whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden",maxWidth:310,lineHeight:1.3},appNameMid:{whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden",maxWidth:640,lineHeight:1.3},appNameBig:{whiteSpace:"nowrap",overflowX:"auto",overflowY:"hidden",maxWidth:980,lineHeight:1.3},linkTitle:{color:e.palette.getContrastText(e.custom.infoBar.background)}}},{withTheme:!0})(Be))),qe=a(1414),je=a(1725),ze=a(1608),We=a(1609),Ke=a(1607);const Fe=Object(qe.a)(e=>({root:{padding:e.spacing(3,2)},table:{minWidth:"100%"},leftCol:{width:200},iconAligner:{display:"flex",justifyContent:"flex-start",alignItems:"center"},iconTextWrapper:{display:"inline-block",paddingLeft:20},iconEven:{color:e.custom.infoBar.iconEvenColor,width:e.spacing(3)},iconOdd:{color:e.custom.infoBar.iconOddColor,width:e.spacing(3)},noKeysRoot:{backgroundImage:`url(${m.app.context+e.custom.overviewPage.keysBackground})`,height:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",minHeight:192,display:"flex",alignItems:"center"},heading:{color:e.palette.getContrastText(e.palette.background.paper),paddingLeft:e.spacing(1)},emptyBox:{background:"#ffffff55",color:e.palette.getContrastText(e.palette.background.paper),border:"solid 1px #fff",padding:e.spacing(2),width:"100%"},summaryRoot:{display:"flex",alignItems:"center"},actionPanel:{justifyContent:"flex-start"}}));var Ue=Object(d.e)((function(e){const t=Fe(),[a,s]=Object(i.useState)(null),[l,r]=Object(i.useState)(null),[c,m]=Object(i.useState)(!1),{match:{params:{applicationId:f}}}=e;if(Object(i.useEffect)(()=>{const e=new u.a;e.getApplication(f).then(t=>{const a=e.getTierByName(t.obj.throttlingPolicy,"application"),i=t.obj;a.then(e=>{r(e.obj.description),s(i)})}).catch(e=>{const{status:t}=e;m(404===t)})},[]),c)return n.a.createElement(g.a,null);if(!a)return n.a.createElement(h.a,null);const b="/applications/"+f;return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.a,{className:t.root},n.a.createElement(_.a,{className:t.table},n.a.createElement(V.a,null,n.a.createElement(Y.a,null,n.a.createElement(H.a,{component:"th",scope:"row",className:t.leftCol},n.a.createElement("div",{className:t.iconAligner},n.a.createElement(Q.a,{className:t.iconEven},"description"),n.a.createElement("span",{className:t.iconTextWrapper},n.a.createElement(p.a,{variant:"caption",gutterBottom:!0,align:"left"},n.a.createElement(d.a,{id:"Applications.Details.Overview.description",defaultMessage:"Description"}))))),n.a.createElement(H.a,null,a.description)),l&&n.a.createElement(Y.a,null,n.a.createElement(H.a,{component:"th",scope:"row",className:t.leftCol},n.a.createElement("div",{className:t.iconAligner},n.a.createElement(Q.a,{className:t.iconOdd},"settings_input_component"),n.a.createElement("span",{className:t.iconTextWrapper},n.a.createElement(p.a,{variant:"caption",gutterBottom:!0,align:"left"},n.a.createElement(d.a,{id:"Applications.Details.InfoBar.throttling.tier",defaultMessage:"Throttling Tier"}))))),a&&n.a.createElement(H.a,null,a.throttlingPolicy," ",`(${l})`)),n.a.createElement(Y.a,null,n.a.createElement(H.a,{component:"th",scope:"row",className:t.leftCol},n.a.createElement("div",{className:t.iconAligner},n.a.createElement(Q.a,{className:t.iconEven},"vpn_key"),n.a.createElement("span",{className:t.iconTextWrapper},n.a.createElement(p.a,{variant:"caption",gutterBottom:!0,align:"left"},n.a.createElement(d.a,{id:"Applications.Details.Overview.token.type",defaultMessage:"Token Type"}))))),n.a.createElement(H.a,null,Pe.a.TOKEN_TYPES[a.tokenType].displayName)),n.a.createElement(Y.a,null,n.a.createElement(H.a,{component:"th",scope:"row",className:t.leftCol},n.a.createElement("div",{className:t.iconAligner},n.a.createElement(Q.a,{className:t.iconOdd},"assignment_turned_in"),n.a.createElement("span",{className:t.iconTextWrapper},n.a.createElement(p.a,{variant:"caption",gutterBottom:!0,align:"left"},n.a.createElement(d.a,{id:"Applications.Details.Overview.workflow.status",defaultMessage:"Workflow Status"}))))),n.a.createElement(H.a,null,a.status)),n.a.createElement(Y.a,null,n.a.createElement(H.a,{component:"th",scope:"row",className:t.leftCol},n.a.createElement("div",{className:t.iconAligner},n.a.createElement(Q.a,{className:t.iconEven},"account_box"),n.a.createElement("span",{className:t.iconTextWrapper},n.a.createElement(p.a,{variant:"caption",gutterBottom:!0,align:"left"},n.a.createElement(d.a,{id:"Applications.Details.Overview.application.owner",defaultMessage:"Application Owner"}))))),n.a.createElement(H.a,null,a.owner)),a.attributes&&Object.keys(a.attributes).map((e,i)=>{const s=a.attributes[e];return n.a.createElement(Y.a,{key:e},n.a.createElement(H.a,{component:"th",scope:"row",className:t.leftCol},n.a.createElement("div",{className:t.iconAligner},n.a.createElement(Q.a,{className:K()({[t.iconEven]:i%2!=0},{[t.iconOdd]:i%2==0})},"web_asset"),n.a.createElement("span",{className:t.iconTextWrapper},n.a.createElement(p.a,{variant:"caption",gutterBottom:!0,align:"left"},e)))),n.a.createElement(H.a,null,s))})))),n.a.createElement(D.a,{container:!0,className:t.root,spacing:2},n.a.createElement(D.a,{item:!0,xs:12,lg:6},n.a.createElement(je.a,{defaultExpanded:!0},n.a.createElement(We.a,{classes:{content:t.summaryRoot}},n.a.createElement(Q.a,{className:t.iconEven},"vpn_key"),n.a.createElement(p.a,{className:t.heading,variant:"h6"},n.a.createElement(d.a,{id:"Applications.Details.Overview.prod.keys.title",defaultMessage:"Production Keys"}))),n.a.createElement(ze.a,{classes:{root:K()({[t.noKeysRoot]:!0})}},n.a.createElement(E.a,{keyType:"PRODUCTION",selectedApp:{appId:a.applicationId,label:a.name,tokenType:a.tokenType,owner:a.owner,hashEnabled:a.hashEnabled},summary:!0})),n.a.createElement(ee.a,null),n.a.createElement(Ke.a,{className:t.actionPanel},n.a.createElement(o.a,{to:b+"/productionkeys/oauth",className:t.button},n.a.createElement(y.a,{size:"small",color:"primary"},n.a.createElement(d.a,{id:"Applications.Details.Overview.show.more",defaultMessage:"Manage >>"})))))),n.a.createElement(D.a,{item:!0,xs:12,lg:6},n.a.createElement(je.a,{defaultExpanded:!0},n.a.createElement(We.a,{classes:{content:t.summaryRoot}},n.a.createElement(Q.a,{className:t.iconEven},"vpn_key"),n.a.createElement(p.a,{className:t.heading,variant:"h6"},n.a.createElement(d.a,{id:"Applications.Details.Overview.sand.keys.title",defaultMessage:"Sandbox Keys"}))),n.a.createElement(ze.a,{classes:{root:K()({[t.noKeysRoot]:!0})}},n.a.createElement(E.a,{keyType:"SANDBOX",selectedApp:{appId:a.applicationId,label:a.name,tokenType:a.tokenType,owner:a.owner,hashEnabled:a.hashEnabled},summary:!0})),n.a.createElement(ee.a,null),n.a.createElement(Ke.a,{className:t.actionPanel},n.a.createElement(o.a,{to:b+"/sandboxkeys/oauth",className:t.button},n.a.createElement(y.a,{size:"small",color:"primary"},n.a.createElement(d.a,{id:"Applications.Details.Overview.show.more",defaultMessage:"Manage >>"}))))))))}));function _e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ve extends i.Component{constructor(e){super(e),_e(this,"handleMenuSelect",e=>{const{history:t,match:a}=this.props;t.push({pathname:"/applications/"+a.params.application_uuid+"/"+e}),this.setState({active:e})}),_e(this,"renderManager",(e,t,a)=>n.a.createElement(F.a,null,"oauth"===a&&n.a.createElement("div",null,n.a.createElement(E.a,{keyType:t,selectedApp:{appId:e.applicationId,label:e.name,tokenType:e.tokenType,owner:e.owner,hashEnabled:e.hashEnabled}})),"apikey"===a&&n.a.createElement("div",null,n.a.createElement(z,{keyType:t,selectedApp:{appId:e.applicationId,label:e.name,tokenType:e.tokenType,owner:e.owner}})))),this.state={application:null,active:"overview"}}componentDidMount(){const{match:e}=this.props;(new u.a).getApplication(e.params.application_uuid).then(e=>{this.setState({application:e.obj})}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})}render(){const{classes:e,match:t,theme:a}=this.props,{notFound:i,application:s}=this.state,l="/applications/"+t.params.application_uuid,c=l+"/overview",{custom:{leftMenu:{rootIconSize:u,rootIconTextVisible:m,rootIconVisible:E,position:y},title:{prefix:v,sufix:x}}}=a;return i?n.a.createElement(g.a,null):s?n.a.createElement(n.a.Fragment,null,n.a.createElement(U.Helmet,null,n.a.createElement("title",null,`${v} ${s.name}${x}`)),n.a.createElement("div",{className:K()(e.LeftMenu,{[e.leftMenuHorizontal]:"horizontal"===y},{[e.leftMenuVerticalLeft]:"vertical-left"===y},{[e.leftMenuVerticalRight]:"vertical-right"===y},"left-menu")},E&&n.a.createElement(o.a,{to:"/applications",className:e.leftLInkMain},n.a.createElement(f.a,{width:u,height:u,icon:"applications"}),m&&n.a.createElement(p.a,{className:e.leftLInkMainText},n.a.createElement(d.a,{id:"Applications.Details.applications.all",defaultMessage:"ALL APPs"}))),n.a.createElement(b.a,{text:n.a.createElement(d.a,{id:"Applications.Details.menu.overview",defaultMessage:"Overview"}),iconText:"overview",route:"overview",to:l+"/overview"}),n.a.createElement(b.a,{text:n.a.createElement(d.a,{id:"Applications.Details.menu.prod.keys",defaultMessage:"Production Keys"}),iconText:"productionkeys",route:"productionkeys",to:l+"/productionkeys/oauth"}),n.a.createElement(b.a,{text:n.a.createElement(d.a,{id:"Applications.Details.menu.oauth.tokens",defaultMessage:"OAuth2 Tokens"}),route:"productionkeys/oauth",to:l+"/productionkeys/oauth",submenu:!0}),n.a.createElement(b.a,{text:n.a.createElement(d.a,{id:"Applications.Details.menu.api.key",defaultMessage:"Api Key"}),route:"productionkeys/apikey",to:l+"/productionkeys/apikey",submenu:!0}),n.a.createElement(b.a,{text:n.a.createElement(d.a,{id:"Applications.Details.menu.sandbox.keys",defaultMessage:"Sandbox Keys"}),iconText:"productionkeys",route:"sandboxkeys",to:l+"/sandboxkeys/oauth"}),n.a.createElement(b.a,{text:n.a.createElement(d.a,{id:"Applications.Details.menu.oauth.tokens",defaultMessage:"OAuth2 Tokens"}),route:"sandboxkeys/oauth",to:l+"/sandboxkeys/oauth",submenu:!0}),n.a.createElement(b.a,{text:n.a.createElement(d.a,{id:"Applications.Details.menu.api.key",defaultMessage:"Api Key"}),route:"sandboxkeys/apikey",to:l+"/sandboxkeys/apikey",submenu:!0}),n.a.createElement(b.a,{text:n.a.createElement(d.a,{id:"Applications.Details.menu.subscriptions",defaultMessage:"Subscriptions"}),iconText:"subscriptions",route:"subscriptions",to:l+"/subscriptions"})),n.a.createElement("div",{className:e.content},n.a.createElement(Le,{applicationId:t.params.application_uuid,innerRef:e=>this.infoBar=e}),n.a.createElement("div",{className:K()({[e.contentLoader]:"horizontal"===y},{[e.contentLoaderRightMenu]:"vertical-right"===y})},n.a.createElement(r.d,null,n.a.createElement(r.a,{exact:!0,from:"/applications/:applicationId",to:c}),n.a.createElement(r.b,{path:"/applications/:applicationId/overview",component:Ue}),n.a.createElement(r.b,{path:"/applications/:applicationId/productionkeys/oauth",component:()=>this.renderManager(s,"PRODUCTION","oauth")}),n.a.createElement(r.b,{path:"/applications/:applicationId/productionkeys/apikey",component:()=>this.renderManager(s,"PRODUCTION","apikey")}),n.a.createElement(r.b,{path:"/applications/:applicationId/sandboxkeys/oauth",component:()=>this.renderManager(s,"SANDBOX","oauth")}),n.a.createElement(r.b,{path:"/applications/:applicationId/sandboxkeys/apikey",component:()=>this.renderManager(s,"SANDBOX","apikey")}),n.a.createElement(r.b,{path:"/applications/:applicationId/subscriptions",component:Ce}),n.a.createElement(r.b,{component:g.a}))))):n.a.createElement(h.a,null)}}Ve.propTypes={classes:l.a.shape({}).isRequired,theme:l.a.shape({}).isRequired,match:l.a.shape({params:l.a.shape({application_uuid:l.a.string.isRequired}).isRequired}).isRequired,history:l.a.shape({push:l.a.func.isRequired}).isRequired};t.default=Object(c.a)(e=>{const{custom:{leftMenu:{width:t,position:a}}}=e,i="vertical-left"===a?t:0,n="vertical-right"===a?t:0,s="horizontal"===a?e.spacing(3):0;return{LeftMenu:{backgroundColor:e.custom.leftMenu.background,backgroundImage:`url(${m.app.context}${e.custom.leftMenu.backgroundImage})`,textAlign:"left",fontFamily:e.typography.fontFamily,position:"absolute",bottom:0,paddingLeft:s},leftMenuHorizontal:{top:e.custom.infoBar.height,width:"100%",overflowX:"auto",height:60,display:"flex",left:0},leftMenuVerticalLeft:{width:e.custom.leftMenu.width,top:0,left:0,overflowY:"auto"},leftMenuVerticalRight:{width:e.custom.leftMenu.width,top:0,right:0,overflowY:"auto"},leftLInkMain:{borderRight:"solid 1px "+e.custom.leftMenu.background,cursor:"pointer",background:e.custom.leftMenu.rootBackground,color:e.palette.getContrastText(e.custom.leftMenu.rootBackground),textDecoration:"none",alignItems:"center",justifyContent:"center",display:"flex",height:e.custom.infoBar.height,textDecoration:"none"},leftLInkMainText:{fontSize:18,color:e.palette.grey[500],textDecoration:"none",paddingLeft:e.spacing(2)},detailsContent:{display:"flex",flex:1},content:{display:"flex",flex:1,flexDirection:"column",marginLeft:i,marginRight:n,paddingBottom:e.spacing(3)},contentLoader:{paddingTop:e.spacing(3)},contentLoaderRightMenu:{paddingRight:e.custom.leftMenu.width}}},{withTheme:!0})(Ve)}}]);
//# sourceMappingURL=ApplicationDetails.bundle.js.map