(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1472:function(e,t,a){"use strict";var n=a(1),s=a.n(n),l=a(180),i=a(1591),r=a(1556),c=a(1523),o=a(1542);t.a=e=>{const{subscriptions:t,handleChanges:a,selectedApplication:n,selectedKeyType:u}=e;return s.a.createElement(s.a.Fragment,null,s.a.createElement(c.a,{display:"flex",justifyContent:"center"},s.a.createElement(i.a,{xs:12,md:3},s.a.createElement(c.a,null,s.a.createElement(o.a,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:s.a.createElement(l.a,{defaultMessage:"Appplications",id:"Apis.Details.ApiConsole.SelectAppPanel.applications"}),value:n,name:"selectedApplication",onChange:a,SelectProps:t,helperText:s.a.createElement(l.a,{defaultMessage:"Please select an application",id:"Apis.Details.ApiConsole.SelectAppPanel.select.an.application"}),margin:"normal",variant:"outlined"},t.map(e=>s.a.createElement(r.a,{value:e.applicationInfo.applicationId,key:e.applicationInfo.applicationId},e.applicationInfo.name))))),s.a.createElement(i.a,{xs:12,md:3},s.a.createElement(c.a,{ml:2},s.a.createElement(o.a,{fullWidth:!0,id:"outlined-select-currency",select:!0,label:s.a.createElement(l.a,{defaultMessage:"Key Type",id:"Apis.Details.ApiConsole.SelectAppPanel.key.type"}),value:u,name:"selectedKeyType",onChange:a,helperText:s.a.createElement(l.a,{defaultMessage:"Please select a key type",id:"Apis.Details.ApiConsole.SelectAppPanel.select.key.type"}),margin:"normal",variant:"outlined"},null!=t&&"UNBLOCKED"===t.find(e=>e.applicationId===n).status&&s.a.createElement(r.a,{value:"PRODUCTION"},s.a.createElement(l.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.production",defaultMessage:"PRODUCTION"})),s.a.createElement(r.a,{value:"SANDBOX"},s.a.createElement(l.a,{id:"Apis.Details.ApiConsole.SelectAppPanel.sandbox",defaultMessage:"SANDBOX"})))))))}},2121:function(e,t,a){var n={"./Range.js":1281,"./file.js":1339,"./getASTNodeAtPosition.js":1338,"./index.js":1309,"./validateWithCustomRules.js":1403};function s(e){var t=l(e);return a(t)}function l(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}s.keys=function(){return Object.keys(n)},s.resolve=l,e.exports=s,s.id=2121},2122:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=2122},2123:function(e,t,a){var n={"./Range.js":[1281],"./file.js":[1339],"./getASTNodeAtPosition.js":[1338],"./index.js":[1309],"./validateWithCustomRules.js":[1403]};function s(e){var t=n[e];return t?Promise.all(t.slice(1).map(a.e)).then((function(){var e=t[0];return a(e)})):Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}s.keys=function(){return Object.keys(n)},s.id=2123,e.exports=s},2124:function(e,t){function a(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=2124},2260:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),l=a(1552),i=a(17),r=a.n(i),c=a(1531),o=a(180),u=a(1414),p=a(22),d=a(1591),m=a(1523),g=a(1569),E=a(1542),h=a(1556),f=a(1530),y=a(1564),b=a(1544),A=a(1614),O=a(1610),v=a(1717),S=a(1535),C=a(1472),T=a(1226),j=a(1197),N=a(256);const P=Object(u.a)(e=>({buttonIcon:{marginRight:10},centerItems:{margin:"auto"},tokenType:{margin:"auto",display:"flex"},inputAdornmentStart:{minWidth:e.spacing(18)},paper:{margin:e.spacing(1),padding:e.spacing(1)},grid:{marginTop:e.spacing(4),marginBottom:e.spacing(4),paddingRight:e.spacing(2),justifyContent:"center"},userNotificationPaper:{padding:e.spacing(2)},titleSub:{marginLeft:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},usernameField:{width:"100%"},passwordField:{width:"100%",marginLeft:e.spacing(1)}}));function k(e){const t=P(),{accessToken:a,setAccessTocken:i,authorizationHeader:r,securitySchemeType:u,setSecuritySchemeType:k,prefix:w,isApiKeyEnabled:R,isBasicAuthEnabled:x,isOAuthEnabled:D,setURLs:L,environmentObject:I,setFound:U,username:B,setUserName:M,password:q,setPassword:F}=e,{api:G}=Object(n.useContext)(j.a),K=p.a.getUser(),[Q,_]=Object(n.useState)(!1),[H,z]=Object(n.useState)(null),[W,X]=Object(n.useState)(""),[Y,J]=Object(n.useState)("PRODUCTION"),$=G.endpointURLs.map(e=>e.environmentName),[V,Z]=Object(n.useState)($[0]),[ee,te]=Object(n.useState)(),ae=G.lifeCycleStatus&&"prototyped"===G.lifeCycleStatus.toLowerCase();Object(n.useEffect)(()=>{const e=G.id,t=new N.a;if(null!=K){t.getSubscriptions(e).then(e=>{const t=e.obj.list.filter(e=>"UNBLOCKED"===e.status||"PROD_ONLY_BLOCKED"===e.status);if(t&&t.length>0){const e=t[0].applicationId;X(e),T.a.get(e).then(e=>e.getKeys()).then(e=>{e.get("SANDBOX")?J("SANDBOX"):e.get("PRODUCTION")&&J("PRODUCTION"),te(e)})}z(t)}).catch(e=>{const{status:t}=e;404===t&&U(!0)})}},[]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(l.a,{className:t.paper},s.a.createElement(d.a,{container:!0,className:t.grid},!ae&&!K&&s.a.createElement(d.a,{item:!0,md:6},s.a.createElement(l.a,{className:t.userNotificationPaper},s.a.createElement(c.a,{variant:"h5",component:"h3"},s.a.createElement(g.a,null,"warning")," ",s.a.createElement(o.a,{id:"notice",defaultMessage:"Notice"})),s.a.createElement(c.a,{component:"p"},s.a.createElement(o.a,{id:"Apis.Details.GraphQLConsole.GraphQLAuthentication.require.access.token",defaultMessage:"You need an access token to try the API. Please log in and subscribe to the API to generate an access token. If you already have an access token, please provide it below."})))),!ae&&s.a.createElement(d.a,{xs:12,md:12,item:!0},s.a.createElement(m.a,{display:"block"},K&&H&&H.length>0&&s.a.createElement(C.a,{subscriptions:H,handleChanges:e=>{const{value:t,name:a}=e.target;if("selectedApplication"===a){const e=T.a.get(t);let a;X(t),null!=H&&"PROD_ONLY_BLOCKED"===H.find(e=>e.applicationId===W).status?(J("SANDBOX"),a="SANDBOX"):a=Y,e.then(e=>e.getKeys()).then(e=>{if(e.get(a)){const{accessToken:t}=e.get(a).token;i(t)}else i("");te(e)})}else if(J(t),ee.get(t)){const{accessToken:e}=ee.get(t).token;i(e)}else i("")},selectedApplication:W,selectedKeyType:Y}),K&&null===H&&s.a.createElement(m.a,{display:"flex",justifyContent:"center"},s.a.createElement(S.a,{size:35})),H&&0===H.length&&s.a.createElement(m.a,{display:"flex",justifyContent:"center"},s.a.createElement(c.a,{variant:"body1",gutterBottom:!0},s.a.createElement(o.a,{id:"Apis.Details.GraphQLConsole.GraphQLAuthentication.please.subscribe.to.application",defaultMessage:"Please subscribe to an application"}))),s.a.createElement(m.a,{display:"flex",justifyContent:"center"},s.a.createElement(d.a,{xs:12,md:6,item:!0},$&&$.length>0&&s.a.createElement(E.a,{fullWidth:!0,select:!0,label:s.a.createElement(o.a,{defaultMessage:"Environment",id:"Apis.Details.GraphQLConsole.GraphQLAuthentication.env"}),value:V,name:"selectedEnvironment",onChange:e=>{const{value:t}=e.target;Z(t);const a=I.find(e=>t===e.environmentName).URLs;L(a)},helperText:s.a.createElement(o.a,{defaultMessage:"Please select an environment",id:"Apis.Details.GraphQLConsole.SelectAppPanel.select.env"}),margin:"normal",variant:"outlined"},$&&$.length>0&&s.a.createElement(h.a,{value:"",disabled:!0},s.a.createElement("em",null,s.a.createElement(o.a,{id:"api.gateways",defaultMessage:"API Gateways"}))),$&&$.map(e=>s.a.createElement(h.a,{value:e,key:e},e))))),s.a.createElement(m.a,{display:"block",justifyContent:"center"},s.a.createElement(d.a,{x:12,md:6,className:t.tokenType,item:!0},"BASIC"===u?s.a.createElement(s.a.Fragment,null,s.a.createElement(E.a,{margin:"normal",variant:"outlined",className:t.usernameField,label:s.a.createElement(o.a,{id:"username",defaultMessage:"Username"}),name:"username",onChange:e=>{const{value:t}=e.target;M(t)},value:B||""}),s.a.createElement(E.a,{margin:"normal",variant:"outlined",className:t.passwordField,label:s.a.createElement(o.a,{id:"password",defaultMessage:"Password"}),name:"password",onChange:e=>{const{value:t}=e.target;F(t)},value:q||""})):s.a.createElement(E.a,{fullWidth:!0,margin:"normal",variant:"outlined",label:s.a.createElement(o.a,{id:"access.token",defaultMessage:"Access Token"}),name:"accessToken",onChange:e=>{const{value:t}=e.target;i(t)},type:Q?"text":"password",value:a||"",helperText:s.a.createElement(o.a,{id:"enter.access.token",defaultMessage:"Enter access Token"}),InputProps:{endAdornment:s.a.createElement(f.a,{position:"end"},s.a.createElement(y.a,{edge:"end","aria-label":"Toggle token visibility",onClick:()=>{_(!Q)}},Q?s.a.createElement(g.a,null,"visibility_off"):s.a.createElement(g.a,null,"visibility"))),startAdornment:s.a.createElement(f.a,{className:t.inputAdornmentStart,position:"start"},`${r}: ${w}`)}})),s.a.createElement(d.a,{x:12,md:6,className:t.centerItems},(R||x||D)&&s.a.createElement(b.a,{component:"fieldset"},s.a.createElement(A.a,{name:"securityScheme",value:u,onChange:e=>{const{value:t}=e.target;k(t)},row:!0},D&&s.a.createElement(O.a,{value:"OAUTH",control:s.a.createElement(v.a,null),label:"Referenced (OAuth)"}),x&&s.a.createElement(O.a,{value:"BASIC",control:s.a.createElement(v.a,null),label:"Basic"}),R&&s.a.createElement(O.a,{value:"API-KEY",control:s.a.createElement(v.a,null),label:"API Key"}))))))))))}k.propTypes={classes:r.a.shape({paper:r.a.string.isRequired,titleSub:r.a.string.isRequired,grid:r.a.string.isRequired,userNotificationPaper:r.a.string.isRequired,root:r.a.string.isRequired,inputAdornmentStart:r.a.string.isRequired,centerItems:r.a.string.isRequired}).isRequired};var w=a(2056),R=a.n(w),x=a(2159),D=a.n(x),L=(a(2160),a(2162)),I=a.n(L),U=a(259);const{buildSchema:B}=a(1201);function M(e){const{accessToken:t,authorizationHeader:a,URLs:l,securitySchemeType:i,username:r,password:c}=e,{api:u}=Object(n.useContext)(j.a),[p,d]=Object(n.useState)(null),[g,h]=Object(n.useState)(""),[f,y]=Object(n.useState)(!1),b=Object(n.useRef)(null);Object(n.useEffect)(()=>{const e=u.id;(new N.a).getGraphQLSchemaByAPIId(e).then(e=>{const t=B(e.data);d(t)})},[]);const A={},O=()=>{const e=!f;A.isExplorerOpen=e,y(e)};return null==={schema:p}?s.a.createElement(U.a,null):s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,{width:"30%",m:1},s.a.createElement(E.a,{label:s.a.createElement(o.a,{defaultMessage:"Gateway URLs",id:"Apis.Details.GraphQLConsole.GraphQLUI.URLs"}),value:l.https,name:"selectedURL",fullWidth:!0,margin:"normal",variant:"outlined",InputProps:l.https})),s.a.createElement("div",{styles:{width:"100%"}},s.a.createElement(m.a,{display:"flex"},s.a.createElement(m.a,{display:"flex"},s.a.createElement(I.a,{schema:p,query:g,onEdit:h,explorerIsOpen:f,onToggleExplorer:O})),s.a.createElement(m.a,{display:"flex",height:"800px",flexGrow:1},s.a.createElement(R.a,{ref:b,fetcher:function(e){let n;if("apikey"===a)n=t;else if("BASIC"===i){n="Basic "+btoa(r+":"+c)}else n="Bearer "+t;return D()(l.https,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",[a]:n},body:JSON.stringify(e)}).then(e=>e.json())},schema:p,query:g,onEditQuery:h},s.a.createElement(R.a.Toolbar,null,s.a.createElement(R.a.Button,{onClick:()=>b.current.handlePrettifyQuery(),label:"Prettify",title:"Prettify Query (Shift-Ctrl-P)"}),s.a.createElement(R.a.Button,{onClick:()=>b.current.handleToggleHistory(),label:"History",title:"Show History"}),s.a.createElement(R.a.Button,{onClick:()=>y(!f),label:"Explorer",title:"Toggle Explorer"})))))))}M.propTypes={classes:r.a.shape({paper:r.a.string.isRequired}).isRequired},a.d(t,"default",(function(){return F}));const q=Object(u.a)(e=>({paper:{margin:e.spacing(1),padding:e.spacing(1)},titleSub:{marginLeft:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}}));function F(){const e=q(),{api:t}=Object(n.useContext)(j.a),a=t.endpointURLs,[i,r]=Object(n.useState)(a[0].URLs),[u,p]=Object(n.useState)(""),[d,m]=Object(n.useState)("OAUTH"),[g,E]=Object(n.useState)(!1),[h,f]=Object(n.useState)(""),[y,b]=Object(n.useState)("");if(null==t)return s.a.createElement(U.a,null);if(g)return"API Not found !";let A=!1,O=!1,v=!1,S=t.authorizationHeader?t.authorizationHeader:"Authorization",C="Bearer";return t&&t.securityScheme&&(A=t.securityScheme.includes("api_key"),O=t.securityScheme.includes("basic_auth"),v=t.securityScheme.includes("oauth2"),A&&"API-KEY"===d&&(S="apikey",C="")),s.a.createElement(s.a.Fragment,null,s.a.createElement(c.a,{variant:"h4",className:e.titleSub},s.a.createElement(o.a,{id:"Apis.Details.GraphQLConsole.GraphQLConsole.title",defaultMessage:"Try Out"})),s.a.createElement(k,{api:t,securitySchemeType:d,setSecuritySchemeType:m,username:h,setUserName:f,password:y,setPassword:b,prefix:C,isApiKeyEnabled:A,isOAuthEnabled:v,isBasicAuthEnabled:O,accessToken:u,setAccessTocken:p,authorizationHeader:S,setURLs:r,environmentObject:a,setFound:E}),s.a.createElement(l.a,{className:e.paper},s.a.createElement(M,{accessToken:u,authorizationHeader:S,URLs:i,username:h,password:y,securitySchemeType:d})))}F.propTypes={classes:r.a.shape({paper:r.a.string.isRequired,titleSub:r.a.string.isRequired,root:r.a.string.isRequired}).isRequired}}}]);
//# sourceMappingURL=GraphQLConsole.bundle.js.map