(window.webpackJsonp=window.webpackJsonp||[]).push([[14,20],{1197:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(1);const i=a.n(n).a.createContext({active:"overview",handleMenuSelect:()=>{},api:null,applications:null,subscribedApplications:[],applicationsAvailable:[],updateSubscriptionData:()=>{}})},1273:function(e,t,a){"use strict";var n=a(1),i=a.n(n),s=a(17),r=a.n(s),o=a(1182),l=a(1445),c=a.n(l),p=a(2247),d=a(1196),u=a(256),m=a(22),g=a(1377),h=a(2246);class b extends i.a.Component{constructor(e){super(e),this.state={avgRating:0,userRating:0,count:0,total:0},this.getApiRating=this.getApiRating.bind(this),this.removeUserRating=this.removeUserRating.bind(this),this.doRate=this.doRate.bind(this)}componentDidUpdate(e){this.props.ratingUpdate!==e.ratingUpdate&&this.getApiRating()}componentDidMount(){this.getApiRating()}getApiRating(){const{apiId:e,setRatingUpdate:t}=this.props,a=m.a.getUser(),n=new u.a;if(null!=a){n.getRatingFromUser(e,null).then(e=>{this.setState({avgRating:e.body.avgRating,userRating:e.body.userRating,count:e.body.count,total:e.body.pagination.total}),t&&t({avgRating:e.body.avgRating,count:e.body.count,total:e.body.pagination.total})})}}doRate(e){const{apiId:t}=this.props,a={rating:e};(new u.a).addRating(t,a).then(()=>{this.getApiRating()}).catch(e=>{d.a.error("Error occured while adding ratings")})}removeUserRating(){const{apiId:e,setRatingUpdate:t}=this.props;(new u.a).removeRatingOfUser(e,null).then(()=>{this.getApiRating(),t()}).catch(e=>{d.a.error("Error occured while removing ratings")})}render(){const{avgRating:e,userRating:t,count:a,total:n}=this.state,{classes:s,isEditable:r,showSummary:o,apiRating:l}=this.props,d=parseFloat(l);return i.a.createElement(i.a.Fragment,null,o?i.a.createElement(g.a,{avgRating:e,reviewCount:n,returnCount:a}):i.a.createElement(i.a.Fragment,null,r?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:s.userRating},[1,2,3,4,5].map(e=>i.a.createElement(p.a,{key:e,className:t>=e?s.starRate:s.noStarRate,onClick:()=>this.doRate(e)})),i.a.createElement(c.a,{className:s.removeRating,onClick:()=>this.removeUserRating()}))):i.a.createElement(i.a.Fragment,null,i.a.createElement(h.a,{name:"half-rating",value:d,precision:.1,readOnly:!0}))))}}b.defaultProps={apiRating:0,ratingUpdate:0,setRatingUpdate:()=>{}},b.propTypes={classes:r.a.shape({}).isRequired,theme:r.a.shape({}).isRequired,apiId:r.a.string.isRequired,isEditable:r.a.bool.isRequired,showSummary:r.a.bool.isRequired,apiRating:r.a.oneOfType([r.a.string,r.a.number]),ratingUpdate:r.a.number,setRatingUpdate:r.a.func},t.a=Object(o.a)(e=>({starRate:{fontSize:30,color:e.custom.infoBar.starColor},noStarRate:{fontSize:30,color:e.palette.grey.A200},removeRating:{fontSize:20,color:"black"},userRating:{display:"flex",justifyContent:"flex-start",alignItems:"center",cursor:"pointer"}}),{withTheme:!0})(b)},1282:function(e,t,a){"use strict";var n=a(1),i=a.n(n),s=a(17),r=a.n(s),o=a(1182),l=a(1569),c=a(1174),p=a.n(c);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function u(e){return("0x"+e.substring(7,9))/256}function m(e){return e.substring(0,7)}function g(e){const{classes:t,colorPair:a,width:n,height:s}=e,r={width:50,height:50},o=[];for(let e=0;e<=4;e++)for(let t=0;t<=4;t++){const n="#"+(a.sub-(37*e-21*t)).toString(16);o.push(i.a.createElement("rect",d({key:e+"_"+t},r,{fill:m(n),fillOpacity:u(n),x:200-54*e,y:54*t})))}const l="#"+a.prime.toString(16);return i.a.createElement("svg",{width:n,height:s,className:t.svgImage},i.a.createElement("rect",d({},{width:250,height:200},{fill:m(l),fillOpacity:u(l)})),o)}g.propTypes={classes:r.a.shape({svgImage:r.a.string}).isRequired,width:r.a.number.isRequired,height:r.a.number.isRequired,colorPair:r.a.shape({sub:r.a.number,prime:r.a.number}).isRequired};var h=Object(o.a)({svgImage:{cursor:"pointer",objectFit:"cover"}})(g);class b extends n.PureComponent{render(){const{classes:e,api:t,width:a,height:n,theme:s,fixedIcon:r}=this.props,{category:o,key:c,color:d,backgroundIndex:u}=r;let m,g,b,f,E=t;"object"==typeof t&&(E=t.name);const y=s.custom.thumbnail.backgrounds;if(c&&o)f=c;else if("DOC"===t.type)f=s.custom.thumbnail.document.icon;else{m=p.a.categories[0].icons.length;const e=(E.charCodeAt(0)+E.charCodeAt(E.length-1))%m;f=p.a.categories[0].icons[e].id}return g="DOC"===t.type?s.custom.thumbnail.document.backgrounds:u&&y.length>u?y[u]:y[b=(E.charCodeAt(0)+E.charCodeAt(E.length-1))%y.length],i.a.createElement("div",{className:e.iconWrapper,style:{width:a}},i.a.createElement(l.a,{className:e.icon,style:{fontSize:n+"px",color:d}},f),i.a.createElement(h,{width:a,height:n,colorPair:g}))}}b.defaultProps={height:190,width:250,fixedIcon:{category:null,key:null,color:"",backgroundIndex:null}},b.propTypes={classes:r.a.shape({}).isRequired,height:r.a.number,width:r.a.number,fixedIcon:r.a.shape({}),api:r.a.shape({}).isRequired,theme:r.a.shape({}).isRequired};t.a=Object(o.a)({icon:{},iconWrapper:{position:"relative",display:"flex",justifyContent:"center","& span":{position:"absolute",right:"auto"}}},{withTheme:!0})(b)},1377:function(e,t,a){"use strict";var n=a(1),i=a.n(n),s=a(2247),r=a(1569),o=a(1182),l=a(1531),c=a(180);t.a=Object(o.a)(e=>{return{starRate:{color:e.custom.infoBar.starColor||e.palette.getContrastText(e.custom.infoBar.background),"&.material-icons":{fontSize:40}},userRating:{display:"flex",justifyContent:"flex-start",alignItems:"center"}}},{withTheme:!0})((function(e){const{classes:t,theme:a,avgRating:n,reviewCount:o,returnCount:p}=e;return i.a.createElement(i.a.Fragment,null,p>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(r.a,{className:t.starRate},"star_border"),i.a.createElement("div",{className:t.ratingSummary},i.a.createElement("div",{className:t.userRating},i.a.createElement(l.a,{variant:"body1"},n),i.a.createElement(l.a,{variant:"body1"},"/5.0")),i.a.createElement(l.a,{variant:"body1",gutterBottom:!0,align:"left"},o," ",1===o?i.a.createElement(c.a,{defaultMessage:"user",id:"Apis.Listing.StarRatingBar.user"}):i.a.createElement(c.a,{defaultMessage:"users",id:"Apis.Listing.StarRatingBar.users"})))):i.a.createElement(i.a.Fragment,null,i.a.createElement(s.a,{className:t.starRate,style:{color:a.palette.grey.A200}}),i.a.createElement("div",{className:t.ratingSummary},i.a.createElement(l.a,{variant:"caption",gutterBottom:!0,align:"left"},i.a.createElement(c.a,{defaultMessage:"Not Rated",id:"Apis.Listing.StarRatingBar.not.rated"})))))}))},1378:function(e,t,a){"use strict";var n=a(1),i=a.n(n),s=a(1531),r=a(1424),o=a(1427),l=a(1426),c=a(1182),p=a(1724),d=a(646),u=a(17),m=a.n(u),g=a(180),h=a(1174),b=a.n(h),f=a(1273),E=a(1282),y=a(256),v=a(1197),w=a(1199),x=a.n(w);const C=window.URL||window.webkitURL;class O extends i.a.Component{constructor(e){super(e),this.state={category:b.a.categories[0].name,selectedIcon:null,color:null,backgroundIndex:null,imageObj:null,isHover:!1,imageLoaded:!1},this.toggleMouseOver=this.toggleMouseOver.bind(this)}componentDidMount(){const{api:e}=this.props;(new y.a).getAPIThumbnail(e.id).then(e=>{if(e&&e.data)if("application/json"===e.headers["content-type"]){const t=JSON.parse(e.data);this.setState({selectedIcon:t.key,category:t.category,color:t.color,backgroundIndex:t.backgroundIndex})}else if(e&&e.data.size>0){const t=C.createObjectURL(e.data);this.setState({imageObj:t})}}).finally(()=>{this.setState({imageLoaded:!0})})}componentWillUnmount(){this.state.thumbnail&&C.revokeObjectURL(this.state.imageObj)}getPathPrefix(){return"/apis/"}toggleMouseOver(e){this.setState({isHover:"mouseover"===e.type})}render(){const{imageObj:e,selectedIcon:t,color:a,backgroundIndex:n,category:c,isHover:u,imageLoaded:m}=this.state,h=this.getPathPrefix(),{isMonetizationEnabled:b}=this.context,y=h+this.props.api.id,{api:v,classes:w,theme:C,customWidth:O,customHeight:T,showInfo:R}=this.props,{custom:{thumbnail:k,social:{showRating:S}}}=C,{name:A,version:M,context:I}=v;let{provider:L}=v;v.businessInformation&&v.businessInformation.businessOwner&&""!==v.businessInformation.businessOwner.trim()&&(L=v.businessInformation.businessOwner),v.lifeCycleStatus||(v.lifeCycleStatus=v.status);const P=O||k.width,N=T||140,D=k.defaultApiImage;let j;return j=m?e?i.a.createElement("img",{height:N,width:P,src:e,alt:"API Thumbnail",className:w.media}):i.a.createElement(E.a,{width:P,height:N,api:v,fixedIcon:{key:t,color:a,backgroundIndex:n,category:c,api:v}}):i.a.createElement("div",{class:"image-load-frame"},i.a.createElement("div",{class:"image-load-animation1"}),i.a.createElement("div",{class:"image-load-animation2"})),i.a.createElement(r.a,{onMouseOver:this.toggleMouseOver,onFocus:this.toggleMouseOver,onMouseOut:this.toggleMouseOver,onBlur:this.toggleMouseOver,raised:u,className:x()("image-thumbnail",w.card)},b&&i.a.createElement("div",{className:w.textblock},v.monetizationLabel),i.a.createElement(o.a,null,i.a.createElement(d.a,{to:y,className:w.suppressLinkStyles},!D&&j,D&&i.a.createElement("img",{src:D,alt:"img"}))),R&&i.a.createElement(l.a,{classes:{root:w.apiDetails}},i.a.createElement(d.a,{to:y,className:w.textWrapper},i.a.createElement(s.a,{className:w.thumbHeader,variant:"h5",gutterBottom:!0,onClick:this.handleRedirectToAPIOverview,title:A},A)),i.a.createElement("div",{className:w.row},i.a.createElement(s.a,{variant:"caption",gutterBottom:!0,align:"left",className:w.thumbBy},i.a.createElement(g.a,{defaultMessage:"By",id:"Apis.Listing.ApiThumb.by"}),i.a.createElement(g.a,{defaultMessage:" : ",id:"Apis.Listing.ApiThumb.by.colon"}),L)),i.a.createElement("div",{className:w.thumbInfo},i.a.createElement("div",{className:w.row},i.a.createElement("div",{className:w.thumbLeft},i.a.createElement(s.a,{variant:"subtitle1"},M),i.a.createElement(s.a,{variant:"caption",gutterBottom:!0,align:"left"},i.a.createElement(g.a,{defaultMessage:"Version",id:"Apis.Listing.ApiThumb.version"})))),i.a.createElement("div",{className:w.row},i.a.createElement("div",{className:w.thumbRight},i.a.createElement(s.a,{variant:"subtitle1",align:"right",className:w.contextBox},I),i.a.createElement(s.a,{variant:"caption",gutterBottom:!0,align:"right",className:w.context},i.a.createElement(g.a,{defaultMessage:"Context",id:"Apis.Listing.ApiThumb.context"}))))),i.a.createElement("div",{className:w.thumbInfo},S&&i.a.createElement("div",{className:w.thumbLeftAction},i.a.createElement(s.a,{variant:"subtitle1",gutterBottom:!0,align:"left",className:x()("api-thumb-rating",w.ratingWrapper)},i.a.createElement(f.a,{apiRating:v.avgRating,apiId:v.id,isEditable:!1,showSummary:!1}))),i.a.createElement("div",{className:w.thumbRight},i.a.createElement(s.a,{variant:"subtitle1",gutterBottom:!0,align:"right",className:w.chipWrapper},("GRAPHQL"===v.type||"GRAPHQL"===v.transportType)&&i.a.createElement(p.a,{label:void 0===v.transportType?v.type:v.transportType,color:"primary"}),"PROTOTYPED"===v.lifeCycleStatus&&i.a.createElement(p.a,{label:"APIProduct"===v.apiType?v.state:v.lifeCycleStatus,color:"default"}))))))}}O.defaultProps={customWidth:null,customHeight:null,showInfo:!0},O.propTypes={classes:m.a.shape({}).isRequired,theme:m.a.shape({}).isRequired,customWidth:m.a.number,customHeight:m.a.number,showInfo:m.a.bool},O.contextType=v.a,t.a=Object(c.a)(e=>({card:{margin:e.spacing(1.5),maxWidth:e.custom.thumbnail.width,transition:"box-shadow 0.3s ease-in-out",position:"relative"},apiDetails:{padding:e.spacing(1),background:e.custom.thumbnail.contentBackgroundColor,padding:e.spacing(1),color:e.palette.getContrastText(e.custom.thumbnail.contentBackgroundColor),"& a":{color:e.palette.getContrastText(e.custom.thumbnail.contentBackgroundColor)}},suppressLinkStyles:{textDecoration:"none",color:e.palette.text.disabled},row:{display:"inline-block"},thumbBy:{"padding-left":"5px"},media:{objectFit:"cover"},thumbContent:{width:e.custom.thumbnail.width-e.spacing(2)},thumbLeft:{alignSelf:"flex-start",flex:1,width:"25%","padding-left":"5px","padding-right":"65px"},thumbLeftAction:{alignSelf:"flex-start",flex:1,width:"25%","padding-left":"5px","padding-right":"10px"},thumbRight:{alignSelf:"flex-end"},thumbInfo:{display:"flex"},thumbHeader:{width:e.custom.thumbnail.width-e.spacing(1),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",margin:0,"padding-left":"5px"},contextBox:{width:parseInt((e.custom.thumbnail.width-e.spacing(1))/2,10),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",margin:0,display:"inline-block",lineHeight:"1em","padding-top":5,"padding-right":5,"padding-bottom":1.5,textAlign:"left"},thumbWrapper:{position:"relative",paddingTop:20,marginRight:e.spacing(2)},deleteIcon:{fill:"red"},textWrapper:{color:e.palette.text.secondary,textDecoration:"none"},imageWrapper:{color:e.custom.thumbnail.iconColor,width:e.custom.thumbnail.width,display:"flex",alignItems:"center",justifyContent:"center"},imageOverlap:{position:"absolute",bottom:1},chipWrapper:{marginTop:"15px"},ratingWrapper:{marginTop:"20px"},textblock:{color:e.palette.text.secondary,position:"absolute",bottom:"35px",right:"10px",background:e.custom.thumbnail.contentBackgroundColor,"padding-left":"10px","padding-right":"10px"}}),{withTheme:!0})(O)},1406:function(e,t,a){"use strict";var n=a(1),i=a.n(n),s=a(17),r=a.n(s),o=a(1414),l=a(1207),c=a(263),p=a(646),d=a(1531),u=a(1554),m=a(1561),g=a(1557),h=a(1559),b=a(1560),f=a(1569),E=a(180),y=a(1182),v=a(1199),w=a.n(v),x=a(15);function C(e){const{tag:t,path:a,classes:n,theme:s,style:r,mainPage:o}=e,l=a+":"+t.value,{tagWise:{thumbnail:{image:c}}}=s.custom,u=t.value.split(s.custom.tagWise.key)[0];return"fixed-left"!==r&&o?i.a.createElement("div",{className:n.thumbWrapper},i.a.createElement(p.a,{to:l,className:n.imageWrapper},i.a.createElement("img",{src:x.app.context+c,className:n.image,alt:""})),i.a.createElement("div",{className:w()(n.thumbContent)},i.a.createElement(p.a,{to:l,className:n.textWrapper},i.a.createElement(d.a,{className:n.thumbHeader,variant:"h4",gutterBottom:!0,title:u},u)))):i.a.createElement(p.a,{to:l,className:n.textWrapper},i.a.createElement(g.a,{button:!0},i.a.createElement(h.a,null,i.a.createElement(f.a,null,"label")),i.a.createElement(b.a,{primary:u})))}C.propTypes={classes:r.a.shape({thumbWrapper:r.a.shape({}).isRequired,imageWrapper:r.a.shape({}).isRequired,thumbContent:r.a.shape({}).isRequired,imageOverlap:r.a.shape({}).isRequired,textWrapper:r.a.shape({}).isRequired,thumbHeader:r.a.shape({}).isRequired,image:r.a.shape({}).isRequired}).isRequired,theme:r.a.shape({custom:r.a.shape({tagWise:r.a.shape({}).isRequired}).isRequired}).isRequired,tag:r.a.shape({value:r.a.shape({split:r.a.func}).isRequired}).isRequired,path:r.a.shape({}).isRequired,style:r.a.string.isRequired};var O=Object(y.a)(e=>({thumbContent:{width:e.custom.tagWise.thumbnail.width-e.spacing(1),backgroundColor:e.palette.background.paper,padding:e.spacing(1)},thumbLeft:{alignSelf:"flex-start",flex:1},thumbRight:{alignSelf:"flex-end"},thumbInfo:{display:"flex"},thumbHeader:{width:e.custom.tagWise.thumbnail.width-e.spacing(1),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",justifyContent:"center",margin:0},contextBox:{width:parseInt(150-e.spacing(.5)),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",margin:0,display:"inline-block",lineHeight:"1em"},thumbWrapper:{position:"relative",paddingTop:20,marginRight:e.spacing(2)},deleteIcon:{fill:"red"},textWrapper:{color:e.custom.tagCloud.leftMenu.color,"& .material-icons":{color:e.custom.tagCloud.leftMenu.color}},image:{width:e.custom.tagWise.thumbnail.width},imageWrapper:{color:e.palette.text.secondary,backgroundColor:e.palette.background.paper,width:e.custom.tagWise.thumbnail.width+e.spacing(1),display:"flex",alignItems:"center",justifyContent:"center"},imageOverlap:{position:"absolute",bottom:1,backgroundColor:e.custom.thumbnail.contentBackgroundColor}}),{withTheme:!0})(C);const T=Object(o.a)(e=>({mainTitle:{paddingTop:10},mainTitleWrapper:{flexGrow:1},listContentWrapper:{padding:`0 ${e.spacing(3)}px`},textWrapper:{color:e.custom.tagCloud.leftMenu.color,"& .material-icons":{color:e.custom.tagCloud.leftMenu.color}},linkTextWrapper:{color:e.palette.primary.main},tagWiseThumbWrapper:{display:"flex"},filterTitle:{fontWeight:200,paddingLeft:e.spacing(2),background:e.custom.tagCloud.leftMenu.titleBackground,color:e.palette.getContrastText(e.custom.tagCloud.leftMenu.titleBackground),height:e.custom.infoBar.height,alignItems:"center",display:"flex"}}));function R(e){const t=T(),a=Object(l.a)(),{custom:{tagWise:{key:n,active:s,style:r,showAllApis:o}}}=(Object(c.g)(),a),{allTags:y,mainPage:v}=e;let w=null;return 0!==y.count&&(null!==y&&(w=y.filter(e=>!0===s&&e.value.split(n).length>1)),w&&w.length),w&&w.length>0?i.a.createElement(i.a.Fragment,null,!v&&i.a.createElement(d.a,{variant:"h6",gutterBottom:!0,className:t.filterTitle},i.a.createElement(E.a,{defaultMessage:"Api Groups",id:"Apis.Listing.TagCloudListingTags.title"})),i.a.createElement(u.a,{component:"nav","aria-label":"main mailbox folders"},Object.keys(w).map(e=>i.a.createElement(O,{key:e,tag:w[e],path:"/apis?offset=0&query=tag",style:r,mainPage:v})),o&&i.a.createElement(i.a.Fragment,null,i.a.createElement(m.a,null),i.a.createElement(p.a,{to:"apis/",className:t.textWrapper},i.a.createElement(g.a,{button:!0},i.a.createElement(h.a,null,i.a.createElement(f.a,null,"label")),i.a.createElement(b.a,{primary:i.a.createElement(E.a,{defaultMessage:"All Apis",id:"Apis.Listing.TagCloudListingTags.allApis"})})))))):i.a.createElement(i.a.Fragment,null,!v&&i.a.createElement(d.a,{variant:"h6",gutterBottom:!0,className:t.filterTitle},i.a.createElement(E.a,{defaultMessage:"Api Groups",id:"Apis.Listing.TagCloudListingTags.title"})),i.a.createElement("div",{className:t.mainTitle},i.a.createElement(d.a,{variant:"subtitle1",gutterBottom:!0,align:"center"},i.a.createElement(E.a,{defaultMessage:"API groups cannot be found",id:"Apis.Listing.TagCloudListingTags.tagsNotFound"})),i.a.createElement(p.a,{to:"apis/",className:t.linkTextWrapper},i.a.createElement(d.a,{variant:"subtitle1",gutterBottom:!0,align:"center"},i.a.createElement(E.a,{defaultMessage:"All Apis",id:"Apis.Listing.TagCloudListingTags.allApis"})))))}R.propTypes={classes:r.a.shape({}).isRequired,theme:r.a.shape({}).isRequired,allTags:r.a.shape({}).isRequired};t.a=R},1621:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return m}));var n=a(1),i=a.n(n),s=a(1414),r=a(1207),o=a(1531),l=a(180),c=a(256),p=a(1406),d=a(1218);const u=Object(s.a)(e=>({appBar:{height:70,background:e.custom.infoBar.background,color:e.palette.getContrastText(e.custom.infoBar.background),borderBottom:"solid 1px "+e.palette.grey.A200,display:"flex",alignItems:"center",justifyContent:"center"},mainIconWrapper:{paddingTop:13,paddingLeft:20,paddingRight:20},mainTitle:{paddingTop:10},mainTitleWrapper:{flexGrow:1},content:{flexGrow:1},listContentWrapper:{padding:`0 ${e.spacing(3)}px`},iconDefault:{color:e.palette.getContrastText(e.custom.infoBar.background)}}));function m(){const e=u(),t=Object(r.a)(),[a,s]=Object(n.useState)(null);Object(n.useEffect)(()=>{(new c.a).getAllTags().then(e=>{s(e.body.list)}).catch(e=>{console.log(e)})},[]);const m=t.palette.getContrastText(t.palette.background.paper);return i.a.createElement("main",{className:e.content},i.a.createElement("div",{className:e.appBar},i.a.createElement("div",{className:e.mainIconWrapper},i.a.createElement(d.a,{strokeColor:m,width:42,height:42,icon:"api"})),i.a.createElement("div",{className:e.mainTitleWrapper},i.a.createElement(o.a,{variant:"h4",className:e.mainTitle},i.a.createElement(l.a,{defaultMessage:"API Groups",id:"Apis.Listing.TagCloudListing.apigroups.main"})))),i.a.createElement("div",{className:e.listContentWrapper},a&&i.a.createElement(p.a,{allTags:a,mainPage:!0})))}},1624:function(e,t,a){"use strict";var n=a(1),i=a.n(n),s=a(1556),r=a(1544),o=a(1591),l=a(1560),c=a(1536),p=a(1545),d=a(1531),u=a(1722),m=a(1182),g=a(17),h=a.n(g),b=a(1555),f=a(180),E=a(1199),y=a.n(E);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const C=e=>{const[t,a]=Object(n.useState)(""),[m,g]=Object(n.useState)(""),[h,E]=Object(n.useState)([]),{classes:v,throttlingPolicyList:x,applicationsAvailable:C,subscriptionRequest:O,updateSubscriptionRequest:T,renderSmall:R}=e;Object(n.useEffect)(()=>{x&&x[0]&&g(x[0].tierName)},[x]),Object(n.useEffect)(()=>{if(C&&C[0]){E(C),a(C[0].value),w({},O).applicationId=C[0].value}},[C]);const k=(e,t)=>{const n=w({},O),{target:i}=t;switch(e){case"application":n.applicationId=i.value,a(i.value);break;case"throttlingPolicy":n.throttlingPolicy=i.value,g(i.value)}T(n)};return i.a.createElement(o.a,{container:!0,className:y()(v.subscribeRoot,{[v.subscribeRootSmall]:R})},i.a.createElement(o.a,{item:!0,xs:12,md:R?12:6},t&&i.a.createElement(r.a,{className:y()(v.FormControl,{[v.smallDisplay]:R})},i.a.createElement(p.a,{shrink:!0,htmlFor:"age-label-placeholder",className:v.quotaHelp},i.a.createElement(f.a,{id:"Shared.AppsAndKeys.SubscribeToApi.application",defaultMessage:"Application"})),i.a.createElement(u.a,{value:t,onChange:e=>k("application",e),input:i.a.createElement(c.a,{name:"appSelected",id:"app-label-placeholder"}),displayEmpty:!0,name:"appSelected",className:v.selectEmpty},h.map(e=>i.a.createElement(s.a,{value:e.value,key:e.value},e.label))),i.a.createElement(b.a,null,i.a.createElement(f.a,{id:"Shared.AppsAndKeys.SubscribeToApi.select.an.application.to.subscribe",defaultMessage:"Select an Application to subscribe"}))),x&&i.a.createElement(r.a,{className:y()(v.FormControl,v.smallDisplayFix,{[v.smallDisplay]:R,[v.FormControlOdd]:!R})},i.a.createElement(p.a,{shrink:!0,htmlFor:"policy-label-placeholder",className:v.quotaHelp},i.a.createElement(f.a,{id:"Shared.AppsAndKeys.SubscribeToApi.throttling.policy",defaultMessage:"Throttling Policy"})),i.a.createElement(u.a,{value:m,onChange:e=>k("throttlingPolicy",e),input:i.a.createElement(c.a,{name:"policySelected",id:"policy-label-placeholder"}),displayEmpty:!0,name:"policySelected",className:v.selectEmpty},x.map(e=>i.a.createElement(s.a,{value:e.tierName,key:e.tierName},"COMMERCIAL"===e.tierPlan?i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{classes:{root:v.selectMenuRoot},primary:e.tierName,secondary:e.monetizationAttributes.pricePerRequest?i.a.createElement(d.a,null,e.monetizationAttributes.pricePerRequest," ",e.monetizationAttributes.currencyType," per Request"):i.a.createElement(d.a,null,e.monetizationAttributes.fixedPrice," ",e.monetizationAttributes.currencyType," per ",e.monetizationAttributes.billingCycle)})):i.a.createElement(l.a,{primary:e.tierName})))),i.a.createElement(b.a,null,i.a.createElement(f.a,{id:"Shared.AppsAndKeys.SubscribeToApi.available.policies",defaultMessage:"Available Policies -"})," ",x.map((e,t)=>i.a.createElement("span",{key:e.tierName},e.tierName,t!==x.length-1&&i.a.createElement("span",null,",")))))))};C.propTypes={classes:h.a.shape({FormControl:h.a.string,quotaHelp:h.a.string,selectEmpty:h.a.string,FormControlOdd:h.a.string,subscribeRoot:h.a.string,subscribeRootSmall:h.a.string,smallDisplayFix:h.a.string,selectMenuRoot:h.a.string,smallDisplay:h.a.string}).isRequired,applicationsAvailable:h.a.arrayOf(h.a.shape({value:h.a.string,label:h.a.string})).isRequired,throttlingPolicyList:h.a.arrayOf(h.a.shape({})).isRequired,subscriptionRequest:h.a.shape({}).isRequired,updateSubscriptionRequest:h.a.func.isRequired,renderSmall:h.a.bool},C.defaultProps={renderSmall:!1},t.a=Object(m.a)(e=>({titleBar:{display:"flex",justifyContent:"space-between",borderBottomWidth:"1px",borderBottomStyle:"solid",borderColor:e.palette.text.secondary,marginBottom:20},buttonLeft:{alignSelf:"flex-start",display:"flex"},buttonRight:{alignSelf:"flex-end",display:"flex",marginLeft:20},title:{display:"inline-block",marginLeft:20},buttonsWrapper:{marginTop:40},legend:{marginBottom:0,borderBottomStyle:"none",marginTop:20,fontSize:12},inputText:{marginTop:20},buttonRightLink:{textDecoration:"none"},FormControl:{padding:e.spacing(2),width:"100%"},FormControlOdd:{backgroundColor:e.palette.background.paper},quotaHelp:{position:"relative"},subscribeRoot:{paddingLeft:e.spacing(2)},subscribeRootSmall:{marginLeft:`-${e.spacing(4)}px`},smallDisplay:{width:240,"& .MuiInput-formControl":{marginTop:0}},smallDisplayFix:{"& .MuiSelect-selectMenu":{padding:0}},selectMenuRoot:{margin:0,padding:0}}))(C)},2253:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),s=a(263),r=a(1182),o=a(17),l=a.n(o),c=a(1531),p=a(180),d=a(1564),u=a(1569),m=a(1199),g=a.n(m),h=a(1218),b=a(134),f=a(256),E=a(1414),y=a(1207),v=a(1552),w=a(1718),x=a(1594),C=a(646);const O=Object(E.a)(e=>({root:{padding:e.spacing(1,3)},link:{display:"flex",alignItems:"center"},linkNotActive:{display:"flex",alignItems:"center",cursor:"default"},icon:{marginRight:e.spacing(.5),width:20,height:20},selectedTagText:{textIndent:4},apiGroup:{color:e.palette.grey[800]}}));function T(e){const t=O(),a=Object(y.a)(),{selectedTag:n}=e;return i.a.createElement(v.a,{elevation:0,className:t.root},i.a.createElement(w.a,{"aria-label":"breadcrumb"},i.a.createElement(C.a,{to:a.custom.tagWise.active&&"page"===a.custom.tagWise.style?"/api-groups":"/apis",className:t.apiGroup},i.a.createElement(x.a,{color:"inherit",className:t.link},i.a.createElement(u.a,{className:t.icon},"dynamic_feed"),i.a.createElement(p.a,{defaultMessage:"API Groups",id:"Apis.Listing.ApiBreadcrumbs.apigroups.main"}))),n&&i.a.createElement(x.a,{color:"inherit",className:t.linkNotActive},i.a.createElement(h.a,{width:16,height:16,icon:"api"}),i.a.createElement("span",{className:t.selectedTagText},n))))}var R=a(1178),k=a(1179),S=a(1356),A=a.n(S),M=a(181),I=a.n(M),L=a(102),P=a.n(L),N=a(1348),D=a(182),j=a.n(D),B=a(1273);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var U=e=>{return function(t){return i.a.createElement(b.a,null,a=>i.a.createElement(e,W({},a,t)))}},q=a(1238),z=a(1196),V=a(253),_=a(1282),F=a(1378),H=a(1174),G=a.n(H),K=(a(137),a(1197));const $=window.URL||window.webkitURL;class Q extends i.a.Component{constructor(e){super(e),this.state={active:!0,loading:!1,open:!1,overview_link:"",isRedirect:!1,openMoreMenu:!1,category:G.a.categories[0].name,selectedIcon:null,color:null,backgroundIndex:null,imageObj:null}}componentWillUnmount(){this.state.thumbnail&&$.revokeObjectURL(this.state.imageObj)}render(){const{selectedIcon:e,color:t,backgroundIndex:a,category:n}=this.state,{doc:s,classes:r,theme:o}=this.props,{doc:{name:l,sourceType:d,apiName:u,apiVersion:m,id:h,apiUUID:b}}=this.props,f="/apis/"+b+"/documents/"+h+"/details",{thumbnail:E}=o.custom,y=E.width,v=E.defaultApiImage,w=i.a.createElement(_.a,{width:y,height:140,api:s,fixedIcon:{key:e,color:t,backgroundIndex:a,category:n,doc:s}});return i.a.createElement("div",{className:r.thumbWrapper},i.a.createElement(C.a,{to:f,className:r.imageWrapper},!v&&w,v&&i.a.createElement("img",{src:v})),i.a.createElement("div",{className:g()(r.thumbContent,{[r.imageOverlap]:E.contentPictureOverlap})},i.a.createElement(C.a,{to:f,className:r.textWrapper},i.a.createElement(c.a,{className:r.thumbHeader,variant:"h4",gutterBottom:!0,onClick:this.handleRedirectToAPIOverview,title:l},l)),i.a.createElement(c.a,{variant:"caption",gutterBottom:!0,align:"left"},i.a.createElement(p.a,{defaultMessage:"Source Type:",id:"Apis.Listing.DocThumb.sourceType"}),d),i.a.createElement("div",{className:r.thumbInfo},i.a.createElement("div",{className:r.thumbLeft},i.a.createElement(c.a,{variant:"subtitle1"},u),i.a.createElement(c.a,{variant:"caption",gutterBottom:!0,align:"left"},i.a.createElement(p.a,{defaultMessage:"Api Name",id:"Apis.Listing.DocThumb.apiName"}))),i.a.createElement("div",{className:r.thumbRight},i.a.createElement(c.a,{variant:"subtitle1",align:"right",className:r.contextBox},m),i.a.createElement(c.a,{variant:"caption",gutterBottom:!0,align:"right"},i.a.createElement(p.a,{defaultMessage:"Api Version",id:"Apis.Listing.DocThumb.apiVersion"}))))))}}Q.propTypes={classes:l.a.shape({}).isRequired,theme:l.a.shape({}).isRequired},Q.contextType=K.a;var J=Object(r.a)(e=>({thumbContent:{width:e.custom.thumbnail.width-e.spacing(1),backgroundColor:e.palette.background.paper,padding:e.spacing(1),minHeight:130},thumbLeft:{alignSelf:"flex-start",flex:1},thumbRight:{alignSelf:"flex-end"},thumbInfo:{display:"flex"},thumbHeader:{width:e.custom.thumbnail.width-e.spacing(1),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",margin:0},contextBox:{width:parseInt((e.custom.thumbnail.width-e.spacing(1))/2),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",margin:0,display:"inline-block",lineHeight:"1em"},thumbWrapper:{position:"relative",paddingTop:20,marginRight:e.spacing(2)},deleteIcon:{fill:"red"},textWrapper:{color:e.palette.text.secondary,textDecoration:"none"},imageWrapper:{color:e.palette.text.secondary,backgroundColor:e.palette.background.paper,width:e.custom.thumbnail.width+e.spacing(1),display:"flex",alignItems:"center",justifyContent:"center"},imageOverlap:{position:"absolute",bottom:1,backgroundColor:e.custom.thumbnail.contentBackgroundColor}}),{withTheme:!0})(Q),Y=a(1620);function X(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Z extends i.a.Component{constructor(e){super(e),X(this,"getMuiTheme",()=>{const{gridView:e,theme:t}=this.props;let a={},n={overrides:{MUIDataTable:{root:{backgroundColor:"transparent",marginLeft:40,marginBottom:20,width:"100%"},paper:{boxShadow:"none",backgroundColor:"transparent",width:"100%"},tableRoot:{border:"solid 1px #fff","& a":{display:"flex",alignItems:"center"},"& a > div":{paddingRight:10},"& td":{whiteSpace:"nowrap"},"& tr:nth-child(even)":{backgroundColor:t.custom.listView.tableBodyEvenBackgrund,"& td":{color:t.palette.getContrastText(t.custom.listView.tableBodyEvenBackgrund)}},"& tr:nth-child(odd)":{backgroundColor:t.custom.listView.tableBodyOddBackgrund,"& td":{color:t.palette.getContrastText(t.custom.listView.tableBodyOddBackgrund)}},"& th":{backgroundColor:t.custom.listView.tableHeadBackground,color:t.palette.getContrastText(t.custom.listView.tableHeadBackground)}}},MUIDataTableBodyCell:{root:{backgroundColor:"transparent",width:"100%"}}}};e&&(a={overrides:{MUIDataTable:{tableRoot:{display:"block","& tbody":{display:"flex",flexWrap:"wrap",marginLeft:0},"& thead":{display:"none"}},paper:{boxShadow:"none",backgroundColor:"transparent"}}}});const i=I()(V.a,j.a);return n=Object.assign(n,a,i),Object(R.a)(n)}),X(this,"getData",()=>{const{intl:e}=this.props;this.xhrRequest().then(e=>{const{body:t}=e,{list:a,pagination:n}=t,{total:i}=n;this.count=i,this.setState({data:a})}).catch(t=>{const{response:a}=t,{setTenantDomain:n}=this.props;a&&901300===a.body.code?(n("INVALID"),z.a.error(e.formatMessage({defaultMessage:"Invalid tenant domain",id:"Apis.Listing.ApiTableView.invalid.tenant.domain"}))):z.a.error(e.formatMessage({defaultMessage:"Error While Loading APIs",id:"Apis.Listing.ApiTableView.error.loading"}))}).finally(()=>{this.setState({loading:!1})})}),X(this,"xhrRequest",()=>{const{query:e,selectedTag:t}=this.props,{page:a,rowsPerPage:n}=this,{apiType:i}=this.context,s=new f.a,r=new URLSearchParams(e).get("query");if(e&&null!==r){const t=P.a.parse(e);return t.limit=this.rowsPerPage,t.offset=a*n,s.search(t)}return t?s.getAllAPIs({query:"tag:"+t,limit:this.rowsPerPage,offset:a*n}):s.getAllAPIs({limit:this.rowsPerPage,offset:a*n})}),X(this,"changePage",e=>{const{intl:t}=this.props;this.page=e,this.setState({loading:!0}),this.xhrRequest().then(e=>{const{body:t}=e,{list:a}=t;this.setState({data:a})}).catch(e=>{z.a.error(t.formatMessage({defaultMessage:"Error While Loading APIs",id:"Apis.Listing.ApiTableView.error.loading"}))}).finally(()=>{this.setState({loading:!1})})}),this.state={data:null,loading:!0},this.page=0,this.count=100,this.rowsPerPage=10,this.pageType=null}componentDidMount(){this.apiType=this.context.apiType,this.getData()}componentDidUpdate(e){const{query:t,selectedTag:a}=this.props;this.apiType===this.context.apiType&&t===e.query&&e.selectedTag===a||(this.apiType=this.context.apiType,this.getData())}render(){var e=this;const{intl:t,gridView:a,theme:n}=this.props,{custom:{social:{showRating:s}}}=n,{loading:r}=this.state,o=[{name:"id",options:{display:"excluded",filter:!1}},{name:"name",options:{customBodyRender:function(t,a,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;if(a.rowData){const e=s.state.data[a.rowIndex];return i.a.createElement(_.a,{api:e,width:30,height:30})}},sort:!1,filter:!1,display:"excluded"}},{name:"name",label:t.formatMessage({id:"Apis.Listing.ApiTableView.name",defaultMessage:"Name"}),options:{customBodyRender:function(t,a,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;if(a.rowData){const t=s.state.data[a.rowIndex],n=a.rowData[2],r=a.rowData[0],{classes:o}=e.props;if(t)return"DOC"===t.type?i.a.createElement(C.a,{to:"/apis/"+t.apiUUID+"/documents",className:o.apiNameLink},i.a.createElement(u.a,null,"library_books"),i.a.createElement("span",null," ",i.a.createElement(p.a,{id:"Apis.Listing.TableView.TableView.doc.flag",defaultMessage:"[Doc] "})," ",n)):i.a.createElement(C.a,{to:"/apis/"+r+"/overview",className:o.rowImageOverride,className:o.apiNameLink},i.a.createElement(h.a,{width:16,height:16,icon:"api",strokeColor:"#444444"}),i.a.createElement("span",null,n))}},sort:!1,filter:!1}},{name:"version",label:t.formatMessage({id:"Apis.Listing.ApiTableView.version",defaultMessage:"Version"}),options:{sort:!1}},{name:"context",label:t.formatMessage({id:"Apis.Listing.ApiTableView.context",defaultMessage:"Context"}),options:{sort:!1}},{name:"provider",label:t.formatMessage({id:"Apis.Listing.ApiTableView.provider",defaultMessage:"Provider"}),options:{sort:!1}},{name:"type",label:t.formatMessage({id:"Apis.Listing.ApiTableView.type",defaultMessage:"Type"}),options:{sort:!1}},{name:"rating",label:t.formatMessage({id:"Apis.Listing.ApiTableView.rating",defaultMessage:"Rating"}),options:{customBodyRender:function(t,a,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;if(a.rowData){const e=s.state.data[a.rowIndex];if(e&&"DOC"!==e.type){const e=a.rowData[0],t=a.rowData[8];return i.a.createElement(B.a,{apiRating:t,apiId:e,isEditable:!1,showSummary:!1})}}},sort:!1,display:s?"true":"excluded"}},{name:"avgRating",options:{display:"excluded",filter:!1}}],{page:l,count:c,rowsPerPage:d}=this,{data:m}=this.state,g={filterType:"dropdown",responsive:"stacked",serverSide:!0,search:!1,count:c,page:l,onTableChange:(e,t)=>{switch(e){case"changePage":this.changePage(t.page)}},selectableRows:"none",rowsPerPage:d,onChangeRowsPerPage:e=>{const{page:t,count:a}=this;t*e>a&&(this.page=0),this.rowsPerPage=e,this.getData()}};return a?(g.customRowRender=function(t,a,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;const r=s.state.data[a];return r?"DOC"===r.type?i.a.createElement("tr",{key:n},i.a.createElement("td",null,i.a.createElement(J,{doc:r}))):i.a.createElement("tr",{key:n},i.a.createElement("td",null,i.a.createElement(F.a,{api:r}))):i.a.createElement("span",null)},g.title=!1,g.filter=!1,g.print=!1,g.download=!1,g.viewColumns=!1,g.customToolbar=!1):g.filter=!1,0===l&&this.count<=d?g.pagination=!1:g.pagination=!0,r?i.a.createElement(q.a,null):m&&0===m.length||!m?i.a.createElement(Y.a,null):i.a.createElement(k.a,{theme:this.getMuiTheme()},i.a.createElement(A.a,{title:"",data:m,columns:o,options:g}))}}Z.contextType=K.a;var ee=U(Object(p.e)(Object(N.a)(Object(r.a)(e=>({rowImageOverride:{"& .material-icons":{marginTop:5,color:`${e.custom.thumbnail.iconColor} !important`,fontSize:`${e.custom.thumbnail.listViewIconSize}px !important`}},apiNameLink:{display:"flex",alignItems:"center","& span":{marginLeft:e.spacing(1)},color:e.palette.getContrastText(e.custom.listView.tableBodyEvenBackgrund)}}))(Z)))),te=a(1406),ae=a(1554),ne=a(1557),ie=a(1559),se=a(1560),re=a(15),oe=a.n(re);function le(e){const{category:t,path:a,classes:n,theme:s}=e,r=a+":"+t.name,{tagWise:{thumbnail:{image:o}}}=s.custom;return i.a.createElement(C.a,{to:r,className:n.textWrapper},i.a.createElement(ne.a,{button:!0},i.a.createElement(ie.a,null,i.a.createElement(u.a,null,"label")),i.a.createElement(se.a,{primary:t.name})))}le.propTypes={classes:l.a.shape({thumbWrapper:l.a.shape({}).isRequired,imageWrapper:l.a.shape({}).isRequired,thumbContent:l.a.shape({}).isRequired,imageOverlap:l.a.shape({}).isRequired,textWrapper:l.a.shape({}).isRequired,thumbHeader:l.a.shape({}).isRequired,image:l.a.shape({}).isRequired}).isRequired,theme:l.a.shape({custom:l.a.shape({tagWise:l.a.shape({}).isRequired}).isRequired}).isRequired,category:l.a.shape({name:l.a.string.isRequired}).isRequired,path:l.a.shape({}).isRequired,style:l.a.string.isRequired};var ce=Object(r.a)(e=>({thumbContent:{width:e.custom.tagWise.thumbnail.width-e.spacing(1),backgroundColor:e.palette.background.paper,padding:e.spacing(1)},thumbLeft:{alignSelf:"flex-start",flex:1},thumbRight:{alignSelf:"flex-end"},thumbInfo:{display:"flex"},thumbHeader:{width:e.custom.tagWise.thumbnail.width-e.spacing(1),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",justifyContent:"center",margin:0},contextBox:{width:parseInt(150-e.spacing(.5)),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",margin:0,display:"inline-block",lineHeight:"1em"},thumbWrapper:{position:"relative",paddingTop:20,marginRight:e.spacing(2)},deleteIcon:{fill:"red"},textWrapper:{color:e.custom.tagCloud.leftMenu.color,"& .material-icons":{color:e.custom.tagCloud.leftMenu.color}},image:{width:e.custom.tagWise.thumbnail.width},imageWrapper:{color:e.palette.text.secondary,backgroundColor:e.palette.background.paper,width:e.custom.tagWise.thumbnail.width+e.spacing(1),display:"flex",alignItems:"center",justifyContent:"center"},imageOverlap:{position:"absolute",bottom:1,backgroundColor:e.custom.thumbnail.contentBackgroundColor}}),{withTheme:!0})(le);const pe=Object(E.a)(e=>({mainTitle:{paddingTop:10},mainTitleWrapper:{flexGrow:1},listContentWrapper:{padding:`0 ${e.spacing(3)}px`},textWrapper:{color:e.custom.tagCloud.leftMenu.color,"& .material-icons":{color:e.custom.tagCloud.leftMenu.color}},tagWiseThumbWrapper:{display:"flex"},filterTitle:{fontWeight:200,paddingLeft:e.spacing(2),background:e.custom.tagCloud.leftMenu.titleBackground,color:e.palette.getContrastText(e.custom.tagCloud.leftMenu.titleBackground),height:e.custom.infoBar.height,alignItems:"center",display:"flex"}}));function de(e){const t=pe(),a=Object(y.a)(),{custom:{tagWise:{key:n,active:r,style:o,showAllApis:l}}}=(Object(s.g)(),a),{allCategories:d}=e;return d&&d.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{variant:"h6",gutterBottom:!0,className:t.filterTitle},i.a.createElement(p.a,{defaultMessage:"API Categories",id:"Apis.Listing.CategoryListingCategories.title"})),i.a.createElement(ae.a,{component:"nav","aria-label":"main mailbox folders"},Object.keys(d).map(e=>i.a.createElement(ce,{key:e,category:d[e],path:"/apis?offset=0&query=api-category",style:o})))):i.a.createElement("div",{className:t.mainTitle},i.a.createElement(c.a,{variant:"subtitle1",gutterBottom:!0,align:"center"},i.a.createElement(p.a,{defaultMessage:"Categories cannot be found",id:"Apis.Listing.CategoryListingCategories.categoriesNotFound"})))}de.propTypes={classes:l.a.shape({}).isRequired,theme:l.a.shape({}).isRequired,allTags:l.a.shape({}).isRequired};var ue=de,me=a(1796);const ge=Object(E.a)(e=>({clickablePointer:{cursor:"pointer",padding:e.spacing(1)},filterTitle:{fontWeight:200,paddingLeft:e.spacing(2),background:e.custom.tagCloud.leftMenu.titleBackground,color:e.palette.getContrastText(e.custom.tagCloud.leftMenu.titleBackground),height:e.custom.infoBar.height,alignItems:"center",display:"flex"}}));function he(e){const t=ge(),a=Object(y.a)(),{custom:{tagWise:{key:n,active:r},tagCloud:{colorOptions:o}}}=a,l=Object(s.g)(),{allTags:d}=e;let u=null;0!==d.count&&(u=r?d.filter(e=>-1===e.value.search(n)):d);return u&&i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{variant:"h6",gutterBottom:!0,className:t.filterTitle},i.a.createElement(p.a,{defaultMessage:"Tag Cloud",id:"Apis.Listing.ApiTagCloud.title"})),i.a.createElement(me.TagCloud,{minSize:14,maxSize:25,colorOptions:o,tags:u,shuffle:!1,className:t.clickablePointer,onClick:e=>(e=>{const t=`/apis?offset=0&query=tag:${e.value}`;l.push(t)})(e)}))}he.propTypes={classes:l.a.shape({}).isRequired,tag:l.a.shape({}).isRequired,listType:l.a.string.isRequired,apiType:l.a.string.isRequired,allTags:l.a.shape({}).isRequired};var be=he,fe=a(1424),Ee=a(1427),ye=a(1426),ve=a(1724);const we=window.URL||window.webkitURL;class xe extends i.a.Component{constructor(e){super(e),this.state={category:G.a.categories[0].name,selectedIcon:null,color:null,backgroundIndex:null,imageObj:null,isHover:!1},this.toggleMouseOver=this.toggleMouseOver.bind(this)}componentDidMount(){const{api:e}=this.props;(new f.a).getAPIThumbnail(e.id).then(e=>{if(e&&e.data)if("application/json"===e.headers["content-type"]){const t=JSON.parse(e.data);this.setState({selectedIcon:t.key,category:t.category,color:t.color,backgroundIndex:t.backgroundIndex})}else if(e&&e.data.size>0){const t=we.createObjectURL(e.data);this.setState({imageObj:t})}})}componentWillUnmount(){this.state.thumbnail&&we.revokeObjectURL(this.state.imageObj)}getPathPrefix(){return"/apis/"}toggleMouseOver(e){this.setState({isHover:"mouseover"===e.type})}render(){const{imageObj:e,selectedIcon:t,color:a,backgroundIndex:n,category:s,isHover:r}=this.state,o=this.getPathPrefix()+this.props.api.id,{api:l,classes:p,theme:d,customWidth:u,customHeight:m,showInfo:h}=this.props,{thumbnail:b}=d.custom,{name:f,version:E,context:y}=l;let{provider:v}=l;const w=u||b.width,x=m||140,O=b.defaultApiImage;let T;return T=e?i.a.createElement("img",{height:x,width:w,src:e,alt:"API Thumbnail",className:p.media}):i.a.createElement(_.a,{width:w,height:x,api:l,fixedIcon:{key:t,color:a,backgroundIndex:n,category:s,api:l}}),i.a.createElement(fe.a,{onMouseOver:this.toggleMouseOver,onFocus:this.toggleMouseOver,onMouseOut:this.toggleMouseOver,onBlur:this.toggleMouseOver,raised:r,className:g()("image-thumbnail",p.card)},i.a.createElement(Ee.a,null,i.a.createElement(C.a,{to:o,className:p.suppressLinkStyles},!O&&T,O&&i.a.createElement("img",{src:O,alt:"img"}))),h&&i.a.createElement(ye.a,{classes:{root:p.apiDetails}},i.a.createElement(C.a,{to:o,className:p.textWrapper},i.a.createElement(c.a,{className:p.thumbHeader,variant:"h5",gutterBottom:!0,onClick:this.handleRedirectToAPIOverview,title:f},f)),i.a.createElement("div",{className:p.thumbInfo},i.a.createElement("div",{className:p.thumbLeft},i.a.createElement(c.a,{variant:"subtitle1",gutterBottom:!0,align:"left",className:g()("api-thumb-rating",p.ratingWrapper)},i.a.createElement(B.a,{apiRating:l.avgRating,apiId:l.id,isEditable:!1,showSummary:!1}))),i.a.createElement("div",{className:p.thumbRight},i.a.createElement(c.a,{variant:"subtitle1",gutterBottom:!0,align:"right",className:p.chipWrapper},("GRAPHQL"===l.type||"GRAPHQL"===l.transportType)&&i.a.createElement(ve.a,{label:void 0===l.transportType?l.type:l.transportType,color:"primary"}))))))}}xe.defaultProps={customWidth:null,customHeight:null,showInfo:!0},xe.propTypes={classes:l.a.shape({}).isRequired,theme:l.a.shape({}).isRequired,customWidth:l.a.number,customHeight:l.a.number,showInfo:l.a.bool},xe.contextType=K.a;var Ce=Object(r.a)(e=>({card:{margin:1.5*e.spacing.unit,maxWidth:e.custom.thumbnail.width,transition:"box-shadow 0.3s ease-in-out"},apiDetails:{padding:e.spacing.unit,background:e.custom.thumbnail.contentBackgroundColor,padding:e.spacing.unit,color:e.palette.getContrastText(e.custom.thumbnail.contentBackgroundColor),"& a":{color:e.palette.getContrastText(e.custom.thumbnail.contentBackgroundColor)}},suppressLinkStyles:{textDecoration:"none",color:e.palette.text.disabled},row:{display:"inline-block"},thumbBy:{"padding-left":"5px"},media:{objectFit:"cover"},thumbContent:{width:e.custom.thumbnail.width-e.spacing(2)},thumbLeft:{alignSelf:"flex-start",flex:1,width:"25%","padding-left":"5px","padding-right":"65px"},thumbRight:{alignSelf:"flex-end"},thumbInfo:{display:"flex"},thumbHeader:{width:e.custom.thumbnail.width-e.spacing.unit,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",margin:0,"padding-left":"5px"},contextBox:{width:parseInt((e.custom.thumbnail.width-e.spacing.unit)/2,10),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"pointer",margin:0,display:"inline-block",lineHeight:"1em","padding-top":5,"padding-right":5,"padding-bottom":1.5,textAlign:"left"},thumbWrapper:{position:"relative",paddingTop:20,marginRight:2*e.spacing.unit},deleteIcon:{fill:"red"},textWrapper:{color:e.palette.text.secondary,textDecoration:"none"},imageWrapper:{color:e.custom.thumbnail.iconColor,width:e.custom.thumbnail.width,display:"flex",alignItems:"center",justifyContent:"center"},imageOverlap:{position:"absolute",bottom:1},chipWrapper:{marginTop:"15px"},ratingWrapper:{marginTop:"20px"}}),{withTheme:!0})(xe);function Oe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Te extends i.a.Component{constructor(e){super(e),Oe(this,"getMuiTheme",()=>{const{gridView:e,theme:t}=this.props;let a={},n={overrides:{MUIDataTable:{root:{backgroundColor:"transparent",marginLeft:40,marginBottom:20,width:"100%"},paper:{boxShadow:"none",backgroundColor:"transparent",width:"100%"},tableRoot:{border:"solid 1px #fff","& a":{display:"flex",alignItems:"center"},"& a > div":{paddingRight:10},"& td":{whiteSpace:"nowrap"},"& tr:nth-child(even)":{backgroundColor:t.custom.listView.tableBodyEvenBackgrund,"& td":{color:t.palette.getContrastText(t.custom.listView.tableBodyEvenBackgrund)}},"& tr:nth-child(odd)":{backgroundColor:t.custom.listView.tableBodyOddBackgrund,"& td":{color:t.palette.getContrastText(t.custom.listView.tableBodyOddBackgrund)}},"& th":{backgroundColor:t.custom.listView.tableHeadBackground,color:t.palette.getContrastText(t.custom.listView.tableHeadBackground)}}},MUIDataTableBodyCell:{root:{backgroundColor:"transparent",width:"100%"}}}};return e&&(a={overrides:{MUIDataTable:{tableRoot:{display:"block","& tbody":{display:"flex",flexWrap:"wrap",marginLeft:0},"& thead":{display:"none"}},paper:{boxShadow:"none",backgroundColor:"transparent"}}}}),n=Object.assign(n,a,j.a),Object(R.a)(n)}),Oe(this,"getData",()=>{const{intl:e}=this.props;this.xhrRequest().then(e=>{const{body:t}=e,{list:a}=t;this.setState({data:a})}).catch(t=>{const{response:a}=t,{setTenantDomain:n}=this.props;a&&901300===a.body.code?(n("INVALID"),z.a.error(e.formatMessage({defaultMessage:"Invalid tenant domain",id:"Apis.Listing.Recommendations.invalid.tenant.domain"}))):z.a.error(e.formatMessage({defaultMessage:"Error While Loading APIs",id:"Apis.Listing.Recommendations.error.loading"}))}).finally(()=>{this.setState({loading:!1})})}),Oe(this,"xhrRequest",()=>{return(new f.a).getApiRecommendations()}),this.state={data:null,loading:!0}}componentDidMount(){this.getData()}componentDidUpdate(e){const{query:t,selectedTag:a}=this.props;t===e.query&&e.selectedTag===a||this.getData()}render(){var e=this;const{intl:t,gridView:a}=this.props,{loading:n}=this.state,s=[{name:"id",options:{display:"excluded",filter:!1}},{name:"name",options:{customBodyRender:function(t,a,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;if(a.rowData){const e=s.state.data[a.rowIndex];return i.a.createElement(_.a,{api:e,width:30,height:30})}},sort:!1,filter:!1,display:"excluded"}},{name:"name",label:t.formatMessage({id:"Apis.Listing.Recommendations.name",defaultMessage:"Name"}),options:{customBodyRender:function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t.rowData){const n=a.state.data[t.rowIndex],s=t.rowData[2],r=t.rowData[0],{classes:o}=e.props;if(n)return i.a.createElement(C.a,{to:"/apis/"+r+"/overview",className:o.rowImageOverride,className:o.apiNameLink},i.a.createElement(h.a,{width:16,height:16,icon:"api",strokeColor:"#444444"}),i.a.createElement("span",null,s))}},sort:!1,filter:!1}},{name:"rating",label:t.formatMessage({defaultMessage:"Rating",id:"Apis.Listing.Recommendations.rating"}),options:{customBodyRender:function(t,a,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;if(a.rowData){const e=s.state.data[a.rowIndex];if(e&&"DOC"!==e.type){const e=a.rowData[0],t=a.rowData[8];return i.a.createElement(B.a,{apiRating:t,apiId:e,isEditable:!1,showSummary:!1})}}},sort:!1}},{name:"avgRating",options:{display:"excluded",filter:!1}}],{data:r}=this.state,o={filterType:"dropdown",responsive:"stacked",serverSide:!0,search:!1};return a?(o.customRowRender=function(t,a,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;const r=s.state.data[a];return r?i.a.createElement("tr",{key:n},i.a.createElement("td",null,i.a.createElement(Ce,{api:r}))):i.a.createElement("span",null)},o.title=!0,o.filter=!1,o.print=!1,o.download=!1,o.viewColumns=!1,o.customToolbar=!1,o.rowsPerPageOptions=!1,o.pagination=!1):o.filter=!1,n?i.a.createElement(q.a,null):r&&0===r.length||!r?null:i.a.createElement(k.a,{theme:this.getMuiTheme()},i.a.createElement(A.a,{title:"Recommended APIs for you",data:r,columns:s,options:o}))}}Te.contextType=K.a;var Re=U(Object(p.e)(Object(N.a)(Object(r.a)(e=>({rowImageOverride:{"& .material-icons":{marginTop:5,color:`${e.custom.thumbnail.iconColor} !important`,fontSize:`${e.custom.thumbnail.listViewIconSize}px !important`}},apiNameLink:{display:"flex",alignItems:"center","& span":{marginLeft:e.spacing(1)},color:e.palette.getContrastText(e.custom.listView.tableBodyEvenBackgrund)}}))(Te)))),ke=a(22);function Se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ae extends i.a.Component{constructor(e){super(e),Se(this,"setListType",e=>{this.setState({listType:e})}),Se(this,"toggleLeftMenu",()=>{this.setState(e=>({showLeftMenu:!e.showLeftMenu}))}),Se(this,"isMonetizationEnabled",()=>{const e=this.context.settings.monetizationEnabled;this.setState({isMonetizationEnabled:e})}),Se(this,"isRecommendationEnabled",()=>{const e=this.context.settings.recommendationEnabled;this.setState({isRecommendationEnabled:e})}),this.state={listType:e.theme.custom.defaultApiView,allTags:null,showLeftMenu:!1,isMonetizationEnabled:!1,isRecommendationEnabled:!1}}componentDidMount(){const e=new f.a;e.getAllTags().then(e=>{this.setState({allTags:e.body.list})}).catch(e=>{console.log(e)}),e.apiCategories().then(e=>{this.setState({allCategories:e.body.list})}).catch(e=>{console.log(e)}),this.isMonetizationEnabled(),this.isRecommendationEnabled()}render(){const{theme:e,classes:t,location:{search:a}}=this.props,n=ke.a.getUser(),{custom:{tagWise:{key:s,active:r,style:o},tagCloud:{active:l}}}=e,{listType:m,allTags:b,showLeftMenu:f,isMonetizationEnabled:E,allCategories:y,isRecommendationEnabled:v}=this.state,w=e.palette.getContrastText(e.custom.infoBar.background),x=new URLSearchParams(a).get("query");let C=null;if(a&&null!==x&&r&&s){const e=x.split(":");if(e.length>1&&-1!=e[1].search(s)){const t=e[1].split(s);t.length>0&&(C=t[0])}else e.length>1&&"tag"===e[0]&&(C=e[1])}const O=b&&b.length>0&&(l||r),R=y&&y.length>0;return i.a.createElement(i.a.Fragment,null,(R||O)&&f&&i.a.createElement("div",{className:t.LeftMenu},i.a.createElement("div",{className:t.sliderButton,onClick:this.toggleLeftMenu},i.a.createElement(u.a,null,"keyboard_arrow_left")),R&&i.a.createElement(ue,{allCategories:y}),O&&r&&i.a.createElement(te.a,{allTags:b}),O&&l&&i.a.createElement(be,{allTags:b})),(R||O)&&!f&&i.a.createElement("div",{className:t.LeftMenuForSlider},i.a.createElement("div",{className:t.sliderButton,onClick:this.toggleLeftMenu},i.a.createElement(u.a,null,"keyboard_arrow_right")),i.a.createElement("div",{className:t.rotatedText,onClick:this.toggleLeftMenu},i.a.createElement(p.a,{defaultMessage:"Tag Cloud",id:"Apis.Listing.Listing.ApiTagCloud.title"}))),i.a.createElement("main",{className:g()(t.content,{[t.contentWithoutTags]:!(O||R)||!f},{[t.contentWithTagsHidden]:(O||R)&&!f},{[t.contentWithTags]:(O||R)&&f}),id:"commonListing"},i.a.createElement("div",{className:t.appBar,id:"commonListingAppBar"},i.a.createElement("div",{className:t.mainIconWrapper},i.a.createElement(h.a,{strokeColor:w,width:42,height:42,icon:"api"})),i.a.createElement("div",{className:t.mainTitleWrapper,id:"mainTitleWrapper"},i.a.createElement(c.a,{variant:"h4",className:t.mainTitle},i.a.createElement(p.a,{defaultMessage:"APIs",id:"Apis.Listing.Listing.apis.main"}))),i.a.createElement("div",{className:t.buttonRight,id:"listGridWrapper"},i.a.createElement(d.a,{className:t.button,onClick:()=>this.setListType("list")},i.a.createElement(u.a,{className:g()({[t.iconSelected]:"list"===m},{[t.iconDefault]:"grid"===m})},"list")),i.a.createElement(d.a,{className:t.button,onClick:()=>this.setListType("grid")},i.a.createElement(u.a,{className:g()({[t.iconSelected]:"grid"===m},{[t.iconDefault]:"list"===m})},"grid_on")))),r&&b&&b.length>0&&i.a.createElement(T,{selectedTag:C}),i.a.createElement("div",{className:t.listContentWrapper},"grid"===m&&i.a.createElement(K.a.Provider,{value:{isMonetizationEnabled:E}},i.a.createElement(ee,{gridView:!0,query:a})),"list"===m&&i.a.createElement(K.a.Provider,{value:{isMonetizationEnabled:E}},i.a.createElement(ee,{gridView:!1,query:a}))),v&&n&&i.a.createElement("div",null,r&&b&&b.length>0&&i.a.createElement(T,{selectedTag:C}),i.a.createElement("div",{className:t.listContentWrapper},"grid"===m&&i.a.createElement(K.a.Provider,{value:{isRecommendationEnabled:v}},i.a.createElement(Re,{gridView:!0,query:a})),"list"===m&&i.a.createElement(K.a.Provider,{value:{isRecommendationEnabled:v}},i.a.createElement(Re,{gridView:!0,query:a}))))))}}Se(Ae,"contextType",b.c),Ae.propTypes={classes:l.a.shape({}).isRequired,theme:l.a.shape({}).isRequired,location:l.a.shape({search:l.a.string})},Ae.defaultProps={location:l.a.shape({search:""})};var Me=Object(r.a)(e=>({rightIcon:{marginLeft:e.spacing(1)},button:{margin:e.spacing(1),marginBottom:0},buttonRight:{alignSelf:"flex-end",display:"flex"},ListingWrapper:{paddingTop:10,paddingLeft:35,maxWidth:e.custom.contentAreaWidth},appBar:{height:70,background:e.custom.infoBar.background,color:e.palette.getContrastText(e.custom.infoBar.background),borderBottom:"solid 1px "+e.palette.grey.A200,display:"flex",alignItems:"center",justifyContent:"center"},mainIconWrapper:{paddingTop:13,paddingLeft:20,paddingRight:20},mainTitle:{paddingTop:10},mainTitleWrapper:{flexGrow:1},listContentWrapper:{padding:`0 ${e.spacing(3)}px`,display:"flex"},iconDefault:{color:e.palette.getContrastText(e.custom.infoBar.background)},iconSelected:{color:e.custom.infoBar.listGridSelectedColor},content:{flexGrow:1,display:"flex",flex:1,flexDirection:"column",paddingBottom:e.spacing(3)},contentWithTags:{marginLeft:e.custom.tagCloud.leftMenu.width},contentWithoutTags:{marginLeft:0},contentWithTagsHidden:{marginLeft:e.custom.tagCloud.leftMenu.sliderWidth},LeftMenu:{backgroundColor:e.custom.tagCloud.leftMenu.background,color:e.custom.tagCloud.leftMenu.color,textAlign:"left",fontFamily:e.typography.fontFamily,position:"absolute",bottom:0,paddingLeft:0,width:e.custom.tagCloud.leftMenu.width,top:0,left:0,overflowY:"auto"},LeftMenuForSlider:{backgroundColor:e.custom.tagCloud.leftMenu.background,color:e.custom.tagCloud.leftMenu.color,textAlign:"left",fontFamily:e.typography.fontFamily,position:"absolute",bottom:0,paddingLeft:0,width:e.custom.tagCloud.leftMenu.sliderWidth,top:0,left:0,overflowY:"auto",display:"flex"},sliderButton:{fontWeight:200,background:e.custom.tagCloud.leftMenu.sliderBackground,color:e.palette.getContrastText(e.custom.tagCloud.leftMenu.sliderBackground),height:e.custom.infoBar.height,alignItems:"center",display:"flex",position:"absolute",right:0,cursor:"pointer"},rotatedText:{transform:"rotate(270deg)",transformOrigin:"left bottom 0",position:"absolute",whiteSpace:"nowrap",top:2*e.custom.infoBar.height,marginLeft:23,cursor:"pointer"},recommendationsBar:{height:60,background:e.custom.infoBar.background,color:e.palette.getContrastText(e.custom.infoBar.background),borderBottom:"solid 1px "+e.palette.grey.A200,display:"flex",alignItems:"center",justifyContent:"center"}}),{withTheme:!0})(Ae),Ie=a(1621),Le=a(265),Pe=a(1622),Ne=a(1342),De=a(1576),je=a(1428),Be=a(1595),We=a(1597),Ue=a(1598),qe=a(1599),ze=a(1805),Ve=a.n(ze),_e=a(1804),Fe=a.n(_e),He=a(1377),Ge=a(1262),Ke=a(1227),$e=a(1725),Qe=a(1609),Je=a(1608),Ye=a(1446),Xe=a.n(Ye),Ze=a(1591),et=a(1296),tt=a.n(et),at=a(1562),nt=a(1542),it=a(4);class st extends i.a.Component{constructor(e){var t,a,n;super(e),n=e=>{this.setState({[e]:!0});const t=this;setTimeout((function(){t.setState({urlCopied:!1})}),2e3)},(a="onCopy")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.apiClient=new f.a,this.state={urlCopied:!1},this.downloadWSDL=this.downloadWSDL.bind(this),this.onCopy=this.onCopy.bind(this)}downloadWSDL(e,t){const{intl:a}=this.props;this.apiClient.getWsdlClient().downloadWSDLForEnvironment(e,t).then(e=>{it.a.downloadFile(e)}).catch(e=>{0})}downloadSwagger(e,t){this.apiClient.getSwaggerByAPIIdAndEnvironment(e,t).then(e=>{it.a.downloadFile(e)}).catch(e=>{console.log(e),z.a.error(intl.formatMessage({id:"Apis.Details.Environments.download.swagger.error",defaultMessage:"Error downloading the Swagger"}))})}render(){const{api:e}=this.context,{classes:t,intl:a}=this.props,{urlCopied:n}=this.state;return i.a.createElement(Ze.a,{container:!0,spacing:2,item:!0,xs:12},e.endpointURLs.map(s=>i.a.createElement(Ze.a,{key:s,item:!0,xs:12,key:s.environmentName},i.a.createElement($e.a,null,i.a.createElement(Qe.a,{expandIcon:i.a.createElement(u.a,null,"expand_more"),"aria-controls":"panel1a-content",id:"panel1a-header"},i.a.createElement("div",{className:t.iconAligner},"hybrid"===s.environmentType&&i.a.createElement(u.a,{className:t.iconEven},"cloud"),"production"===s.environmentType&&i.a.createElement(u.a,{className:t.iconEven},"check_circle"),"sandbox"===s.environmentType&&i.a.createElement(u.a,{className:t.iconEven},"Build"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(c.a,{className:t.heading},s.environmentName)))),i.a.createElement(Je.a,null,i.a.createElement(Ze.a,{container:!0,item:!0,xs:12,spacing:2},(null!==s.URLs.http||null!==s.URLs.https||null!==s.URLs.ws||null!==s.URLs.wss)&&i.a.createElement(c.a,{className:t.heading},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.gateway.urls",defaultMessage:"Gateway URLs"})),null!==s.URLs.http&&i.a.createElement(Ze.a,{item:!0,xs:12},i.a.createElement(nt.a,{defaultValue:s.URLs.http,id:"bootstrap-input",InputProps:{disableUnderline:!0,readOnly:!0,classes:{root:t.bootstrapRoot,input:t.bootstrapInput}},InputLabelProps:{shrink:!0,className:t.bootstrapFormLabel}}),i.a.createElement(at.a,{title:n?a.formatMessage({defaultMessage:"Copied",id:"Apis.Details.Environments.copied"}):a.formatMessage({defaultMessage:"Copy to clipboard",id:"Apis.Details.Environments.copy.to.clipboard"}),placement:"right",className:t.iconStyle},i.a.createElement(tt.a,{text:s.URLs.http,onCopy:()=>this.onCopy("urlCopied")},i.a.createElement(u.a,{color:"secondary"},"insert_drive_file")))),null!==s.URLs.https&&i.a.createElement(Ze.a,{item:!0,xs:12},i.a.createElement(nt.a,{defaultValue:s.URLs.https,id:"bootstrap-input",InputProps:{disableUnderline:!0,readOnly:!0,classes:{root:t.bootstrapRoot,input:t.bootstrapInput}},InputLabelProps:{shrink:!0,className:t.bootstrapFormLabel}}),i.a.createElement(at.a,{title:n?a.formatMessage({defaultMessage:"Copied",id:"Apis.Details.Environments.copied"}):a.formatMessage({defaultMessage:"Copy to clipboard",id:"Apis.Details.Environments.copy.to.clipboard"}),placement:"right",className:t.iconStyle},i.a.createElement(tt.a,{text:s.URLs.https,onCopy:()=>this.onCopy("urlCopied")},i.a.createElement(u.a,{color:"secondary"},"insert_drive_file")))),null!==s.URLs.ws&&i.a.createElement(Ze.a,{item:!0,xs:12},i.a.createElement(nt.a,{defaultValue:s.URLs.ws,id:"bootstrap-input",InputProps:{disableUnderline:!0,readOnly:!0,classes:{root:t.bootstrapRoot,input:t.bootstrapInput}},InputLabelProps:{shrink:!0,className:t.bootstrapFormLabel}}),i.a.createElement(at.a,{title:n?a.formatMessage({defaultMessage:"Copied",id:"Apis.Details.Environments.copied"}):a.formatMessage({defaultMessage:"Copy to clipboard",id:"Apis.Details.Environments.copy.to.clipboard"}),placement:"right",className:t.iconStyle},i.a.createElement(tt.a,{text:s.URLs.ws,onCopy:()=>this.onCopy("urlCopied")},i.a.createElement(u.a,{color:"secondary"},"insert_drive_file")))),null!==s.URLs.wss&&i.a.createElement(Ze.a,{item:!0,xs:12},i.a.createElement(nt.a,{defaultValue:s.URLs.wss,id:"bootstrap-input",InputProps:{disableUnderline:!0,readOnly:!0,classes:{root:t.bootstrapRoot,input:t.bootstrapInput}},InputLabelProps:{shrink:!0,className:t.bootstrapFormLabel}}),i.a.createElement(at.a,{title:n?a.formatMessage({defaultMessage:"Copied",id:"Apis.Details.Environments.copied"}):a.formatMessage({defaultMessage:"Copy to clipboard",id:"Apis.Details.Environments.copy.to.clipboard"}),placement:"right",className:t.iconStyle},i.a.createElement(tt.a,{text:s.URLs.wss,onCopy:()=>this.onCopy("urlCopied")},i.a.createElement(u.a,{color:"secondary"},"insert_drive_file")))),null!==s.defaultVersionURLs&&(null!==s.defaultVersionURLs.http||null!==s.defaultVersionURLs.https||null!==s.defaultVersionURLs.ws||null!==s.defaultVersionURLs.wss)&&i.a.createElement(c.a,{className:t.heading},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.default.gateway.urls",defaultMessage:"Default Gateway URLs"})),null!==s.defaultVersionURLs&&null!==s.defaultVersionURLs.http&&i.a.createElement(Ze.a,{item:!0,xs:12},i.a.createElement(nt.a,{defaultValue:s.defaultVersionURLs.http,id:"bootstrap-input",InputProps:{disableUnderline:!0,readOnly:!0,classes:{root:t.bootstrapRoot,input:t.bootstrapInput}},InputLabelProps:{shrink:!0,className:t.bootstrapFormLabel}}),i.a.createElement(at.a,{title:n?a.formatMessage({defaultMessage:"Copied",id:"Apis.Details.Environments.copied"}):a.formatMessage({defaultMessage:"Copy to clipboard",id:"Apis.Details.Environments.copy.to.clipboard"}),placement:"right",className:t.iconStyle},i.a.createElement(tt.a,{text:s.defaultVersionURLs.http,onCopy:()=>this.onCopy("urlCopied")},i.a.createElement(u.a,{color:"secondary"},"file_copy")))),null!==s.defaultVersionURLs&&null!==s.defaultVersionURLs.https&&i.a.createElement(Ze.a,{item:!0,xs:12},i.a.createElement(nt.a,{defaultValue:s.defaultVersionURLs.https,id:"bootstrap-input",InputProps:{disableUnderline:!0,readOnly:!0,classes:{root:t.bootstrapRoot,input:t.bootstrapInput}},InputLabelProps:{shrink:!0,className:t.bootstrapFormLabel}}),i.a.createElement(at.a,{title:n?a.formatMessage({defaultMessage:"Copied",id:"Apis.Details.Environments.copied"}):a.formatMessage({defaultMessage:"Copy to clipboard",id:"Apis.Details.Environments.copy.to.clipboard"}),placement:"right",className:t.iconStyle},i.a.createElement(tt.a,{text:s.defaultVersionURLs.https,onCopy:()=>this.onCopy("urlCopied")},i.a.createElement(u.a,{color:"secondary"},"file_copy")))),null!==s.defaultVersionURLs&&null!==s.defaultVersionURLs.ws&&i.a.createElement(Ze.a,{item:!0,xs:12},i.a.createElement(nt.a,{defaultValue:s.defaultVersionURLs.ws,id:"bootstrap-input",InputProps:{disableUnderline:!0,readOnly:!0,classes:{root:t.bootstrapRoot,input:t.bootstrapInput}},InputLabelProps:{shrink:!0,className:t.bootstrapFormLabel}}),i.a.createElement(at.a,{title:n?a.formatMessage({defaultMessage:"Copied",id:"Apis.Details.Environments.copied"}):a.formatMessage({defaultMessage:"Copy to clipboard",id:"Apis.Details.Environments.copy.to.clipboard"}),placement:"right",className:t.iconStyle},i.a.createElement(tt.a,{text:s.defaultVersionURLs.ws,onCopy:()=>this.onCopy("urlCopied")},i.a.createElement(u.a,{color:"secondary"},"file_copy")))),null!==s.defaultVersionURLs&&null!==s.defaultVersionURLs.wss&&i.a.createElement(Ze.a,{item:!0,xs:12},i.a.createElement(nt.a,{defaultValue:s.defaultVersionURLs.wss,id:"bootstrap-input",InputProps:{disableUnderline:!0,readOnly:!0,classes:{root:t.bootstrapRoot,input:t.bootstrapInput}},InputLabelProps:{shrink:!0,className:t.bootstrapFormLabel}}),i.a.createElement(at.a,{title:n?a.formatMessage({defaultMessage:"Copied",id:"Apis.Details.Environments.copied"}):a.formatMessage({defaultMessage:"Copy to clipboard",id:"Apis.Details.Environments.copy.to.clipboard"}),placement:"right",className:t.iconStyle},i.a.createElement(tt.a,{text:s.defaultVersionURLs.wss,onCopy:()=>this.onCopy("urlCopied")},i.a.createElement(u.a,{color:"secondary"},"file_copy")))),"SOAP"===e.type&&i.a.createElement(De.a,{size:"small",onClick:()=>this.downloadWSDL(e.id,s.environmentName)},i.a.createElement(Xe.a,{className:t.buttonIcon}),i.a.createElement(p.a,{id:"Apis.Details.Environments.download.wsdl",defaultMessage:"WSDL"})),("HTTP"===e.type||"SOAPTOREST"===e.type)&&i.a.createElement(De.a,{size:"small",onClick:()=>this.downloadSwagger(e.id,s.environmentName)},i.a.createElement(Xe.a,{className:t.buttonIcon}),i.a.createElement(p.a,{id:"Apis.Details.Environments.download.swagger",defaultMessage:"Swagger"}))))))))}}st.propTypes={classes:l.a.object.isRequired,intl:l.a.shape({}).isRequired},st.contextType=K.a;var rt=Object(p.e)(Object(r.a)(e=>({buttonIcon:{marginRight:10},iconAligner:{display:"flex",justifyContent:"flex-start",alignItems:"center"},iconEven:{color:e.palette.secondary.light,width:e.spacing(3)},iconOdd:{color:e.palette.secondary.main,width:e.spacing(3)},iconTextWrapper:{display:"inline-block",paddingLeft:20},bootstrapRoot:{padding:0,"label + &":{marginTop:e.spacing(3)}},bootstrapInput:{borderRadius:4,backgroundColor:e.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",width:350,transition:e.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}},iconStyle:{cursor:"grab"}}))(st));class ot extends i.a.Component{constructor(e){var t,a,n;super(e),n=e=>{this.setState({[e]:!0});const t=this;setTimeout((function(){t.setState({urlCopied:!1})}),2e3)},(a="onCopy")in(t=this)?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,this.apiClient=new f.a,this.state={urlCopied:!1}}downloadSwagger(e,t){this.apiClient.getSwaggerByAPIIdAndLabel(e,t).then(e=>{it.a.downloadFile(e)}).catch(e=>{console.log(e),Alert.error(intl.formatMessage({id:"Apis.Details.Environments.download.wsdl.error",defaultMessage:"Error downloading the Swagger"}))})}render(){const{api:e}=this.context,{classes:t,intl:a}=this.props,{urlCopied:n}=this.state;return i.a.createElement(Ze.a,{container:!0,spacing:2,item:!0,xs:12},e.labels.map(s=>i.a.createElement(Ze.a,{key:s,item:!0,xs:12},i.a.createElement($e.a,null,i.a.createElement(Qe.a,{expandIcon:i.a.createElement(u.a,null,"expand_more"),"aria-controls":"panel1a-content",id:"panel1a-header"},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(u.a,{className:t.iconEven},"label"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(c.a,{className:t.heading},s.name)))),i.a.createElement(Je.a,null,i.a.createElement(Ze.a,{container:!0,item:!0,xs:12,spacing:2},i.a.createElement(c.a,{className:t.heading},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.microgateway.urls",defaultMessage:"Microgateway URLs"})),s.accessUrls.map(e=>i.a.createElement(Ze.a,{item:!0,xs:12,key:e},i.a.createElement(nt.a,{defaultValue:e,id:"bootstrap-input",InputProps:{disableUnderline:!0,readOnly:!0,classes:{root:t.bootstrapRoot,input:t.bootstrapInput}},InputLabelProps:{shrink:!0,className:t.bootstrapFormLabel}}),i.a.createElement(at.a,{title:n?a.formatMessage({defaultMessage:"Copied",id:"Apis.Details.Labels.copied"}):a.formatMessage({defaultMessage:"Copy to clipboard",id:"Apis.Details.Labels.copy.to.clipboard"}),placement:"right",className:t.iconStyle},i.a.createElement(tt.a,{text:e,onCopy:()=>this.onCopy("urlCopied")},i.a.createElement(u.a,{color:"secondary"},"insert_drive_file"))))),("HTTP"===e.type||"SOAPTOREST"===e.type)&&i.a.createElement(De.a,{size:"small",onClick:()=>this.downloadSwagger(e.id,s.name)},i.a.createElement(Xe.a,{className:t.buttonIcon}),i.a.createElement(p.a,{id:"Apis.Details.Environments.download.swagger",defaultMessage:"Swagger"}))))))))}}ot.propTypes={classes:l.a.object.isRequired},ot.contextType=K.a;var lt=Object(p.e)(Object(r.a)(e=>({iconAligner:{display:"flex",justifyContent:"flex-start",alignItems:"center"},iconEven:{color:e.palette.secondary.light,width:e.spacing(3)},iconTextWrapper:{display:"inline-block",paddingLeft:20},bootstrapRoot:{padding:0,"label + &":{marginTop:e.spacing(3)}},bootstrapInput:{borderRadius:4,backgroundColor:e.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",width:350,transition:e.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}},buttonIcon:{marginRight:10},iconStyle:{cursor:"grab"}}))(ot));function ct(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class pt extends i.a.Component{constructor(e){super(e),ct(this,"ditectCurrentMenu",e=>{const{pathname:t}=e,a=new RegExp("/overview$","g"),n=new RegExp("/overview/","g");t.match(a)||t.match(n)?this.setState({showOverview:!0}):this.setState({showOverview:!1})}),ct(this,"toggleOverview",e=>{"boolean"==typeof e?this.setState({showOverview:e}):this.setState(e=>({showOverview:!e.showOverview}))}),this.state={api:null,applications:null,policies:null,dropDownApplications:null,dropDownPolicies:null,notFound:!1,tabValue:"Social Sites",comment:"",commentList:null,showOverview:!0,checked:!1,avgRating:0,total:0,count:0},this.getSchema=this.getSchema.bind(this),this.getProvider=this.getProvider.bind(this),this.setRatingUpdate=this.setRatingUpdate.bind(this)}componentDidMount(){const{history:e}=this.props;this.ditectCurrentMenu(e.location),e.listen(e=>{this.ditectCurrentMenu(e)})}getProvider(e){let{provider:t}=e;return e.businessInformation&&e.businessInformation.businessOwner&&""!==e.businessInformation.businessOwner.trim()&&(t=e.businessInformation.businessOwner),t}getSchema(){const e=new f.a,{api:t}=this.context;e.getGraphQLSchemaByAPIId(t.id).then(e=>{const a=window.URL||window.webkitURL,n=new Blob([e.data]),i=a.createObjectURL(n),s=document.createElement("a");s.href=i,s.download=this.getProvider(t)+"-"+t.name+"-"+t.version+".graphql",s.click(),a.revokeObjectURL(i)})}setRatingUpdate(e){if(e){const{avgRating:t,total:a,count:n}=e;this.setState({avgRating:t,total:a,count:n})}}render(){const{api:e}=this.context,{classes:t,theme:a,intl:n}=this.props,{notFound:s,showOverview:r,prodUrlCopied:o,sandboxUrlCopied:l,epUrl:d,avgRating:m,total:g,count:h}=this.state,{custom:{leftMenu:{position:b},infoBar:{showThumbnail:f,height:E},tagWise:{key:y,active:v},social:{showRating:w}}}=a,x=[];if(v&&e.tags&&e.tags.length>0)for(let t=0;t<e.tags.length;t++)-1!=e.tags[t].search(y)&&e.tags[t].split(y).length>0?x.push(e.tags[t].split(y)[0]):x.push(e.tags[t]);const{resourceNotFountMessage:O}=this.props,T=ke.a.getUser();return s?i.a.createElement(Ke.a,{message:O}):i.a.createElement("div",{className:t.infoBarMain,id:"infoBar"},i.a.createElement("div",{className:t.root},f&&i.a.createElement(F.a,{api:e,customWidth:70,customHeight:50,showInfo:!1}),i.a.createElement("div",{style:{marginLeft:a.spacing(1)}},i.a.createElement(C.a,{to:"/apis/"+e.id+"/overview",className:t.linkTitle},i.a.createElement(c.a,{variant:"h4"},e.name)),i.a.createElement(c.a,{variant:"caption",gutterBottom:!0,align:"left"},this.getProvider(e))),i.a.createElement(Ge.a,{height:70}),!e.advertiseInfo.advertised&&T&&w&&i.a.createElement(He.a,{avgRating:m,reviewCount:g,returnCount:h}),e.advertiseInfo.advertised&&i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.advertiseInfo.originalStoreUrl,className:t.viewInPubStoreLauncher},i.a.createElement("div",null,i.a.createElement(Fe.a,null)),i.a.createElement("div",{className:t.linkText},"Visit Publisher Dev Portal")),i.a.createElement(Ge.a,{height:70}))),"horizontal"===b&&i.a.createElement("div",{style:{height:60}}),r&&i.a.createElement(je.a,{in:r},i.a.createElement("div",{className:t.infoContent},i.a.createElement("div",{className:t.contentWrapper},i.a.createElement(c.a,null,e.description),i.a.createElement(Be.a,{className:t.table},i.a.createElement(We.a,null,i.a.createElement(qe.a,null,i.a.createElement(Ue.a,{component:"th",scope:"row",className:t.leftCol},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(u.a,{className:t.iconOdd},"settings_input_component"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.list.version",defaultMessage:"Version"})))),i.a.createElement(Ue.a,null,e.version)),i.a.createElement(qe.a,null,i.a.createElement(Ue.a,{component:"th",scope:"row"},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(u.a,{className:t.iconEven},"account_balance_wallet"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.list.context",defaultMessage:"Context"})))),i.a.createElement(Ue.a,null,e.context)),i.a.createElement(qe.a,null,i.a.createElement(Ue.a,{component:"th",scope:"row"},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(u.a,{className:t.iconOdd},"account_circle"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.provider",defaultMessage:"Provider"})))),i.a.createElement(Ue.a,null,this.getProvider(e))),T&&!e.advertiseInfo.advertised&&w&&i.a.createElement(qe.a,null,i.a.createElement(Ue.a,{component:"th",scope:"row"},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(Ve.a,{className:t.iconEven}),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.list.context.rating",defaultMessage:"Rating"})))),i.a.createElement(Ue.a,null,i.a.createElement(B.a,{apiId:e.id,isEditable:!0,showSummary:!1,setRatingUpdate:this.setRatingUpdate}))),"GRAPHQL"===e.type&&i.a.createElement(qe.a,null,i.a.createElement(Ue.a,{component:"th",scope:"row"},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(u.a,{className:t.iconOdd},"cloud_download"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.download.Schema",defaultMessage:"Download Schema"})))),i.a.createElement(Ue.a,null,i.a.createElement(De.a,{onClick:this.getSchema,size:"small",fontSize:"small",variant:"outlined"},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.graphQL.schema",defaultMessage:"GraphQL Schema"})))),e.advertiseInfo.advertised?i.a.createElement(qe.a,null,i.a.createElement(Ue.a,{component:"th",scope:"row"},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(u.a,{className:t.iconOdd},"account_circle"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.owner",defaultMessage:"Owner"})))),i.a.createElement(Ue.a,null,e.advertiseInfo.apiOwner)):i.a.createElement(i.a.Fragment,null,i.a.createElement(qe.a,null,i.a.createElement(Ue.a,{component:"th",scope:"row",className:t.contentToTop},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(u.a,{className:t.iconEven},"desktop_windows"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.gateway.environments",defaultMessage:"Gateway Environments"})))),i.a.createElement(Ue.a,null,i.a.createElement(rt,null))),0!==e.labels.length&&i.a.createElement(qe.a,null,i.a.createElement(Ue.a,{component:"th",scope:"row",className:t.contentToTop},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(u.a,{className:t.iconEven},"games"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.available.mgLabels",defaultMessage:"Available Microgateways"})))),i.a.createElement(Ue.a,null,i.a.createElement(lt,null)))),x&&x.length>0&&i.a.createElement(qe.a,null,i.a.createElement(Ue.a,{component:"th",scope:"row"},i.a.createElement("div",{className:t.iconAligner},i.a.createElement(u.a,{className:t.iconEven},"bookmark"),i.a.createElement("span",{className:t.iconTextWrapper},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.list.tags",defaultMessage:"Tags"})))),i.a.createElement(Ue.a,null,x.map(e=>i.a.createElement(ve.a,{label:e,className:t.chip,key:e}))))))))),i.a.createElement("div",{className:t.infoContentBottom},i.a.createElement("a",{className:t.expandWrapper,onClick:this.toggleOverview},i.a.createElement("div",{className:t.buttonView},r?i.a.createElement(c.a,{className:t.buttonOverviewText},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.less",defaultMessage:"LESS"})):i.a.createElement(c.a,{className:t.buttonOverviewText},i.a.createElement(p.a,{id:"Apis.Details.InfoBar.more",defaultMessage:"MORE"})),r?i.a.createElement(u.a,null,"arrow_drop_up"):i.a.createElement(u.a,null,"arrow_drop_down")))))}}pt.defaultProps={classes:{leftMenu:{},leftMenuHorizontal:{},leftMenuVerticalLeft:{},leftMenuVerticalRight:{},leftLInkMain:{},leftLInkMainText:{},detailsContent:{},content:{},contentLoader:{},contentLoaderRightMenu:{}}},pt.propTypes={classes:l.a.shape({}),theme:l.a.object.isRequired,intl:l.a.shape({formatMessage:l.a.func}).isRequired},pt.contextType=K.a;var dt=Object(p.e)(Object(s.h)(Object(r.a)(e=>{const t=e.custom.infoBar.background||"#ffffff",a=e.custom.infoBar.height||70,n=e.custom.infoBar.starColor||e.palette.getContrastText(t);return{table:{minWidth:"100%"},root:{height:a,background:t,color:e.palette.getContrastText(t),borderBottom:"solid 1px "+e.palette.grey.A200,display:"flex",alignItems:"center",paddingLeft:e.spacing(2)},backIcon:{color:e.palette.primary.main,fontSize:56,cursor:"pointer"},backText:{color:e.palette.primary.main,cursor:"pointer",fontFamily:e.typography.fontFamily},starRate:{fontSize:40,color:n},infoContent:{color:e.palette.getContrastText(t),background:t,padding:e.spacing(3),"& td, & th":{color:e.palette.getContrastText(t)}},infoContentBottom:{background:e.custom.infoBar.sliderBackground,color:e.palette.getContrastText(e.custom.infoBar.sliderBackground),borderBottom:"solid 1px "+e.palette.grey.A200},contentWrapper:{maxWidth:e.custom.contentAreaWidth-e.custom.leftMenu.width,alignItems:"center"},infoBarMain:{width:"100%",zIndex:100},buttonView:{textAlign:"left",justifyContent:"left",display:"flex",paddingLeft:e.spacing(3),cursor:"pointer"},buttonOverviewText:{display:"inline-block",paddingTop:3},paper:{margin:e.spacing(1)},leftCol:{width:200},iconAligner:{display:"flex",justifyContent:"flex-start",alignItems:"center"},iconTextWrapper:{display:"inline-block",paddingLeft:20},iconEven:{color:e.custom.infoBar.iconEvenColor,width:e.spacing(3)},iconOdd:{color:e.custom.infoBar.iconOddColor,width:e.spacing(3)},margin:{marginLeft:30},contentToTop:{verticlaAlign:"top"},viewInPubStoreLauncher:{display:"flex",flexDirection:"column",color:e.palette.getContrastText(t),textAlign:"center",textDecoration:"none"},linkText:{fontSize:e.typography.fontSize},chip:{background:e.custom.infoBar.tagChipBackground,color:e.palette.getContrastText(e.custom.infoBar.tagChipBackground),marginRight:e.spacing(1)},expandWrapper:{cursor:"pointer",display:"block"},linkTitle:{color:e.palette.getContrastText(e.custom.infoBar.background)},leftMenu:{},leftMenuHorizontal:{},leftMenuVerticalLeft:{},leftMenuVerticalRight:{},leftLInkMain:{},leftLInkMainText:{},detailsContent:{},content:{},contentLoader:{},contentLoaderRightMenu:{}}},{withTheme:!0})(pt))),ut=a(259),mt=a(1523),gt=a(1618),ht=a(1615),bt=a(1616),ft=a(1578),Et=a(183),yt=a.n(Et);function vt(){return(vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const wt={mt:2,mr:1},xt={pl:2},Ct=e=>{const{currentStep:t,handleCurrentStep:a,handleReset:r,nextActive:o}=e,{api:l,updateSubscriptionData:c}=Object(n.useContext)(K.a),d=Object(s.g)();return i.a.createElement(mt.a,vt({display:"flex"},xt),t<4&&i.a.createElement(mt.a,wt,i.a.createElement(De.a,{onClick:()=>{c(d.push("credentials"))},variant:"text"},i.a.createElement(p.a,{id:"Apis.Details.Credentials.Wizard.Wizard.Cancel",defaultMessage:"CANCEL"}))),t>=4&&i.a.createElement(mt.a,wt,i.a.createElement(De.a,vt({onClick:()=>{d.push(`/apis/${l.id}/test`)}},wt,{variant:"outlined"}),i.a.createElement(p.a,{id:"Apis.Details.Credentials.Wizard.Wizard.test",defaultMessage:"Test"}))),t>=4&&i.a.createElement(mt.a,wt,i.a.createElement(De.a,{variant:"outlined",onClick:r},i.a.createElement(p.a,{id:"Apis.Details.Credentials.Wizard.Wizard.rest",defaultMessage:"Reset"}))),i.a.createElement(mt.a,wt,i.a.createElement(De.a,{variant:"contained",color:"primary",onClick:a,disabled:!o},4===t?i.a.createElement(p.a,{id:"Apis.Details.Credentials.Wizard.Wizard.finish",defaultMessage:"Finish"}):i.a.createElement(p.a,{id:"Apis.Details.Credentials.Wizard.Wizard.next",defaultMessage:"Next"}))))};Ct.defaultProps={nextActive:!0},Ct.propTypes={currentStep:l.a.func.isRequired,handleCurrentStep:l.a.func.isRequired,handleReset:l.a.func.isRequired,nextActive:l.a.bool};var Ot=Ct;function Tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Rt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(a),!0).forEach((function(t){kt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function kt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const St=Object(E.a)(e=>({appCreateFormWrapper:{paddingLeft:e.spacing(2)}}));var At=Object(p.e)(e=>{const t="APPROVED",[a,s]=Object(n.useState)([]),[r,o]=Object(n.useState)({name:"",throttlingPolicy:"",description:"",tokenType:"JWT",groups:null,attributes:{}}),[l,c]=Object(n.useState)(!0),[p,d]=Object(n.useState)(null),[u,m]=Object(n.useState)(!1),{currentStep:g,setCreatedApp:h,incrementStep:b,intl:E,setStepStatus:y,stepStatuses:v}=e,w=e=>e&&""!==e.trim()?(c({isNameValid:!0}),Promise.resolve(!0)):(c({isNameValid:!1}),Promise.reject(new Error(E.formatMessage({defaultMessage:"Application name is required",id:"Apis.Details.Credentials.Wizard.CreateAppStep.application.name.is.required"}))));Object(n.useEffect)(()=>{const e=new f.a,t=e.getAllTiers("application"),a=e.getAllApplicationAttributes();Promise.all([t,a]).then(e=>{const[t,a]=e,n=t.body.list.map(e=>e.name),i=Rt({},r);n.length>0&&([i.throttlingPolicy]=n);const l=[];a.body.list.map(e=>l.push(e)),a.length>0&&(i.attributes=l.filter(e=>!e.hidden)),o(i),s(n),d(l)}).catch(e=>{const{status:t}=e;404===t&&m(!0)})},[]);const x=St();return i.a.createElement("div",{className:x.appCreateFormWrapper},i.a.createElement(mt.a,{px:2,display:"flex",justifyContent:"flex-start"},i.a.createElement(Ze.a,{item:!0,xs:10,md:6},i.a.createElement(ft.a,{throttlingPolicyList:a,applicationRequest:r,updateApplicationRequest:o,validateName:w,isNameValid:l,allAppAttributes:p,handleAttributesChange:e=>t=>{const a=yt()(r);a.attributes[e]=t.target.value,o(a)},isRequiredAttribute:e=>{if(p)for(let t=0;t<p.length;t++)if(p[t].attribute===e)return"true"===p[t].required;return!1},getAttributeValue:e=>r.attributes[e],handleDeleteChip:(e,t,a)=>{const n=Rt({},r);let i=a||[];i=i.filter(t=>t!==e),n.groups=i,o(n)},handleAddChip:(e,t)=>{const a=Rt({},r);let n=t||[];(n=n.slice()).push(e),a.groups=n,o(a)}}))),i.a.createElement(Ot,{classes:x,currentStep:g,handleCurrentStep:()=>{const e=new f.a;w(r.name).then(()=>e.createApplication(r)).then(e=>{const a=e.body;if(a.status===t){const e={value:a.applicationId,label:a.name};console.log("Application created successfully."),h(e),b(),y(v.PROCEED)}else y(v.BLOCKED)}).catch(e=>{const{response:t}=e;if(t&&t.body){const e=t.body.description||E.formatMessage({defaultMessage:"Error while creating the application",id:"Apis.Details.Credentials.Wizard.CreateAppStep.error.while.creating.the.application"});z.a.error(e)}else z.a.error(e.message);console.error("Error while creating the application")})}}))}),Mt=a(1624);function It(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Lt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Pt=Object(p.e)(e=>{const t="UNBLOCKED",[a,s]=Object(n.useState)({applicationId:"",apiId:"",throttlingPolicy:""}),{api:r}=Object(n.useContext)(K.a),[o,l]=Object(n.useState)(null),[c]=Object(n.useState)(r.tiers),{currentStep:p,createdApp:d,incrementStep:u,intl:m,setStepStatus:g,stepStatuses:h,classes:b}=e;return Object(n.useEffect)(()=>{const e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?It(Object(a),!0).forEach((function(t){Lt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):It(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,{apiId:r.id});if(c){const[t]=c;e.throttlingPolicy=t.tierName}d&&(e.applicationId=d.value),s(e),l(d)},[d]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Mt.a,{throttlingPolicyList:c,applicationsAvailable:[o],subscriptionRequest:a,updateSubscriptionRequest:s}),i.a.createElement(Ot,{classes:b,currentStep:p,handleCurrentStep:()=>{(new f.a).subscribe(a.apiId,a.applicationId,a.throttlingPolicy).then(e=>{e.body.status===t?(console.log("Subscription created successfully with ID : "+e.body.subscriptionId),z.a.info(m.formatMessage({defaultMessage:"Subscribed successfully",id:"Apis.Details.Credentials.Wizard.SubscribeToAppStep.subscribed.successfully"})),u(),g(h.PROCEED)):g(h.BLOCKED)}).catch(e=>{console.log("Error while creating the subscription."),console.error(e)})}}))}),Nt=a(1717),Dt=a(1614),jt=a(1610),Bt=a(1544),Wt=a(1546),Ut=a(1625),qt=a(1226);const zt=Object(E.a)(e=>({keyConfigWrapper:{paddingLeft:e.spacing(4)},radioWrapper:{flexDirection:"row"}}));var Vt=Object(p.e)(e=>{const t="CREATED",a="REJECTED",[s,r]=Object(n.useState)("PRODUCTION"),[o,l]=Object(n.useState)(!1),[c,d]=Object(n.useState)(!0),[u,m]=Object(n.useState)(!1),[g,h]=Object(n.useState)({keyType:"PRODUCTION",serverSupportedGrantTypes:[],supportedGrantTypes:[],callbackUrl:""}),{currentStep:b,createdApp:E,incrementStep:y,setCreatedKeyType:v,intl:w,setStepStatus:x,stepStatuses:C}=e;Object(n.useEffect)(()=>{m(!0),(new f.a).getSettings().then(e=>{const t=yt()(g);t.serverSupportedGrantTypes=e.obj.grantTypes,t.supportedGrantTypes=e.obj.grantTypes.filter(e=>"authorization_code"!==e&&"implicit"!==e),h(t)}).catch(e=>{const{status:t}=e;404===t&&l({notFound:!0})})},[]);const O=zt();return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:O.keyConfigWrapper},i.a.createElement(Bt.a,{component:"fieldset",className:O.formControl},i.a.createElement(Wt.a,{component:"legend"},i.a.createElement(p.a,{defaultMessage:"Key Type",id:"Apis.Details.Credentials.Wizard.GenerateKeysStep.keyType"})),i.a.createElement(Dt.a,{value:s,onChange:e=>{const t=e.target.value;r(t);const a=yt()(g);a.keyType=t,h(a)},classes:{root:O.radioWrapper}},i.a.createElement(jt.a,{value:"PRODUCTION",control:i.a.createElement(Nt.a,null),label:w.formatMessage({defaultMessage:"PRODUCTION",id:"Apis.Details.Credentials.Wizard.GenerateKeysStep.production"})}),i.a.createElement(jt.a,{value:"SANDBOX",control:i.a.createElement(Nt.a,null),label:w.formatMessage({defaultMessage:"SANDBOX",id:"Apis.Details.Credentials.Wizard.GenerateKeysStep.sandbox"})}))),i.a.createElement(Ut.a,{updateKeyRequest:h,keyRequest:g,keyType:s,isUserOwner:u,setGenerateEnabled:d})),i.a.createElement(Ot,{classes:O,currentStep:b,handleCurrentStep:()=>{qt.a.get(E.value).then(e=>e.generateKeys(g.keyType,g.supportedGrantTypes,g.callbackUrl)).then(e=>{e.keyState===t||e.keyState===a?x(C.BLOCKED):(y(),v(g.keyType),x(C.PROCEED),console.log("Keys generated successfully with ID : "+e))}).catch(e=>{const{status:t}=e;404===t&&l(!0)})},nextActive:c}))}),_t=a(1627);function Ft(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Ht(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Gt=Object(E.a)(e=>({tokenWrapper:{paddingLeft:e.spacing(3),paddingRight:e.spacing(7)},title:{paddingLeft:e.spacing(2)}}));var Kt=Object(p.e)(e=>{const[t,a]=Object(n.useState)("PRODUCTION"),[s,r]=Object(n.useState)([]),[o,l]=Object(n.useState)(!1),[d,u]=Object(n.useState)({timeout:3600,scopesSelected:[],keyType:""}),{currentStep:m,createdApp:g,setCreatedToken:h,incrementStep:b,createdKeyType:f,intl:E}=e;Object(n.useEffect)(()=>{const e=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(a),!0).forEach((function(t){Ht(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ft(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},d,{keyType:f});a(f),u(e)},[f]),Object(n.useEffect)(()=>{qt.a.get(g.value).then(e=>{e.getKeys().then(()=>{const t=e.subscriptionScopes.map(e=>e.key);r(t)})}).catch(e=>{const{status:t}=e;404===t&&l(!0)})},[]);const y=Gt(),v=Object(p.d)({dataInfo:{id:"Apis.Details.Credentials.Wizard.GenerateAccessTokenStep",defaultMessage:"Generate Access Toke for {keyType} environment"}});return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:y.tokenWrapper},i.a.createElement(c.a,{variant:"subtitle1",component:"div",className:y.title},E.formatMessage(v.dataInfo,{keyType:t})),i.a.createElement(_t.a,{updateAccessTokenRequest:u,accessTokenRequest:d,subscriptionScopes:s}),i.a.createElement(Ot,{classes:y,currentStep:m,handleCurrentStep:()=>{qt.a.get(g.value).then(e=>e.generateToken(d.keyType,d.timeout,d.scopesSelected)).then(e=>{console.log("token generated successfully "+e),h(e),b()}).catch(e=>{const{status:t}=e;404===t&&l(!0)})}})))}),$t=a(1447);function Qt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Jt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(a),!0).forEach((function(t){Yt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Yt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const Xt=Object(E.a)(e=>({tokenWrapper:{paddingLeft:e.spacing(2)}}));function Zt(){return(Zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ea(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ta=[At,Pt,Vt,Kt,e=>{const{currentStep:t,createdToken:a,handleReset:r,handleRedirectTest:o}=e,l=Object(s.g)(),{api:c,updateSubscriptionData:p}=Object(n.useContext)(K.a),d=Xt();return i.a.createElement("div",{className:d.tokenWrapper},i.a.createElement(Ze.a,{md:10},i.a.createElement(mt.a,{my:1,mx:2},i.a.createElement($t.a,{token:Jt({},a,{isOauth:!0})}))),i.a.createElement(Ot,{classes:d,currentStep:t,handleCurrentStep:()=>{p(l.push(`/apis/${c.id}/credentials`))},handleReset:r}))}];class aa extends n.Component{constructor(e){super(e),ea(this,"setStepStatus",e=>{this.setState({stepStatus:e})}),ea(this,"setCreatedApp",e=>{this.setState({createdApp:e})}),ea(this,"setCreatedToken",e=>{this.setState({createdToken:e})}),ea(this,"setCreatedKeyType",e=>{this.setState({createdKeyType:e})}),ea(this,"handleNext",()=>{this.setState(e=>{let{currentStep:t}=e;return{currentStep:t+1}})}),ea(this,"handleReset",()=>{this.setState({currentStep:0})});const{intl:t}=this.props;this.steps=[t.formatMessage({defaultMessage:"Create application",id:"Apis.Details.Credentials.Wizard.Wizard.create"}),t.formatMessage({defaultMessage:"Subscribe to new application",id:"Apis.Details.Credentials.Wizard.Wizard.subscribe.to.new.application"}),t.formatMessage({defaultMessage:"Generate Keys",id:"Apis.Details.Credentials.Wizard.Wizard.generate.keys"}),t.formatMessage({defaultMessage:"Generate Access Token",id:"Apis.Details.Credentials.Wizard.Wizard.generate.access.token"}),t.formatMessage({defaultMessage:"Copy Access Token",id:"Apis.Details.Credentials.Wizard.Wizard.copy.access.token"})],this.stepStatuses={PROCEED:"PROCEED",BLOCKED:"BLOCKED"},this.state={currentStep:0,createdApp:null,createdToken:null,redirect:!1,createdKeyType:"",stepStatus:"PROCEED"}}render(){const{classes:e}=this.props,{currentStep:t,stepStatus:a}=this.state,n=ta[t];return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{variant:"h4",className:e.titleSub},i.a.createElement(p.a,{id:"Apis.Details.Credentials.Credentials.api.credentials.generate",defaultMessage:"Subscription & Key Generation Wizard"})),i.a.createElement(v.a,{elevation:0,className:e.paper},i.a.createElement(mt.a,{py:1,mx:"auto",display:"flex"},i.a.createElement(Ze.a,{item:!0,xs:12,md:12},i.a.createElement(gt.a,{activeStep:t},this.steps.map(e=>i.a.createElement(ht.a,{key:e},i.a.createElement(bt.a,null,e)))))),i.a.createElement(mt.a,{py:1,mx:"auto",display:"block"},a===this.stepStatuses.PROCEED&&i.a.createElement(i.a.Fragment,null,i.a.createElement(n,Zt({},this.state,{incrementStep:this.handleNext,setStepStatus:this.setStepStatus,stepStatuses:this.stepStatuses,classes:e,setCreatedApp:this.setCreatedApp,setCreatedKeyType:this.setCreatedKeyType,setCreatedToken:this.setCreatedToken,handleReset:this.handleReset})))),i.a.createElement(mt.a,{py:1,mb:1,mx:"auto",display:"flex"},a===this.stepStatuses.BLOCKED&&i.a.createElement(mt.a,{pt:2,px:3,display:"flex"},i.a.createElement(c.a,{variant:"h5"},i.a.createElement(p.a,{id:"Apis.Details.Credentials.Wizard.Wizard.approval.request.for.this.step.has",defaultMessage:"A request to register this step has been sent."}))))))}}aa.propTypes={classes:l.a.shape({appBar:l.a.string,toolbar:l.a.string,subscribeTitle:l.a.string,plainContent:l.a.string,root:l.a.string,instructions:l.a.string,button:l.a.string,wizardContent:l.a.string}).isRequired,intl:l.a.func.isRequired,throttlingPolicyList:l.a.arrayOf(l.a.string).isRequired};var na=Object(p.e)(Object(r.a)(e=>({paper:{marginLeft:e.spacing(3)},titleSub:{marginLeft:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)}}))(aa)),ia=a(82),sa=a.n(ia),ra=a(391);class oa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.host=e||location.host,this.environment=it.a.getCurrentEnvironment();const a={OAuth2Security:{token:{access_token:ke.a.getUser()?ke.a.getUser().getPartialToken():""}}};sa.a.http.withCredentials=!0;const n=sa.a.resolve({url:"https://"+it.a.getEnvironment().host+"/api/wso2/monetization/swagger.yaml",requestInterceptor:e=>{e.headers.Accept="text/yaml"}});oa.spec=n,this._client=n.then(e=>{const n=Object.assign(t,{spec:this._fixSpec(e.spec),authorizations:a,requestInterceptor:this._getRequestInterceptor(),responseInterceptor:this._getResponseInterceptor()});return sa.a.http.withCredentials=!0,new sa.a(n)}),this._client.catch(ke.a.unauthorizedErrorHandler),this.mutex=new ra.Mutex}get client(){return this._client}static getETag(e){return sessionStorage.getItem("etag_"+e)}static addETag(e,t){sessionStorage.setItem("etag_"+e,t)}static getScopeForResource(e,t){return oa.spec||(sa.a.http.withCredentials=!0,oa.spec=sa.a.resolve({url:it.a.getSwaggerURL()})),oa.spec.then(a=>a.spec.paths[e]&&a.spec.paths[e][t]&&a.spec.paths[e][t].security[0].OAuth2Security[0])}_fixSpec(e){return e.host=this.host,e.security=[{OAuth2Security:["apim:api_subscribe"]}],e}_getResponseInterceptor(){return e=>{if(e.headers.etag&&oa.addETag(e.url,e.headers.etag),401===e.status&&null!=e.obj&&"Unauthenticated request"===e.obj.description){const e=ke.a.getUserFromToken();ke.a.getUser(this.environment.label)?e.then(e=>{e&&(window.location=oe.a.app.context+it.a.CONST.LOGOUT_CALLBACK)}).catch(e=>{console.error("Error occurred while checking token status. Hence redirecting to login",e),window.location=oe.a.app.context+it.a.CONST.LOGOUT_CALLBACK}):console.error("Attempted a call to a protected API without a proper access token")}return e}}_getRequestInterceptor(){return e=>{const{location:t}=window;if(t){const{tenant:a}=P.a.parse(t.search);a&&(e.headers["X-WSO2-Tenant"]=a)}if(!ke.a.getUser(this.environment.label))return console.log("User not found. Token refreshing failed."),e;let a=ke.a.getUser(this.environment.label).getPartialToken();const n=ke.a.getUser(this.environment.label).getRefreshPartialToken();if(a)return e.headers.authorization="Bearer "+a,e;if(console.log("Access token is expired. Trying to refresh."),!n)return console.log("Refresh token not found. Token refreshing failed."),e;const i=this.environment,s=new Promise((t,n)=>{this.mutex.acquire().then(s=>{(a=ke.a.getUser(i.label).getPartialToken())?(e.headers.authorization="Bearer "+a,s(),t(e)):ke.a.refresh(i).then(e=>e.json()).then(()=>{e.headers.authorization="Bearer "+ke.a.getUser(i.label).getPartialToken(),s(),t(e)}).catch(e=>{console.error("Error:",e),s(),n()}).finally(()=>{s()})})});return!oa.getETag(e.url)||"PUT"!==e.method&&"DELETE"!==e.method&&"POST"!==e.method||(e.headers["If-Match"]=oa.getETag(e.url)),s}}}oa.spec=null;var la=oa;class ca{constructor(){if(ca._instance)return ca._instance;this._APIClientMap=new Map,ca._instance=this}getAPIClient(e){let t=this._APIClientMap.get(e);return t||(t=new la(it.a.getEnvironment().host),this._APIClientMap.set(e,t),t)}destroyAPIClient(e){this._APIClientMap.delete(e)}}ca._instance=null;var pa=ca;function da(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ua=class{constructor(){da(this,"completeCheckout",(e,t)=>this.client.then(a=>{const n={body:{sessionId:e,workflowReferenceId:t}};return a.apis.Stripe.post_subscriptions_complete_checkout(n)})),da(this,"getUpdateCardSession",e=>this.client.then(t=>{const a={apiId:e};return t.apis.Stripe.post_stripe_setup_card_session__apiId_(a)})),da(this,"completeUpdateCardSession",e=>this.client.then(t=>{const a={body:{sessionId:e}};return t.apis.Stripe.post_stripe_update_stripe_card(a)})),da(this,"getCardDetails",()=>this.client.then(e=>(console.log(e.apis.Stripe),e.apis.Stripe.get_stripe_billing_details()))),this.client=(new pa).getAPIClient(it.a.getEnvironment().label).client}};const ma=e=>{const{intl:t}=e,{updateSubscriptionData:a}=Object(n.useContext)(K.a),r=Object(s.g)(),{sessionId:o,workflowId:l}=P.a.parse(e.location.search);return Object(n.useEffect)(()=>{const e=new ua;o&&l?e.completeCheckout(o,l).then(e=>{console.log("Checkout Succesful"),r.push("credentials?checkout=successful"),a&&a(),z.a.info(t.formatMessage({defaultMessage:"Subscribed successfully",id:"monetization.CustomComponent.CheckoutSucessPage.subscribed.successfully"}))}).catch(e=>{console.log("Error while completing checkout."),console.log(e),z.a.error(t.formatMessage({defaultMessage:"Failed to complete checkout process. Please retry",id:"monetization.CustomComponent.CheckoutSucessPage.checkout.failed"})),r.push("credentials?checkout=failed")}):(console.log("Error while completing checkout. Session Id or workflow reference is empty"),z.a.error(t.formatMessage({defaultMessage:"Failed to complete checkout process",id:"monetization.CustomComponent.CheckoutSucessPage.invalid.ids"})),r.push("credentials?checkout=failed"))},[]),i.a.createElement(ut.a,null)};ma.propTypes={history:l.a.shape({push:l.a.func.isRequired}).isRequired,location:l.a.shape({search:l.a.string}).isRequired,intl:l.a.shape({formatMessage:l.a.func.isRequired}).isRequired};var ga=Object(p.e)(ma),ha=a(1535);function ba(e){const{title:t,children:a}=e;return i.a.createElement(mt.a,{mt:2},i.a.createElement(Ze.a,{container:!0,spacing:3},i.a.createElement(Ze.a,{item:!0,sm:12,md:12},i.a.createElement(mt.a,{mx:2},i.a.createElement(Ze.a,{container:!0,spacing:5},i.a.createElement(Ze.a,{item:!0,md:12},t),i.a.createElement(Ze.a,{item:!0,md:12},i.a.createElement(v.a,{elevation:1},a)))))))}ba.propTypes={title:l.a.element.isRequired,children:l.a.element.isRequired};const fa=e=>{const{api:t}=Object(n.useContext)(K.a),[a,s]=Object(n.useState)(!1),[r,o]=Object(n.useState)(!0),[l,d]=Object(n.useState)(null);Object(n.useEffect)(()=>{const{sessionId:t}=P.a.parse(e.location.search),a=new ua,{intl:n}=e;t?a.completeUpdateCardSession(t).then(e=>(o(!1),z.a.info(n.formatMessage({defaultMessage:"Card details have been updated successfully",id:"monetization.CustomComponent.PaymentDetails.card.updated.successfully"})),a.getCardDetails())).then(e=>{d(e.obj)}).catch(e=>{console.log("Error while upating card."),console.log(e),z.a.error(n.formatMessage({defaultMessage:"Failed to update card details. Please try again.",id:"monetization.CustomComponent.PaymentDetails.card.update.failed"})),o(!1)}):a.getCardDetails().then(e=>{d(e.obj),o(!1)}).catch(e=>{console.log("Error while upating card."),console.log(e);const{status:t}=e;let a="Failed to fetch card details. Please try again.";404===t&&(a="No card details found"),z.a.error(n.formatMessage({defaultMessage:a,id:"monetization.CustomComponent.PaymentDetails.card.update.failed"})),o(!1)})},[]);const u=()=>{s(!0),(new ua).getUpdateCardSession(t.id).then(e=>{const{sessionId:t,stripePublishableKey:a}=e.body,n=Stripe(a),{error:i}=n.redirectToCheckout({sessionId:t});i&&(console.log("Error while creating redirect."),console.error(i),s(!1))}).catch(e=>{console.log("Error while settiping update card session."),console.log(e),s(!1)})};return r?i.a.createElement(ut.a,null):(console.log(l),l?i.a.createElement(ba,{title:i.a.createElement(c.a,{variant:"h5"},i.a.createElement(p.a,{id:"monetization.CustomComponent.PaymentDetails.payment.details",defaultMessage:"Payment Details"}))},i.a.createElement(mt.a,{py:1,mb:1,display:"block"},i.a.createElement(Ze.a,{item:!0,xs:11,md:8},i.a.createElement(mt.a,{display:"flex",mt:1,ml:5},i.a.createElement(mt.a,{display:"block"},i.a.createElement(c.a,{variant:"subtitle2"},i.a.createElement(p.a,{id:"monetization.CustomComponent.PaymentDetails.card.brand",defaultMessage:"Card brand"})),i.a.createElement(c.a,{variant:"body1"},l.brand)),i.a.createElement(mt.a,{display:"block",ml:3},i.a.createElement(c.a,{variant:"subtitle2"},i.a.createElement(p.a,{id:"monetization.CustomComponent.PaymentDetails.last.4",defaultMessage:"last 4"})),i.a.createElement(c.a,{variant:"body1"},l.last4))),i.a.createElement(mt.a,{display:"flex",ml:5,mt:1},i.a.createElement(mt.a,{display:"block"},i.a.createElement(c.a,{variant:"subtitle2"},i.a.createElement(p.a,{id:"monetization.CustomComponent.PaymentDetails.last.4",defaultMessage:"Expiry Month"})),i.a.createElement(c.a,{variant:"body1"},l.expMonth)),i.a.createElement(mt.a,{display:"block",ml:3},i.a.createElement(c.a,{variant:"subtitle2"},i.a.createElement(p.a,{id:"monetization.CustomComponent.PaymentDetails.last.4",defaultMessage:"Expiry year"})),i.a.createElement(c.a,{variant:"body1"},l.expYear)))),i.a.createElement(Ze.a,{item:!0,xs:11,md:8},i.a.createElement(mt.a,{my:2,ml:5,display:"flex"},i.a.createElement(De.a,{color:"primary",variant:"contained",size:"small",icon:"edit",disalbed:a,onClick:u},i.a.createElement(p.a,{id:"monetization.CustomComponent.PaymentDetails.update.card",defaultMessage:"update card"}),a&&i.a.createElement(ha.a,{size:24})))))):i.a.createElement(ba,{title:i.a.createElement(c.a,{variant:"h5"},i.a.createElement(p.a,{id:"monetization.CustomComponent.PaymentDetails.payment.details",defaultMessage:"No payment details found"}))}))};fa.propTypes={history:l.a.shape({push:l.a.func.isRequired}).isRequired,location:l.a.shape({search:l.a.string}).isRequired,intl:l.a.shape({formatMessage:l.a.func.isRequired}).isRequired};var Ea=Object(p.e)(fa);function ya(){return(ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const va=Object(n.lazy)(()=>Promise.all([a.e(22),a.e(8)]).then(a.bind(null,2263))),wa=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(24),a.e(16)]).then(a.bind(null,2260))),xa=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(2),a.e(6),a.e(3),a.e(11)]).then(a.bind(null,2257))),Ca=Object(n.lazy)(()=>Promise.all([a.e(0),a.e(2),a.e(6),a.e(10)]).then(a.bind(null,2259))),Oa=Object(n.lazy)(()=>Promise.all([a.e(4),a.e(9)]).then(a.bind(null,2261))),Ta=Object(n.lazy)(()=>a.e(3).then(a.bind(null,2245))),Ra=Object(n.lazy)(()=>a.e(12).then(a.bind(null,1712))),ka=Object(s.h)(e=>{const{match:t,api:a}=e,r=t.params.api_uuid,{advertised:o}=a.advertiseInfo,l="/apis/"+r+"/overview",c=ke.a.getUser();let p;return p="GRAPHQL"===a.type?i.a.createElement(s.b,{path:"/apis/:apiUuid/test",component:wa}):i.a.createElement(s.b,{path:"/apis/:apiUuid/test",component:va}),i.a.createElement(n.Suspense,{fallback:i.a.createElement(ut.a,null)},i.a.createElement(s.d,null,i.a.createElement(s.a,{exact:!0,from:`/apis/${r}`,to:l}),i.a.createElement(s.b,{path:"/apis/:apiUuid/overview",render:()=>i.a.createElement(xa,e)}),i.a.createElement(s.b,{path:"/apis/:apiUuid/documents",component:Ca}),c&&i.a.createElement(s.b,{exact:!0,path:"/apis/:apiUuid/checkout-success",component:ga}),c&&i.a.createElement(s.b,{exact:!0,path:"/apis/:apiUuid/checkout-failed",component:ga}),c&&i.a.createElement(s.b,{exact:!0,path:"/apis/:apiUuid/payment-details",component:Ea}),i.a.createElement(s.b,{exact:!0,path:"/apis/:apiUuid/credentials/wizard",component:na}),!o&&i.a.createElement(s.b,{path:"/apis/:apiUuid/comments",component:Ta}),!o&&i.a.createElement(s.b,{path:"/apis/:apiUuid/credentials",component:Oa}),!o&&p,!o&&i.a.createElement(s.b,{path:"/apis/:apiUuid/sdk",component:Ra}),i.a.createElement(s.b,{component:Ne.b})))});class Sa extends i.a.Component{constructor(e){super(e),this.updateSubscriptionData=e=>{let t=null,a=null;const n=new f.a;n.getAPIById(this.api_uuid).then(e=>{this.setState({api:e.body})}).catch(e=>{const{status:t,response:a}=e,{setTenantDomain:n,intl:i}=this.props,s=i.formatMessage({defaultMessage:"Invalid tenant domain",id:"Apis.Details.index.invalid.tenant.domain"});a&&901300===a.body.code&&(n("INVALID"),z.a.error(s)),console.error("Error when getting apis",e),404===t&&this.setState({notFound:!0})}),null!=ke.a.getUser()&&(t=n.getSubscriptions(this.api_uuid,null),a=n.getAllApplications(),Promise.all([t,a]).then(t=>{const[a,n]=t.map(e=>e.obj),i=n.list.reduce((e,t)=>(e[t.applicationId]=t.name,e),{}),s=a.list.map(e=>({value:e.applicationId,policy:e.throttlingPolicy,status:e.status,subscriptionId:e.subscriptionId,label:i[e.applicationId]})),r=s.map(e=>e.value),o=n.list.filter(e=>!r.includes(e.applicationId)&&"APPROVED"===e.status).map(e=>({value:e.applicationId,label:e.name}));this.setState({subscribedApplications:s,applicationsAvailable:o},()=>{e&&e()})}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})}))},this.state={active:"overview",overviewHiden:!1,updateSubscriptionData:this.updateSubscriptionData,api:null,applications:null,subscribedApplications:[],applicationsAvailable:[],item:1,xo:null},this.setDetailsAPI=this.setDetailsAPI.bind(this),this.api_uuid=this.props.match.params.api_uuid}componentDidMount(){this.updateSubscriptionData()}setDetailsAPI(e){this.setState({api:e})}render(){const{classes:e,theme:t,intl:a,match:n}=this.props,s=ke.a.getUser(),{apiUuid:r}=n.params,{api:o,notFound:l}=this.state,{custom:{leftMenu:{rootIconSize:d,rootIconTextVisible:u,rootIconVisible:m,position:b},apiDetailPages:{showCredentials:f,showComments:E,showTryout:y,showDocuments:v,showSdks:w},title:{prefix:x,sufix:O}}}=t,T="body{ font-family: "+t.typography.fontFamily+"}",R="/apis/"+this.api_uuid+"/";return!o&&l?i.a.createElement(Ne.b,null):o?i.a.createElement(K.a.Provider,{value:this.state},i.a.createElement(Le.Helmet,null,i.a.createElement("title",null,`${x} ${o.name}${O}`)),i.a.createElement("style",null,T),i.a.createElement("div",{className:g()(e.leftMenu,{[e.leftMenuHorizontal]:"horizontal"===b},{[e.leftMenuVerticalLeft]:"vertical-left"===b},{[e.leftMenuVerticalRight]:"vertical-right"===b},"left-menu")},m&&i.a.createElement(C.a,{to:"/apis",className:e.leftLInkMain},i.a.createElement(h.a,{width:d,height:d,icon:"api"}),u&&i.a.createElement(c.a,{className:e.leftLInkMainText},i.a.createElement(p.a,{id:"Apis.Details.index.all.apis",defaultMessage:"ALL APIs"}))),i.a.createElement(Pe.a,{text:i.a.createElement(p.a,{id:"Apis.Details.index.overview",defaultMessage:"Overview"}),route:"overview",iconText:"overview",to:R+"overview"}),!o.advertiseInfo.advertised&&i.a.createElement(i.a.Fragment,null,s&&f&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Pe.a,{text:i.a.createElement(p.a,{id:"Apis.Details.index.subscriptions",defaultMessage:"Subscriptions"}),route:"credentials",iconText:"credentials",to:R+"credentials"})),"WS"!==o.type&&y&&i.a.createElement(Pe.a,{text:i.a.createElement(p.a,{id:"Apis.Details.index.try.out",defaultMessage:"Try out"}),route:"test",iconText:"test",to:R+"test"}),E&&i.a.createElement(Pe.a,{text:i.a.createElement(p.a,{id:"Apis.Details.index.comments",defaultMessage:"Comments"}),route:"comments",iconText:"comments",to:R+"comments"})),v&&i.a.createElement(Pe.a,{text:i.a.createElement(p.a,{id:"Apis.Details.index.documentation",defaultMessage:"Documentation"}),route:"documents",iconText:"docs",to:R+"documents"}),!o.advertiseInfo.advertised&&"WS"!==o.type&&w&&i.a.createElement(Pe.a,{text:i.a.createElement(p.a,{id:"Apis.Details.index.sdk",defaultMessage:"SDKs"}),route:"sdk",iconText:"sdk",to:R+"sdk"}),s&&o.monetization.enabled&&i.a.createElement(Pe.a,{text:i.a.createElement(p.a,{id:"Apis.Details.index.payment.details",defaultMessage:"Payment Details"}),route:"payment-details",iconText:"settings",to:R+"payment-details"})),i.a.createElement("div",{className:e.content},i.a.createElement(dt,ya({apiId:r,innerRef:e=>this.infoBar=e,intl:a},this.props)),i.a.createElement("div",{className:g()({[e.contentLoader]:"horizontal"===b},{[e.contentLoaderRightMenu]:"vertical-right"===b})},i.a.createElement(ka,{api:o,updateSubscriptionData:this.updateSubscriptionData})))):i.a.createElement("div",{className:"apim-dual-ring"})}}Sa.propTypes={classes:l.a.shape({}).isRequired,theme:l.a.shape({}).isRequired,match:l.a.shape({}).isRequired,intl:l.a.shape({formatMessage:l.a.func}).isRequired};var Aa=U(Object(p.e)(Object(r.a)(e=>{const{custom:{leftMenu:{width:t,position:a}}}=e,n="vertical-left"===a?t:0,i="vertical-right"===a?t:0,s="horizontal"===a?e.spacing(3):0;return{leftMenu:{backgroundColor:e.custom.leftMenu.background,backgroundImage:`url(${re.app.context}${e.custom.leftMenu.backgroundImage})`,textAlign:"left",fontFamily:e.typography.fontFamily,position:"absolute",bottom:0,paddingLeft:s},leftMenuHorizontal:{top:e.custom.infoBar.height,width:"100%",overflowX:"auto",height:60,display:"flex",left:0},leftMenuVerticalLeft:{width:e.custom.leftMenu.width,top:0,left:0,overflowY:"auto"},leftMenuVerticalRight:{width:e.custom.leftMenu.width,top:0,right:0,overflowY:"auto"},leftLInkMain:{borderRight:"solid 1px "+e.custom.leftMenu.background,cursor:"pointer",background:e.custom.leftMenu.rootBackground,color:e.palette.getContrastText(e.custom.leftMenu.rootBackground),textDecoration:"none",alignItems:"center",justifyContent:"center",display:"flex",height:e.custom.infoBar.height,textDecoration:"none"},leftLInkMainText:{fontSize:18,color:e.palette.grey[500],textDecoration:"none",paddingLeft:e.spacing(2)},detailsContent:{display:"flex",flex:1},content:{display:"flex",flex:1,flexDirection:"column",marginLeft:n,marginRight:i,paddingBottom:e.spacing(3)},contentLoader:{paddingTop:e.spacing(3)},contentLoaderRightMenu:{paddingRight:e.custom.leftMenu.width}}},{withTheme:!0})(Sa)));t.default=Object(r.a)({},{withTheme:!0})((function(){return i.a.createElement(s.d,null,i.a.createElement(s.b,{exact:!0,path:"/api-groups",render:e=>i.a.createElement(Ie.default,e)}),i.a.createElement(s.b,{exact:!0,path:"/apis",render:e=>i.a.createElement(Me,e)}),i.a.createElement(s.b,{path:"/apis/search",render:e=>i.a.createElement(Me,e)}),i.a.createElement(s.b,{path:"/apis/:api_uuid/",render:e=>i.a.createElement(Aa,e)}),i.a.createElement(s.b,{component:Ne.b}))}))}}]);
//# sourceMappingURL=Apis.bundle.js.map