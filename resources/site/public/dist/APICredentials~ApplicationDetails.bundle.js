(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1240:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return c}));var s=a(1),n=a.n(s),r=a(17),i=a.n(r),o=a(22);const c={APIS:"/apis",SINGLE_API:"/apis/{apiId}",API_SWAGGER:"/apis/{apiId}/swagger",API_WSDL:"/apis/{apiId}/wsdl",API_GW_CONFIG:"/apis/{apiId}/gateway-config",API_THUMBNAIL:"/apis/{apiId}/thumbnail",API_COPY:"/apis/copy-api",API_LC_HISTORY:"/apis/{apiId}/lifecycle-history",API_CHANGE_LC:"/apis/change-lifecycle",API_LC:"/apis/{apiId}/lifecycle",API_LC_PENDING_TASK:"/apis/{apiId}/lifecycle/lifecycle-pending-task",API_DEF:"/apis/import-definition",API_VALIDATE_DEF:"/apis/validate-definition",API_DOCS:"/apis/{apiId}/documents",API_DOC:"'/apis/{apiId}/documents/{documentId}'",API_DOC_CONTENT:"'/apis/{apiId}/documents/{documentId}/content'",APPLICATIONS:"/applications",SINGLE_APPLICATION:"/applications/{applicationId}",APPLICATION_GENERATE_KEYS:"/applications/{applicationId}/generate-keys",APPLICATION_GENERATE_KEY_TYPE:"/applications/{applicationId}/keys/{keyType}",EXPORT_APIS:"/export/apis",IMPORT_APIS:"/import/apis",SUBSCRIPTION:"/subscriptions",SINGLE_SUBSCRIPTION:"/subscriptions/{subscriptionId}",SUBSCRIPTIONS:"/subscriptions",BLOCK_SUBSCRIPTION:"/subscriptions/block-subscription:",UNBLOCK_SUBSCRIPTION:"/subscriptions/unblock-subscription",POLICIES:"'/policies/{tierLevel}'",POLICY:"'/policies/{tierLevel}/{tierName}'",ENDPOINTS:"/endpoints",ENDPOINT:"/endpoints/{endpointId}",LABLES:"/labels",WORKFLOW:"/workflows/{workflowReferenceId}",SERVICE_DISCOVERY:"/external-resources/services"},l={POST:"post",PUT:"put",GET:"get",DELETE:"delete"};class p extends n.a.Component{constructor(e){super(e),this.state={}}componentDidMount(){const{resourcePath:e,resourceMethod:t}=this.props,a=o.a.hasScopes(e,t);a&&a.then(e=>{this.setState({haveScope:e})})}render(){const{children:e}=this.props;return this.state.haveScope&&e||null}}p.propTypes={children:i.a.node.isRequired,resourcePath:i.a.string.isRequired,resourceMethod:i.a.string.isRequired}},1383:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var s=a(96),n=a(97),r=a(4);class i extends n.a{constructor(){super(),this.client=(new s.a).getAPIClient(r.a.getEnvironment().label).client}getSubscriptions(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25;return this.client.then(s=>s.apis.Subscriptions.get_subscriptions({apiId:e,applicationId:t,limit:a}))}getSubscription(e){return this.client.then(t=>t.apis.Subscriptions.get_subscriptions__subscriptionId_({subscriptionId:e}))}getMonetizationInvoice(e){return this.client.then(t=>t.apis["API Monetization"].get_subscriptions__subscriptionId__usage({subscriptionId:e}))}deleteSubscription(e){return this.client.then(t=>t.apis.Subscriptions.delete_subscriptions__subscriptionId_({subscriptionId:e}))}}},1525:function(e,t,a){"use strict";var s=a(1),n=a.n(s),r=a(17),i=a.n(r),o=a(1182),c=a(1576),l=a(1531),p=a(1552),d=a(1725),u=a(1609),m=a(1608),y=a(1569),h=a(180),g=a(1238),E=a(1535),k=a(1196),S=a(1555),A=a(1544),f=a(1591),b=a(1542);function T(e){const{classes:t,consumerKey:a,consumerSecret:s,intl:r,onChange:i,isUserOwner:o}=e;function c(e){i&&i(e)}return n.a.createElement("div",null,n.a.createElement(f.a,{container:!0,spacing:3,direction:"column"},n.a.createElement(f.a,{item:!0,xs:6},n.a.createElement(b.a,{id:"provided-consumer-key",name:"providedConsumerKey",className:t.textField,label:r.formatMessage({defaultMessage:"Consumer Key",id:"Shared.AppsAndKeys.ProvideOAuthKeys.consumer.key"}),value:a,onChange:e=>c(e),margin:"normal",fullWidth:!0,disabled:!o,variant:"outlined"}),n.a.createElement(A.a,null,n.a.createElement(S.a,{id:"consumer-key-helper-text"},n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ProvideOAuthKeys.consumer.key.title",defaultMessage:"Consumer Key of the OAuth application"})))),n.a.createElement(f.a,{item:!0,xs:6},n.a.createElement(b.a,{id:"provided-consumer-secret",name:"providedConsumerSecret",label:r.formatMessage({defaultMessage:"Consumer Secret",id:"Shared.AppsAndKeys.ProvideOAuthKeys.consumer.secret"}),className:t.textField,value:s,onChange:e=>c(e),margin:"normal",fullWidth:!0,disabled:!o,variant:"outlined"}),n.a.createElement(A.a,null,n.a.createElement(S.a,{id:"consumer-secret-helper-text"},n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ProvideOAuthKeys.consumer.secret.of.application",defaultMessage:"Consumer Secret of the OAuth application"}))))))}T.propTypes={classes:i.a.shape({}).isRequired,intl:i.a.shape({}).isRequired,onChange:i.a.func.isRequired,consumerKey:i.a.string,consumerSecret:i.a.string,isUserOwner:i.a.string},T.defaultProps={consumerKey:"",consumerSecret:"",isUserOwner:!1};var v=Object(h.e)(Object(o.a)(e=>({textField:{marginTop:0}}))(T)),C=a(1226),K=a(22),O=a(134),P=a(256),w=a(1625),I=a(1564),M=a(1545),R=a(1530),N=a(1296),_=a.n(N),x=a(1562),U=a(1601),D=a(1602),G=a(1603),W=a(1604),j=a(1605),L=a(1227),q=a(1627),V=a(1447),B=a(1628),F=a(1414),z=a(1448),J=a.n(z);const Y=Object(F.a)(e=>({code:{padding:e.spacing(1),marginBottom:e.spacing(2),background:e.palette.grey[200],color:"#da2316",flex:1},command:{color:"#2b62b0"},encodeVisible:{cursor:"pointer",textDecoration:"underline"},contentWrapper:{display:"flex"}}));function H(e){const t=Y(),{keys:{consumerKey:a,consumerSecret:r},intl:i}=e,o=window.btoa(a+":"+r),{settings:{apiGatewayEndpoint:c}}=Object(s.useContext)(O.c),[p,d]=Object(s.useState)(!1),[u,m]=Object(s.useState)(!1),y=()=>{m(!0);setTimeout((function(){m(!1)}),4e3)},g=()=>{d(!p)},E=`${c?c.split(",")[0]:"https://localhost:8243"}/token`;return n.a.createElement(n.a.Fragment,null,n.a.createElement(l.a,null,n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewCurl.help",defaultMessage:"The following cURL command shows how to generate an access token using the Password Grant type."})),n.a.createElement("div",{className:t.contentWrapper},n.a.createElement("div",{className:t.code},n.a.createElement("div",null,n.a.createElement("span",{className:t.command},"curl -k -X POST ")," ",E,n.a.createElement("span",{className:t.command}," -d ")," ",'"grant_type=password&username=Username&password=Password"'),n.a.createElement("div",null,n.a.createElement("span",{className:t.command}," -H "),'"Authorization: Basic',n.a.createElement("a",{onClick:g,className:t.encodeVisible},p?" "+o:" Base64(consumer-key:consumer-secret)"),'"')),n.a.createElement("div",null,n.a.createElement(x.a,{title:u?i.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewCurl.copied"}):i.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewCurl.copy.to.clipboard"}),placement:"right"},n.a.createElement(_.a,{text:`curl -k -X POST ${E} -d `+'"grant_type=password&username=Username&password=Password" -H '+`"Authorization: Basic ${o}"`,onCopy:y},n.a.createElement(J.a,{color:"secondary"}))))),n.a.createElement(l.a,null,n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewCurl.help.in.a.similar",defaultMessage:"In a similar manner, you can generate an access token using the\n                    Client Credentials grant type with the following cURL command."})),n.a.createElement("div",{className:t.contentWrapper},n.a.createElement("div",{className:t.code},n.a.createElement("div",null,n.a.createElement("span",{className:t.command},"curl -k -X POST ")," ",E,n.a.createElement("span",{className:t.command}," -d ")," ",'"grant_type=client_credentials"'),n.a.createElement("div",null,n.a.createElement("span",{className:t.command}," -H "),'"Authorization: Basic',n.a.createElement("a",{onClick:g,className:t.encodeVisible},p?" "+o:" Base64(consumer-key:consumer-secret)"),'"')),n.a.createElement("div",null,n.a.createElement(x.a,{title:u?"Copied":"Copy to clipboard",placement:"right"},n.a.createElement(_.a,{text:`curl -k -X POST ${E} -d `+'"grant_type=client_credentials" -H'+`"Authorization: Basic ${o}"`,onCopy:y},n.a.createElement(J.a,{color:"secondary"}))))))}H.propTypes={classes:i.a.shape({}).isRequired,keys:i.a.shape({}).isRequired,apis:i.a.shape({}).isRequired};var $=Object(h.e)(H);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),!0).forEach((function(t){Z(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class ee extends n.a.Component{constructor(e){super(e),Z(this,"updateAccessTokenRequest",e=>{this.setState({accessTokenRequest:e})}),Z(this,"onCopy",e=>{this.setState({[e]:!0});const t=this,a=e;setTimeout(()=>{t.setState({[a]:!1})},4e3)}),Z(this,"handleShowHidden",e=>{this.setState({[e]:!this.state[e]})}),Z(this,"handleMouseDownGeneric",e=>{e.preventDefault()}),Z(this,"handleClickOpen",()=>{this.setState({open:!0,showToken:!1})}),Z(this,"handleSecretRegenerate",(e,t)=>{this.applicationPromise.then(a=>a.regenerateSecret(e,t)).then(e=>{console.log("consumer secret regenerated successfully "+e),this.setState({open:!0,showSecretGen:!0,secretGenResponse:e})}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})}),Z(this,"handleClickOpenCurl",()=>{this.setState({open:!0,showCurl:!0})}),Z(this,"handleClose",()=>{this.setState({open:!1,showCurl:!1,isKeyJWT:!1,showSecretGen:!1})}),Z(this,"generateAccessToken",()=>{const{accessTokenRequest:e,isUpdating:t}=this.state;this.setState({isUpdating:!0}),this.applicationPromise.then(t=>t.generateToken(e.keyType,e.timeout,e.scopesSelected)).then(e=>{console.log("token generated successfully "+e),this.setState({showToken:!0,tokenResponse:e,token:e.accessToken,tokenScopes:e.tokenScopes,tokenValidityTime:e.validityTime}),this.setState({isUpdating:!1})}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0}),this.setState({isUpdating:!1})})}),Z(this,"viewKeyAndSecret",(e,t)=>{const{classes:a,intl:s,selectedApp:{hashEnabled:r},keyType:i}=this.props,{keyCopied:o,secretCopied:l,showCS:p}=this.state;return n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,{item:!0,xs:6},n.a.createElement("div",{className:a.copyWrapper},n.a.createElement(b.a,{id:"consumer-key",value:e,margin:"normal",label:n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.key",defaultMessage:"Consumer Key"}),fullWidth:!0,variant:"outlined",InputProps:{readOnly:!0,endAdornment:n.a.createElement(R.a,{position:"end"},n.a.createElement(x.a,{title:o?s.formatMessage({defaultMessage:"Copied",id:"Shared.AppsAndKeys.ViewKeys.copied"}):s.formatMessage({defaultMessage:"Copy to clipboard",id:"Shared.AppsAndKeys.ViewKeys.copy.to"}),placement:"right",className:a.iconStyle},n.a.createElement(_.a,{text:e,onCopy:()=>this.onCopy("keyCopied")},n.a.createElement(y.a,{color:"secondary"},"description"))))}})),n.a.createElement(A.a,null,n.a.createElement(S.a,{id:"consumer-key-helper-text"},n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.key.title",defaultMessage:"Consumer Key of the application"})))),n.a.createElement(f.a,{item:!0,xs:6},n.a.createElement("div",{className:a.copyWrapper},r?n.a.createElement(c.a,{variant:"contained",color:"primary",className:a.button,onClick:()=>this.handleSecretRegenerate(e,i),disabled:!isUserOwner},n.a.createElement(h.a,{defaultMessage:"Regenerate Consumer Secret",id:"Shared.AppsAndKeys.ViewKeys.consumer.secret.button.regenerate"})):n.a.createElement(b.a,{id:"consumer-secret",label:n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.secret",defaultMessage:"Consumer Secret"}),type:p||!t?"text":"password",value:t,margin:"normal",fullWidth:!0,variant:"outlined",InputProps:{readOnly:!0,endAdornment:n.a.createElement(R.a,{position:"end"},n.a.createElement(I.a,{classes:"",onClick:()=>this.handleShowHidden("showCS"),onMouseDown:this.handleMouseDownGeneric},p?n.a.createElement(y.a,null,"visibility_off"):n.a.createElement(y.a,null,"visibility")),n.a.createElement(x.a,{title:l?"Copied":"Copy to clipboard",placement:"right",className:a.iconStyle},n.a.createElement(_.a,{text:t,onCopy:()=>this.onCopy("secretCopied")},n.a.createElement(y.a,{color:"secondary"},"description"))))}})),!r&&n.a.createElement(A.a,null,n.a.createElement(S.a,{id:"consumer-secret-helper-text"},n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.secret.of.application",defaultMessage:"Consumer Secret of the application"})))))});const{selectedApp:t}=this.props;let a;t&&(a=t.appId||t.value),this.applicationPromise=C.a.get(a),this.state={showCS:!1,open:!1,showToken:!1,showCurl:!1,showSecretGen:!1,accessTokenRequest:{timeout:3600,scopesSelected:[],keyType:""},subscriptionScopes:[],isUpdating:!1}}componentDidMount(){const{accessTokenRequest:e}=this.state,{keyType:t}=this.props;this.applicationPromise.then(a=>{a.getKeys().then(()=>{const s=Q({},e,{keyType:t}),n=a.subscriptionScopes.map(e=>e.key);this.setState({accessTokenRequest:s,subscriptionScopes:n})})}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})}componentDidUpdate(e){const{isKeyJWT:t}=this.props;t&&!e.isKeyJWT&&this.setState({isKeyJWT:!0})}render(){const{notFound:e,showToken:t,showCurl:a,showSecretGen:s,tokenCopied:r,open:i,token:o,tokenScopes:p,tokenValidityTime:d,accessTokenRequest:u,subscriptionScopes:m,isKeyJWT:k,tokenResponse:T,secretGenResponse:v,isUpdating:C}=this.state,{intl:K,keyType:O,classes:P,fullScreen:w,keys:I,selectedApp:{tokenType:N,hashEnabled:F},selectedGrantTypes:z,isUserOwner:J,summary:Y}=this.props;if(e)return n.a.createElement(L.a,null);if(!I)return n.a.createElement(g.a,null);const H=I.get(O),X=H&&H.consumerKey,Z=H&&H.consumerSecret;let ee,te,ae,se;o?(ee=o,te=p,ae=d):I.get(O)&&I.get(O).token&&(({accessToken:ee}=I.get(O).token),te=I.get(O).token.tokenScopes,ae=I.get(O).token.validityTime,se=I.get(O).token);let ne="Undefined";return ne=a?"Get CURL to Generate Access Token":s?"Generate Consumer Secret":"Generate Access Token",X?Y?n.a.createElement(f.a,{container:!0,spacing:3,className:P.gridWrapper},this.viewKeyAndSecret(X,Z)):X&&n.a.createElement("div",{className:P.inputWrapper},n.a.createElement(f.a,{container:!0,spacing:3,className:P.gridWrapper},this.viewKeyAndSecret(X,Z),ee&&"JWT"!==N&&!F&&n.a.createElement(f.a,{item:!0,xs:6},n.a.createElement(M.a,{htmlFor:"adornment-amount"},n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.access.token",defaultMessage:"Access Token"})),n.a.createElement("div",{className:P.copyWrapper},n.a.createElement(b.a,{id:"access-token",value:ee,margin:"normal",variant:"outlined",fullWidth:!0,InputProps:{readOnly:!0,endAdornment:n.a.createElement(R.a,{position:"end"},n.a.createElement(x.a,{title:r?"Copied":"Copy to clipboard",placement:"right"},n.a.createElement(_.a,{text:ee,onCopy:()=>this.onCopy("tokenCopied")},n.a.createElement(y.a,{color:"secondary"},"description"))))}})),n.a.createElement(A.a,null,n.a.createElement(S.a,{id:"access-token-helper-text"},`Above token has a validity period of ${ae} seconds.\n                                            And the token has (${te.join(", ")}) scopes.`))),n.a.createElement(f.a,{item:!0,xs:12},n.a.createElement(U.a,{fullScreen:w,open:(i||k)&&z.includes("client_credentials"),onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title"},n.a.createElement(j.a,{id:"responsive-dialog-title"},ne),n.a.createElement(G.a,null,!a&&!k&&!s&&n.a.createElement(W.a,null,!t&&n.a.createElement(q.a,{updateAccessTokenRequest:this.updateAccessTokenRequest,accessTokenRequest:u,subscriptionScopes:m}),t&&n.a.createElement(V.a,{token:Q({},T,{isOauth:!0})})),a&&n.a.createElement(W.a,null,n.a.createElement($,{keys:{consumerKey:X,consumerSecret:Z}})),s&&n.a.createElement(W.a,null,n.a.createElement(B.a,{secret:Q({},v)})),k&&se&&F&&n.a.createElement(W.a,null,n.a.createElement(V.a,{token:Q({},se,{isOauth:!0}),consumerSecret:Z})),k&&se&&!F&&n.a.createElement(W.a,null,n.a.createElement(V.a,{token:Q({},se,{isOauth:!0})}))),n.a.createElement(D.a,null,C&&n.a.createElement(E.a,{size:24}),!t&&!a&&!k&&!s&&n.a.createElement(c.a,{onClick:this.generateAccessToken,color:"primary",disabled:C},n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.generate.btn",defaultMessage:"Generate"})),n.a.createElement(c.a,{onClick:this.handleClose,color:"primary",autoFocus:!0},n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.consumer.close.btn",defaultMessage:"Close"})))),!F&&n.a.createElement("div",{className:P.tokenSection},n.a.createElement(c.a,{variant:"outlined",size:"small",color:"primary",className:P.margin,onClick:this.handleClickOpen,disabled:!z.includes("client_credentials")},n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.generate.access.token",defaultMessage:"Generate Access Token"})),n.a.createElement(c.a,{variant:"outlined",size:"small",color:"primary",className:P.margin,onClick:this.handleClickOpenCurl},n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.curl.to.generate",defaultMessage:"CURL to Generate Access Token"}))),!z.includes("client_credentials")&&!F&&n.a.createElement(l.a,{variant:"caption",gutterBottom:!0},n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.client.enable.client.credentials",defaultMessage:"Enable Client Credentials grant type to generate test access tokens"}))))):n.a.createElement(l.a,{variant:"caption",gutterBottom:!0},"PRODUCTION"===O?"Production ":"Sandbox ",n.a.createElement(h.a,{id:"Shared.AppsAndKeys.ViewKeys.key.secret.title",defaultMessage:"Key and Secret is not generated for this application"}))}}ee.defaultProps={fullScreen:!1,summary:!1},ee.propTypes={classes:i.a.shape({}).isRequired,fullScreen:i.a.bool,isKeyJWT:i.a.bool.isRequired,isUserOwner:i.a.bool.isRequired,summary:i.a.bool};var te=Object(h.e)(Object(o.a)(e=>({button:{margin:e.spacing(3),color:e.palette.getContrastText(e.palette.background.default),display:"flex",alignItems:"center",fontSize:"11px",cursor:"pointer","& span":{paddingLeft:6,display:"inline-block"}},inputWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},copyWrapper:{display:"flex",flexDirection:"row",alignItems:"center"},gridWrapper:{paddingTop:e.spacing(2)},iconStyle:{cursor:"grab"},tokenSection:{marginTop:e.spacing(2),marginBottom:e.spacing(.5)},margin:{marginRight:e.spacing(2)}}))(ee));var ae=Object(h.e)(Object(o.a)(e=>({root:{padding:e.spacing(3)}}))(e=>{const{classes:t,keyState:a,states:s,intl:r}=e;let i=r.formatMessage({defaultMessage:"A request to register this application has been sent and is pending approval.",id:"Shared.AppsAndKeys.WaitingForApproval.msg.ok"});return a===s.REJECTED&&(i=r.formatMessage({defaultMessage:"This application has been rejected from generating keys",id:"Shared.AppsAndKeys.WaitingForApproval.msg.reject"})),n.a.createElement("div",{className:t.root},i)})),se=a(1240),ne=a(15);const re=Object(F.a)(e=>({root:{padding:e.spacing(3,2)},noKeysRoot:{backgroundImage:`url(${ne.app.context+e.custom.overviewPage.keysBackground})`,height:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",minHeight:192,display:"flex",alignItems:"center"}}));function ie(e){const t=re(),{keys:a,keyStates:s,key:r,selectedApp:i,keyType:o,isKeyJWT:c,isUserOwner:p}=e;if(a.size>0&&r&&"APPROVED"===r.keyState&&!r.consumerKey)return n.a.createElement("div",{className:t.emptyBox},n.a.createElement(l.a,{variant:"h5",component:"h3"},"Error"),n.a.createElement(l.a,{variant:"body2"},n.a.createElement(h.a,{id:"Shared.AppsAndKeys.TokenManagerSummary",defaultMessage:"Error! You have partially-created keys. Use `Clean Up` option."})));if(r&&(r.keyState===s.CREATED||r.keyState===s.REJECTED))return n.a.createElement("div",{className:t.emptyBox},n.a.createElement(l.a,{variant:"body2"},n.a.createElement(ae,{keyState:r.keyState,states:s})));const d=r?r.supportedGrantTypes:[];return n.a.createElement(te,{selectedApp:i,keyType:o,keys:a,isKeyJWT:c,selectedGrantTypes:d,isUserOwner:p,summary:!0})}var oe=a(259);function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function le(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(a),!0).forEach((function(t){pe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class de extends n.a.Component{constructor(e){super(e),pe(this,"setGenerateEnabled",e=>{this.setState({generateEnabled:e})}),pe(this,"getserverSupportedGrantTypes",()=>{(new P.a).getSettings().then(e=>{const{keyRequest:t}=this.state,a=le({},t);a.serverSupportedGrantTypes=e.obj.grantTypes,a.supportedGrantTypes=e.obj.grantTypes.filter(e=>"authorization_code"!==e&&"implicit"!==e),this.setState({keyRequest:a})}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0})})}),pe(this,"loadApplication",()=>{this.getserverSupportedGrantTypes(),this.appId&&this.application.then(e=>e.getKeys()).then(e=>{const{keyType:t}=this.props,{keyRequest:a}=this.state;if(e.size>0&&e.get(t)){const{callbackUrl:s,supportedGrantTypes:n}=e.get(t),r=le({},a,{callbackUrl:s,supportedGrantTypes:n});this.setState({keys:e,keyRequest:r})}else this.setState({keys:e})}).catch(e=>{404===e.status&&this.setState({notFound:!0})})});const{selectedApp:t,keyType:a}=this.props;this.state={isLoading:!1,keys:null,isKeyJWT:!1,keyRequest:{keyType:a,serverSupportedGrantTypes:[],supportedGrantTypes:[],callbackUrl:"",validityTime:3600},providedConsumerKey:"",providedConsumerSecret:"",generateEnabled:!0},this.keyStates={COMPLETED:"COMPLETED",APPROVED:"APPROVED",CREATED:"CREATED",REJECTED:"REJECTED"},t&&(this.appId=t.appId||t.value,this.application=C.a.get(this.appId)),this.updateKeyRequest=this.updateKeyRequest.bind(this),this.generateKeys=this.generateKeys.bind(this),this.updateKeys=this.updateKeys.bind(this),this.cleanUpKeys=this.cleanUpKeys.bind(this),this.handleOnChangeProvidedOAuth=this.handleOnChangeProvidedOAuth.bind(this),this.provideOAuthKeySecret=this.provideOAuthKeySecret.bind(this)}componentDidMount(){this.loadApplication()}updateKeyRequest(e){this.setState({keyRequest:e})}generateKeys(){const{keyRequest:e,keys:t}=this.state;this.setState({isLoading:!0});const{keyType:a,updateSubscriptionData:s,selectedApp:{tokenType:n,hashEnabled:r},intl:i}=this.props;this.application.then(t=>t.generateKeys(a,e.supportedGrantTypes,e.callbackUrl,e.validityTime)).then(e=>{s&&s();const o=new Map([...t]),c="JWT"===n||r;o.set(a,e),this.setState({keys:o,isKeyJWT:c}),k.a.info(i.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.success",defaultMessage:"Application keys generated successfully"}))}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0}),k.a.error(i.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.generate.error",defaultMessage:"Error occurred when generating application keys"}))}).finally(()=>this.setState({isLoading:!1}))}updateKeys(){this.setState({isLoading:!0});const{keys:e,keyRequest:t}=this.state,{keyType:a,intl:s}=this.props,n=e.get(a);this.application.then(e=>e.updateKeys(n.tokenType,a,t.supportedGrantTypes,t.callbackUrl,n.consumerKey,n.consumerSecret)).then(e=>{this.setState({keys:e.keys}),k.a.info(s.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.update.success",defaultMessage:"Application keys updated successfully"}))}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0}),k.a.error(s.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.update.error",defaultMessage:"Error occurred when updating application keys"}))}).finally(()=>this.setState({isLoading:!1}))}cleanUpKeys(){const{keyType:e,intl:t}=this.props;this.application.then(t=>t.cleanUpKeys(e)).then(()=>{this.loadApplication(),k.a.info(t.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.cleanup.success",defaultMessage:"Application keys cleaned successfully"}))}).catch(e=>{const{status:a}=e;404===a&&this.setState({notFound:!0}),k.a.error(t.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.cleanup.error",defaultMessage:"Error occurred while cleaning up application keys"}))})}handleOnChangeProvidedOAuth(e){this.setState({[e.target.name]:e.target.value})}provideOAuthKeySecret(){const{providedConsumerKey:e,providedConsumerSecret:t}=this.state,{keyType:a,intl:s}=this.props;this.application.then(s=>s.provideKeys(a,e,t)).then(()=>{this.setState({providedConsumerKey:"",providedConsumerSecret:""}),k.a.info(s.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.provide.success",defaultMessage:"Application keys provided successfully"}))}).catch(e=>{const{status:t}=e;404===t&&this.setState({notFound:!0}),k.a.error(s.formatMessage({id:"Shared.AppsAndKeys.TokenManager.key.provide.error",defaultMessage:"Error occurred when providing application keys"}))})}render(){const{classes:e,selectedApp:t,keyType:a,summary:s}=this.props,{keys:r,keyRequest:i,isLoading:o,isKeyJWT:k,providedConsumerKey:S,providedConsumerSecret:A,generateEnabled:f}=this.state;if(!r)return n.a.createElement(g.a,null);const b=K.a.getUser().name;let T=!1;t.owner&&b.toLowerCase()===t.owner.toLowerCase()&&(T=!0);const C=r.get(a);if(C&&C.token&&(i.validityTime=C.token.validityTime),s)return r?n.a.createElement(ie,{keys:r,key:C,keyStates:this.keyStates,selectedApp:t,keyType:a,isKeyJWT:k,isUserOwner:T}):n.a.createElement(oe.a,null);if(r.size>0&&C&&"APPROVED"===C.keyState&&!C.consumerKey)return n.a.createElement(n.a.Fragment,null,n.a.createElement(l.a,{className:e.cleanUpInfoText,variant:"subtitle1"},n.a.createElement(h.a,{id:"Shared.AppsAndKeys.TokenManager.cleanup.text",defaultMessage:"Error! You have partially-created keys. Please click `Clean Up` button and try again."})),n.a.createElement(c.a,{variant:"contained",color:"primary",className:e.cleanUpButton,onClick:this.cleanUpKeys},n.a.createElement(h.a,{defaultMessage:"Clean up",id:"Shared.AppsAndKeys.TokenManager.cleanup"})));if(C&&(C.keyState===this.keyStates.CREATED||C.keyState===this.keyStates.REJECTED))return n.a.createElement(ae,{keyState:C.keyState,states:this.keyStates});const O=C?C.supportedGrantTypes:[],P=this.context,{mapExistingAuthApps:I}=P.settings;return n.a.createElement("div",{className:e.root},n.a.createElement(l.a,{variant:"h5"},"PRODUCTION"===a?"Production ":"Sandbox ",n.a.createElement(h.a,{defaultMessage:"Key and Secret",id:"Shared.AppsAndKeys.TokenManager.key.and.secret"})),n.a.createElement(te,{selectedApp:t,keyType:a,keys:r,isKeyJWT:k,selectedGrantTypes:O,isUserOwner:T}),n.a.createElement(p.a,{className:e.paper},n.a.createElement(d.a,{defaultExpanded:!0},n.a.createElement(u.a,{expandIcon:n.a.createElement(y.a,null,"expand_more")},n.a.createElement(l.a,{className:e.heading,variant:"subtitle1"},r.size>0&&r.get(a)?n.a.createElement(h.a,{defaultMessage:"Key Configurations",id:"Shared.AppsAndKeys.TokenManager.update.configuration"}):n.a.createElement(h.a,{defaultMessage:"Key Configuration",id:"Shared.AppsAndKeys.TokenManager.key.configuration"}))),n.a.createElement(m.a,{className:e.keyConfigWrapper},n.a.createElement(w.a,{keys:r,selectedApp:t,keyType:a,updateKeyRequest:this.updateKeyRequest,keyRequest:i,isUserOwner:T,isKeysAvailable:r.size>0&&r.get(a),setGenerateEnabled:this.setGenerateEnabled}))),n.a.createElement("div",{className:e.generateWrapper},n.a.createElement(se.a,{resourcePath:se.c.APPLICATION_GENERATE_KEYS,resourceMethod:se.b.POST},T?n.a.createElement(c.a,{variant:"contained",color:"primary",className:e.button,onClick:r.size>0&&r.get(a)?this.updateKeys:this.generateKeys,disabled:!f||o},r.size>0&&r.get(a)?"Update":"Generate Keys",o&&n.a.createElement(E.a,{size:20})):n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{variant:"contained",color:"primary",className:e.button,onClick:r.size>0&&r.get(a)?this.updateKeys:this.generateKeys,disabled:!T||o},r.size>0&&r.get(a)?"Update keys":"Generate Keys",o&&n.a.createElement(E.a,{size:20})),n.a.createElement(l.a,{variant:"caption"},n.a.createElement(h.a,{defaultMessage:"Only owner can generate or update keys",id:"Shared.AppsAndKeys.TokenManager.key.and.user.owner"})))))),I&&!r.get(a)&&n.a.createElement(p.a,{className:e.paper},n.a.createElement(d.a,{defaultExpanded:!0},n.a.createElement(u.a,{expandIcon:n.a.createElement(y.a,null,"expand_more")},n.a.createElement(l.a,{className:e.heading,variant:"subtitle1"},n.a.createElement(h.a,{defaultMessage:"Provide Existing OAuth Keys",id:"Shared.AppsAndKeys.TokenManager.provide.oauth"}))),n.a.createElement(m.a,{className:e.keyConfigWrapper},n.a.createElement(v,{onChange:this.handleOnChangeProvidedOAuth,consumerKey:S,consumerSecret:A,isUserOwner:T}))),n.a.createElement("div",{className:e.generateWrapper},n.a.createElement(se.a,{resourcePath:se.c.APPLICATION_GENERATE_KEYS,resourceMethod:se.b.POST},T?n.a.createElement(c.a,{variant:"contained",color:"primary",className:e.button,onClick:this.provideOAuthKeySecret},r.size>0&&r.get(a)?n.a.createElement(h.a,{defaultMessage:"Update",id:"Shared.AppsAndKeys.TokenManager. provide.oauth.button.update"}):n.a.createElement(h.a,{defaultMessage:"Provide",id:"Shared.AppsAndKeys. TokenManager.provide.oauth.button.provide"})):n.a.createElement(n.a.Fragment,null,n.a.createElement(c.a,{variant:"contained",color:"primary",className:e.button,onClick:this.provideOAuthKeySecret,disabled:!T},r.size>0&&r.get(a)?n.a.createElement(h.a,{defaultMessage:"Update",id:"Shared.AppsAndKeys.TokenManager.provide. oauth.button.update"}):n.a.createElement(h.a,{defaultMessage:"Provide",id:"Shared.AppsAndKeys.TokenManager. provide.oauth.button.provide"})),n.a.createElement(l.a,{variant:"caption"},n.a.createElement(h.a,{defaultMessage:"Only owner can provide keys",id:"Shared.AppsAndKeys.TokenManager.key.provide.user.owner"})))))))}}pe(de,"contextType",O.c),de.defaultProps={updateSubscriptionData:()=>{},summary:!1},de.propTypes={classes:i.a.instanceOf(Object).isRequired,selectedApp:i.a.shape({tokenType:i.a.string.isRequired,appId:i.a.string,value:i.a.string,owner:i.a.string,hashEnabled:i.a.bool}).isRequired,keyType:i.a.string.isRequired,updateSubscriptionData:i.a.func,intl:i.a.shape({formatMessage:i.a.func}).isRequired,summary:i.a.bool};t.a=Object(h.e)(Object(o.a)(e=>({root:{padding:e.spacing(3)},button:{marginLeft:0},cleanUpButton:{marginLeft:15},cleanUpInfoText:{padding:"10px 0px 10px 15px"},tokenSection:{marginTop:e.spacing(2),marginBottom:e.spacing(2)},margin:{marginRight:e.spacing(2)},keyConfigWrapper:{flexDirection:"column",marginBottom:0},generateWrapper:{padding:"10px 0px",marginLeft:e.spacing(1.25)},paper:{background:"none",marginBottom:e.spacing(2),marginTop:e.spacing(2)}}))(de))}}]);
//# sourceMappingURL=APICredentials~ApplicationDetails.bundle.js.map