(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{1460:function(e,t,a){"use strict";var i=a(1),s=a.n(i),n=a(1216),r=a(1531),l=a(1576),o=a(1240);t.a=e=>{const{classes:t,handleClick:a,heading:i,caption:c,buttonText:p}=e;return s.a.createElement("div",{className:t.appContent},s.a.createElement(n.a,{type:"info",className:t.dialogContainer},s.a.createElement(r.a,{variant:"h5",component:"h3"},i),s.a.createElement(r.a,{component:"p"},c),s.a.createElement(o.a,{resourcePath:o.c.APPLICATIONS,resourceMethod:o.b.POST},s.a.createElement(l.a,{variant:"contained",color:"primary",className:t.button,onClick:a},p))))}},2261:function(e,t,a){"use strict";a.r(t);var i=a(1),s=a.n(i),n=a(17),r=a.n(n),l=a(1182),o=a(1531),c=a(646),p=a(1576),d=a(1383),u=a(1460),m=a(256),b=a(1196),g=a(1552),h=a(1591),E=a(1569),y=a(1216),f=a(180),S=a(1226),C=a(22),w=a(1624),A=a(1240),v=a(1535),D=a(1197),k=a(1199),N=a.n(k),M=a(1218),P=a(1525);var I=e=>{const t=void 0!==e.strokeColor?e.strokeColor:"#8b8e95",a=void 0!==e.width?e.width:32,i=void 0!==e.height?e.height:32,n=void 0!==e.icon?e.icon:"api",r=void 0!==e.className?e.className:"";return"retry"===n?s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:i,viewBox:"0 0 15 15",className:r},s.a.createElement("path",{d:"M9 13.5c-2.49 0-4.5-2.01-4.5-4.5S6.51 4.5 9 4.5c1.24 0 2.36.52 3.17 1.33L10 8h5V3l-1.76 1.76C12.15 3.68 10.66 3 9 3 5.69 3 3.01 5.69 3.01 9S5.69 15 9 15c2.97 0 5.43-2.16 5.9-5h-1.52c-.46 2-2.24 3.5-4.38 3.5z",fill:t})):s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:i,viewBox:"0 0 8.428752 8.6233671",id:"svg8",className:r},s.a.createElement("g",{id:"layer2",transform:"translate(105.022 -106.571)"},s.a.createElement("g",{transform:"matrix(.84802 0 0 .87176 -110.085 63.188)",id:"g5876",strokeLinecap:"round"},s.a.createElement("circle",{id:"circle5869",cx:"8.138",cy:"57.583",r:"1.497",fill:t,strokeWidth:"0.529",strokeLinejoin:"round"}),s.a.createElement("path",{d:"m 6.6416492,53.373914 c 2.7091648,-0.363432 5.5994938,2.122181 5.7062048,5.612659",id:"path5872",fill:"none",stroke:t,strokeWidth:"1.323"}),s.a.createElement("path",{id:"path5874",d:"m 6.7351935,50.47404 c 5.1370835,-0.52388 7.9751195,3.245055 8.5125345,8.512533",fill:"none",stroke:t,strokeWidth:"1.323"}))))};const O=e=>{const{classes:t,loadInfo:a,handleSubscriptionDelete:i,theme:n,selectedAppId:r,updateSubscriptionData:l,selectedKeyType:o,app:p,index:d,applicationOwner:u,hashEnabled:m,isMonetizationEnabled:b,handleRetry:g}=e;return s.a.createElement(s.a.Fragment,null,s.a.createElement("tr",{style:{backgroundColor:d%2?"":"#ffffff"}},s.a.createElement("td",{className:t.td},p.label),s.a.createElement("td",{className:t.td},p.policy),s.a.createElement("td",{className:t.td},p.status),s.a.createElement("td",{className:t.td},s.a.createElement("div",{className:t.actionColumn},s.a.createElement(c.a,{className:t.button,to:"/applications/"+p.value},s.a.createElement("span",null,s.a.createElement(f.a,{id:"Apis.Details.Credentials.SubscriptionTableRow.manage.app",defaultMessage:"MANAGE APP"})),s.a.createElement(M.a,{width:16,height:16,strokeColor:n.palette.primary.main,icon:"applications"})),b&&"ON_HOLD"===p.status&&s.a.createElement("a",{className:t.button,onClick:()=>g(p.subscriptionId,p.value,p.policy),onKeyDown:()=>g(p.subscriptionId,p.value,p.policy)},s.a.createElement("span",null,s.a.createElement(f.a,{id:"Apis.Details.Credentials.SubscriptionTableRow.retry",defaultMessage:"RETRY"})),s.a.createElement(I,{width:16,height:16,strokeColor:n.palette.primary.main,icon:"retry"})),s.a.createElement(A.a,{resourcePath:A.c.SINGLE_SUBSCRIPTION,resourceMethod:A.b.DELETE},s.a.createElement("a",{className:t.button,onClick:()=>i(p.subscriptionId,l),onKeyDown:()=>i(p.subscriptionId,l)},s.a.createElement("span",null,s.a.createElement(f.a,{id:"Apis.Details.Credentials.SubscriptionTableRow.unsubscribe",defaultMessage:"UNSUBSCRIBE"})),s.a.createElement(M.a,{width:16,height:16,strokeColor:n.palette.primary.main,icon:"subscriptions"}))),s.a.createElement("a",{className:N()(t.button,{[t.activeLink]:r&&"PRODUCTION"===o&&p.value===r}),onClick:()=>a("PRODUCTION",p.value),onKeyDown:()=>a("PRODUCTION",p.value)},s.a.createElement("span",null,s.a.createElement(f.a,{id:"Apis.Details.Credentials.SubscriptionTableRow.prod.keys",defaultMessage:"PROD KEYS"})),s.a.createElement(M.a,{width:16,height:16,strokeColor:n.palette.primary.main,icon:"productionkeys"})),s.a.createElement("a",{className:N()(t.button,{[t.activeLink]:r&&"SANDBOX"===o&&p.value===r}),onClick:()=>a("SANDBOX",p.value),onKeyDown:()=>a("SANDBOX",p.value)},s.a.createElement("span",null,s.a.createElement(f.a,{id:"Apis.Details.Credentials.SubscriptionTableRow.sandbox.keys",defaultMessage:"SANDBOX KEYS"})),s.a.createElement(M.a,{width:16,height:16,strokeColor:n.palette.primary.main,icon:"productionkeys"}))))),p.value===r&&("PRODUCTION"===o||"SANDBOX"===o)&&s.a.createElement("tr",null,s.a.createElement("td",{colSpan:"4"},s.a.createElement("div",{className:t.selectedWrapper},s.a.createElement(P.a,{keyType:o,selectedApp:{appId:p.value,label:p.label,owner:u,hashEnabled:m},updateSubscriptionData:l})))))};O.propTypes={classes:r.a.shape({td:r.a.shape({}),actionColumn:r.a.shape({}),button:r.a.shape({}),activeLink:r.a.shape({}),selectedWrapper:r.a.shape({})}).isRequired,theme:r.a.shape({}).isRequired,handleSubscriptionDelete:r.a.func.isRequired,loadInfo:r.a.func.isRequired,selectedAppId:r.a.string.isRequired,updateSubscriptionData:r.a.func.isRequired,selectedKeyType:r.a.string.isRequired,applicationOwner:r.a.string.isRequired,app:r.a.shape({label:r.a.string,policy:r.a.string,status:r.a.string,value:r.a.string,subscriptionId:r.a.string}).isRequired,index:r.a.number.isRequired};var x=Object(l.a)(e=>({button:{padding:e.spacing(1),color:e.palette.getContrastText(e.palette.background.default),display:"flex",alignItems:"center",fontSize:"11px",cursor:"pointer","& span":{paddingLeft:6,display:"inline-block"}},actionColumn:{display:"flex",textAlign:"right",direction:"rtl"},td:{color:e.palette.getContrastText(e.palette.background.default),borderBottom:"solid 1px "+e.palette.grey.A200,fontSize:"11px",paddingLeft:e.spacing(1),height:35},selectedWrapper:{background:e.palette.grey[100],borderLeft:"solid 2px "+e.palette.primary.main}}),{withTheme:!0})(O);function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function R(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class L extends s.a.Component{constructor(){super(...arguments),R(this,"state",{expanded:!0,selectedAppId:!1,selectedKeyType:!1,subscriptionRequest:{applicationId:"",apiId:"",throttlingPolicy:""},throttlingPolicyList:[],applicationOwner:"",hashEnabled:!1,isSubscripbing:!1}),R(this,"updateData",()=>{const{api:e,applicationsAvailable:t}=this.context,{subscriptionRequest:a}=this.state,i=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){R(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},a,{apiId:e.id}),s=e.tiers;s&&s[0]&&(i.throttlingPolicy=s[0].tierName),t&&t[0]&&(i.applicationId=t[0].value),this.setState({subscriptionRequest:i,throttlingPolicyList:s})}),R(this,"handleExpandClick",()=>{this.setState(e=>({expanded:!e.expanded}))}),R(this,"handleSubscribe",()=>{const{updateSubscriptionData:e,apiType:t}=this.context,{subscriptionRequest:a}=this.state,{intl:i}=this.props;this.setState({isSubscripbing:!0}),(new m.a).subscribe(a.apiId,a.applicationId,a.throttlingPolicy,t).then(t=>{const a=JSON.parse(t.body.redirectionParams);if(a){const e=Stripe(a.additionalParameters.stripePublishableKey),{error:t}=e.redirectToCheckout({sessionId:a.additionalParameters.sessionId});t&&(console.log("Error while creating redirect."),console.error(t),b.a.error(i.formatMessage({defaultMessage:"Failed to retry subscription",id:"monetization.CustomComponent.CheckoutSucessPage.subscription.failed"})))}"ON_HOLD"===t.body.status?b.a.info(i.formatMessage({defaultMessage:"Your subscription request has been submitted and is now awaiting approval.",id:"subscription.pending"})):(console.log("Subscription created successfully with ID : "+t.body.subscriptionId),b.a.info(i.formatMessage({defaultMessage:"Subscribed successfully",id:"Apis.Details.Credentials.Credentials.subscribed.successfully"}))),this.setState({isSubscripbing:!1}),e&&e(this.updateData)}).catch(e=>{this.setState({isSubscripbing:!1}),console.log("Error while creating the subscription."),console.error(e)})}),R(this,"handleRetry",(e,t,a)=>{const{intl:i}=this.props,{api:s,apiType:n}=this.context;(new d.a).deleteSubscription(e).then(()=>{return(new m.a).subscribe(s.id,t,a,n).then(e=>{console.log(e);const t=JSON.parse(e.body.redirectionParams);if(t){const e=Stripe(t.additionalParameters.stripePublishableKey),{error:a}=e.redirectToCheckout({sessionId:t.additionalParameters.sessionId});a&&(console.log("Error while creating redirect."),console.error(a))}b.a.info(i.formatMessage({defaultMessage:"You will now be redirected to complete payment",id:"Apis.Details.Credentials.Credentials.redirected.complete.payment"}))})}).catch(e=>{console.log("Error while retrying the subscription."),console.error(e),b.a.error(i.formatMessage({defaultMessage:"Failed to retry subscription",id:"monetization.CustomComponent.CheckoutSucessPage.subscription.failed"}))})}),R(this,"goToWizard",()=>{const{history:e}=this.props;e.push("credentials/wizard")}),R(this,"loadInfo",(e,t)=>{this.setState({selectedKeyType:e,selectedAppId:t}),S.a.get(t).then(e=>{this.setState({applicationOwner:e.owner,hashEnabled:e.hashEnabled})})}),R(this,"updateSubscriptionRequest",e=>{this.setState({subscriptionRequest:e})}),R(this,"handleSubscriptionDelete",(e,t)=>{const{intl:a}=this.props;(new d.a).deleteSubscription(e).then(e=>{if(200!==e.status)return console.log(e),void b.a.info(a.formatMessage({defaultMessage:"Something went wrong while deleting the Subscription!",id:"Apis.Details.Credentials.Credentials.something.went.wrong.with.subscription"}));b.a.info(a.formatMessage({defaultMessage:"Subscription deleted successfully!",id:"Apis.Details.Credentials.Credentials.subscription.deleted.successfully"})),t&&t()})})}componentDidMount(){const{api:e,updateSubscriptionData:t}=this.context;e?this.updateData():t(this.updateData)}render(){const{classes:e,intl:t}=this.props,{api:a,updateSubscriptionData:i,applicationsAvailable:n,subscribedApplications:r}=this.context,{selectedKeyType:l,selectedAppId:d,subscriptionRequest:m,throttlingPolicyList:b,applicationOwner:S,hashEnabled:D,isSubscripbing:k}=this.state,N=C.a.getUser(),M=a.securityScheme.includes("mutualssl")&&!a.securityScheme.includes("oauth2")&&!a.securityScheme.includes("api_key")&&!a.securityScheme.includes("basic_auth"),P=a.securityScheme.includes("basic_auth")&&!a.securityScheme.includes("oauth2")&&!a.securityScheme.includes("api_key");return s.a.createElement(h.a,{container:!0},s.a.createElement(h.a,{item:!0,md:12,lg:11},s.a.createElement(h.a,{container:!0,spacing:5},s.a.createElement(h.a,{item:!0,md:12},s.a.createElement(o.a,{onClick:this.handleExpandClick,variant:"h4",className:e.titleSub},s.a.createElement(f.a,{id:"Apis.Details.Credentials.Credentials.api.credentials",defaultMessage:"Subscriptions"}),n.length>0&&s.a.createElement(c.a,{to:M||P?null:`/apis/${a.id}/credentials/wizard`,style:a.isSubscriptionAvailable?null:{pointerEvents:"none"},className:e.addLinkWrapper},s.a.createElement(p.a,{color:"secondary",className:e.buttonElm,disabled:!a.isSubscriptionAvailable||M||P,size:"small"},s.a.createElement(E.a,null,"add_circle_outline"),s.a.createElement(f.a,{id:"Apis.Details.Credentials.SubscibeButtonPanel.subscribe.wizard.with.new.app",defaultMessage:"Subscription & Key Generation Wizard"})))),s.a.createElement(g.a,{elevation:0,className:e.paper},s.a.createElement(o.a,{variant:"body2",className:e.descWrapper},s.a.createElement(f.a,{id:"Apis.Details.Credentials.Credentials.",defaultMessage:"An application \n                                        is primarily used to decouple the consumer from the APIs. It allows you to \n                                        generate and use a single key for multiple APIs and subscribe multiple times to \n                                        a single API with different SLA levels."})),(()=>{return a.lifeCycleStatus&&"prototyped"===a.lifeCycleStatus.toLowerCase()?s.a.createElement(s.a.Fragment,null,s.a.createElement(y.a,{type:"info",className:e.dialogContainer},s.a.createElement(o.a,{component:"p"},s.a.createElement(f.a,{id:"Apis.Details.Credentials.Credentials.you.do.not.need.credentials.to.access.prototyped.api",defaultMessage:"You do not need credentials to access Prototyped APIs"})))):M||P?s.a.createElement(y.a,{type:"info",className:e.dialogContainer},s.a.createElement(o.a,{component:"p"},s.a.createElement(f.a,{id:"Apis.Details.Creadentials.credetials.mutualssl",defaultMessage:"Subscription is not required for Mutual SSL APIs or APIs with only Basic Authentication."}))):0===n.length&&0===r.length?s.a.createElement(u.a,{classes:e,handleClick:this.goToWizard,heading:N?t.formatMessage({defaultMessage:"Subscribe",id:"Apis.Details.Credentials.Credentials.subscribe.to.application"}):t.formatMessage({defaultMessage:"Sign In to Subscribe",id:"Apis.Details.Credentials.Credentials.subscribe.to.application.sign.in"}),caption:t.formatMessage({defaultMessage:"You need to subscribe to an application to access this API",id:"Apis.Details.Credentials.Credentials.subscribe.to.application.msg"}),buttonText:t.formatMessage({defaultMessage:"Subscribe",id:"Apis.Details.Credentials.Credentials.generate"})}):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:e.generateCredentialWrapper},s.a.createElement(A.a,{resourcePath:A.c.SUBSCRIPTIONS,resourceMethod:A.b.POST},s.a.createElement(o.a,{variant:"h5"},s.a.createElement(f.a,{id:"Apis.Details.Credentials.Credentials.subscribe.to.application",defaultMessage:"Subscribe"})),s.a.createElement("div",{className:e.credentialBoxWrapper},0===n.length&&s.a.createElement("div",{className:e.credentialBox},s.a.createElement(o.a,{variant:"body2"},s.a.createElement(f.a,{id:"Apis.Details.Credentials.Credentials.api.credentials.with.wizard.message",defaultMessage:"Use the Subscription and Key Generation Wizard. Create a new application -> Subscribe -> Generate keys and Access Token to invoke this API."})),s.a.createElement(c.a,{to:M||P?null:`/apis/${a.id}/credentials/wizard`,style:a.isSubscriptionAvailable?null:{pointerEvents:"none"}},s.a.createElement(p.a,{variant:"contained",color:"primary",className:e.buttonElm,disabled:!a.isSubscriptionAvailable||M||P},s.a.createElement(f.a,{id:"Apis.Details.Credentials.SubscibeButtonPanel.subscribe.wizard.with.new.app",defaultMessage:"Subscription & Key Generation Wizard"})))),n.length>0&&s.a.createElement("div",{className:e.credentialBox},s.a.createElement(o.a,{variant:"body2"},s.a.createElement(f.a,{id:"Apis.Details.Credentials.Credentials.api.credentials.with.subscribe.message",defaultMessage:"Subscribe to an application and generate credentials"})),s.a.createElement(w.a,{applicationsAvailable:n,subscriptionRequest:m,throttlingPolicyList:b,updateSubscriptionRequest:this.updateSubscriptionRequest,renderSmall:!0}),s.a.createElement(p.a,{variant:"contained",color:"primary",className:e.buttonElm,onClick:()=>this.handleSubscribe(),disabled:!a.isSubscriptionAvailable||k},s.a.createElement(f.a,{id:"Apis.Details.Credentials.SubscibeButtonPanel.subscribe.btn",defaultMessage:"Subscribe"}),k&&s.a.createElement(v.a,{size:24})))))),r&&r.length>0&&s.a.createElement(s.a.Fragment,null,s.a.createElement(o.a,{variant:"h5"},s.a.createElement(f.a,{id:"Apis.Details.Credentials.Credentials.api.credentials.subscribed.apps.title",defaultMessage:"Subscriptions"})),s.a.createElement(o.a,{variant:"body2"},s.a.createElement(f.a,{id:"Apis.Details.Credentials.Credentials.api.credentials.subscribed.apps.description",defaultMessage:"( Applications Subscribed to this Api )"})),s.a.createElement("table",{className:e.tableMain},s.a.createElement("tr",null,s.a.createElement("th",{className:e.th},s.a.createElement(f.a,{id:"Apis.Details.Credentials.Credentials.api.credentials.subscribed.apps.name",defaultMessage:"Application Name"})),s.a.createElement("th",{className:e.th},s.a.createElement(f.a,{id:"Apis.Details.Credentials.Credentials.api.credentials.subscribed.apps.tier",defaultMessage:"Throttling Tier"})),s.a.createElement("th",{className:e.th},s.a.createElement(f.a,{id:"Apis.Details.Credentials.Credentials.api.credentials.subscribed.apps.status",defaultMessage:"Application Status"})),s.a.createElement("th",{className:e.th})),r.map((e,t)=>s.a.createElement(x,{key:t,loadInfo:this.loadInfo,handleSubscriptionDelete:this.handleSubscriptionDelete,selectedAppId:d,updateSubscriptionData:i,selectedKeyType:l,app:e,index:t,applicationOwner:S,hashEnabled:D,isMonetizationEnabled:a.monetization.enabled,handleRetry:this.handleRetry})))))})())))))}}R(L,"contextType",D.a),L.propTypes={classes:r.a.shape({contentWrapper:r.a.string,titleSub:r.a.string,tableMain:r.a.string,th:r.a.string,paper:r.a.string,descWrapper:r.a.string,generateCredentialWrapper:r.a.string,credentialBoxWrapper:r.a.string,credentialBox:r.a.string,buttonElm:r.a.string,dialogContainer:r.a.string}).isRequired,history:r.a.shape({}).isRequired,intl:r.a.shape({}).isRequired};t.default=Object(f.e)(Object(l.a)(e=>({contentWrapper:{maxWidth:e.custom.contentAreaWidth,paddingLeft:e.spacing(3),paddingTop:e.spacing(3)},titleSub:{marginLeft:e.spacing(3),paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},generateCredentialWrapper:{marginLeft:0,paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},tableMain:{width:"100%",borderCollapse:"collapse",marginTop:e.spacing(3),marginLeft:e.spacing(2),marginRight:e.spacing(1)},th:{color:e.palette.getContrastText(e.palette.background.default),borderBottom:"solid 1px "+e.palette.grey.A200,borderTop:"solid 1px "+e.palette.grey.A200,textAlign:"left",fontSize:"11px",paddingLeft:e.spacing(1),paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},expansion:{background:"transparent",boxShadow:"none"},summary:{alignItems:"center"},subscribeRoot:{paddingLeft:e.spacing(2)},activeLink:{background:e.palette.grey.A100},appBar:{background:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.paper)},toolbar:{marginLeft:e.spacing(2)},subscribeTitle:{flex:1},paper:{marginLeft:e.spacing(3),padding:e.spacing(2)},descWrapper:{marginBottom:e.spacing(2)},credentialBoxWrapper:{paddingLeft:e.spacing(2)},credentialBox:{padding:e.spacing(1),border:"solid 1px #ccc",borderRadius:5,marginBottom:e.spacing(2),marginTop:e.spacing(2)},addLinkWrapper:{marginLeft:e.spacing(2)}}),{withTheme:!0})(L))}}]);
//# sourceMappingURL=APICredentials.bundle.js.map